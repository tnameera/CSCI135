(window.webpackJsonp=window.webpackJsonp||[]).push([["whiteboard"],{"../../../../home/node/node_modules/collab-js-whiteboard/dist/adapters/wb-jinx-adapter.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js");e.getNewInstance=function(){return new r};var r=function(){function t(){}return t.prototype.initProcessor=function(t){this.wbProcessor=t,this.jinxMessaging.setViewReady(!!this.wbProcessor)},t.prototype.getMyId=function(){return this.id},t.prototype.send=function(t,e,n){var r,s=t;switch(t){case"draw":s="draw",r="add";break;case"draw_pointer":s="point",r="add";break;case"update":s="draw",r="update";break;case"update_pointer":s="point",r="update";break;case"remove":s="draw",r="remove";break;case"remove_pointer":s="point",r="remove";break;default:i.warn("Unknown action:",t)}var o=JSON.stringify(e);"draw"===s?this.jinxMessaging.draw(r,o,n):"point"===s?this.jinxMessaging.point(r,o):i.warn("Unknown method:",s)},t.prototype.initJinxMessaging=function(t){this.jinxMessaging=t,this.jinxMessaging.initAdapter(this)},t.prototype.setMyId=function(t){this.id=t},t.prototype.setBaseUrl=function(t){this.wbProcessor&&(this.wbProcessor.baseUrl=t)},t.prototype.processReset=function(t,e){if(void 0===e&&(e=!1),this.wbProcessor){if(t&&t.length){var n=this.parseJSON(t);if(n&&("background"===n.action||!0===n.reset))return this.wbProcessor.processUpdate(n),void(e&&this.updatesComplete())}this.wbProcessor.reset(e)}},t.prototype.processClear=function(t){void 0===t&&(t=!0),this.wbProcessor&&this.wbProcessor.clear(t)},t.prototype.processPoint=function(t,e){void 0===e&&(e=!0),this.processUpdate(t)&&e&&this.updatesComplete()},t.prototype.processDraw=function(t,e){void 0===e&&(e=!1),this.processUpdate(t)&&e&&this.updatesComplete()},t.prototype.processParticipantExit=function(t){if(this.wbProcessor){var e="pointer_"+t;this.wbProcessor.processUpdate({uid:t,data_id:e,action:"remove_pointer"})}},t.prototype.updatesComplete=function(){this.wbProcessor&&this.wbProcessor.updatesComplete()},t.prototype.processUpdate=function(t){if(!this.wbProcessor)return!1;var e=this.parseJSON(t);return e&&this.wbProcessor.processUpdate(e),!!e},t.prototype.parseJSON=function(t){var e;try{e=JSON.parse(t)}catch(e){return void i.error("error parsing json payload:",t)}return e},t}();e.WhiteboardJinxAdapter=r},"../../../../home/node/node_modules/collab-js-whiteboard/dist/content-sizer.js":function(t,e,n){var i=n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../../../home/node/node_modules/lodash/lodash.js"),s=n("../../../../home/node/node_modules/collab-js-whiteboard/node_modules/hammerjs/hammer.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=(i=n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js"),n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js")),l=function(){function t(){this._align_top=!0,this._fit=t.FIT_BEST,this._desired_zoom=1,this.active=!1,this.isRTL=!1,this.noTouchEvents=!1,this.pinchStartScale=null,this.pinchStartZoom=null,this.panStartScrollX=null,this.panStartScrollY=null,this.abs_min_zoom=.1,this.abs_max_zoom=5}return t.getNewInstance=function(){return new t},t.prototype.teardown=function(){a.debug("Tearing down content-sizer."),this.active=!1,delete this.resizeSensor},t.prototype.init=function(t,e,n,s){var a=r.defaults(s,{uiCallback:null,sizeCallback:null,isRTL:!1,alignTop:!0,minSize:50,noTouchEvents:!1,maxHeight:null,maxWidth:null,absMinZoom:.1,absMaxZoom:5});this.isRTL=a.isRTL,this._align_top=a.alignTop,this.minSize=a.minSize,this.noTouchEvents=a.noTouchEvents,this.max_content_height=a.maxHeight,this.max_content_width=a.maxWidth,this.has_max_content_size=!!this.max_content_height&&!!this.max_content_width,this.abs_min_zoom=a.absMinZoom,this.abs_max_zoom=a.absMaxZoom,"object"==typeof a.uiCallback&&(this.uiCallback=a.uiCallback),"object"==typeof a.sizeCallback&&(this.sizeCallback=a.sizeCallback),this.containerOuter=o(t),this.containerOuter.css({height:"100%",width:"100%",position:"relative",overflow:"auto"}),this.containerOuter.attr("dir","ltr"),this.contentContainer=o(e),this.contentContainer.css({position:"absolute",overflow:"hidden"}),this.eventObject=o(n),this.resizeSensor=new i(this.contentContainer.parent()[0],o.proxy(this.resizeContents,this)),this.bindTouchEvents()},t.prototype._update_zoom=function(t){null!==t&&0!==t&&(t<this.abs_min_zoom&&(t=this.abs_min_zoom),t>this.abs_max_zoom&&(t=this.abs_max_zoom),t<this.min_zoom&&(t=this.min_zoom),t>this.max_zoom&&(t=this.max_zoom),this._desired_zoom!==t&&(this._desired_zoom=t,this.resizeContents()))},t.prototype._update_fit=function(t){var e=this;this._fit=t,this._desired_zoom=1,this.uiCallback&&this.uiCallback.fitChanged(this._fit),this.resizeContents(),setTimeout(o.proxy((function(){e.resizeContents()}),this),50)},Object.defineProperty(t.prototype,"alignTop",{get:function(){return this._align_top},set:function(t){this._align_top=t,this.resizeContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectiveZoom",{get:function(){return this.effective_zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"desiredZoom",{get:function(){return this._desired_zoom},set:function(t){this._update_zoom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fit",{get:function(){return this._fit},set:function(t){this._update_fit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitWidth",{get:function(){return this._fit===t.FIT_WIDTH},set:function(e){this._update_fit(e?t.FIT_WIDTH:t.FIT_BEST)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitHeight",{get:function(){return this._fit===t.FIT_HEIGHT},set:function(e){this._update_fit(e?t.FIT_HEIGHT:t.FIT_BEST)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitActual",{get:function(){return this._fit===t.FIT_ACTUAL},set:function(e){this._update_fit(e?t.FIT_ACTUAL:t.FIT_BEST)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitBest",{get:function(){return this._fit===t.FIT_BEST},set:function(e){this._update_fit(e?t.FIT_BEST:t.FIT_ACTUAL)},enumerable:!0,configurable:!0}),t.prototype.isLandscape=function(){return this.orig_aspect>=1},t.prototype.getAspect=function(){return this.orig_aspect},t.prototype.bindTouchEvents=function(){this.noTouchEvents||(this.hammer=new s.Manager(this.eventObject[0]),this.hammer.add(new s.Tap({event:"doubletap",taps:2})),this.hammer.add(new s.Pinch),this.hammer.add(new s.Pan),this.hammer.on("doubletap",o.proxy(this.handleDoubleTap,this)),this.hammer.on("pinchstart pinchmove pinchend pinchcancel",o.proxy(this.handlePinch,this)),this.hammer.on("panstart panmove panend pancancel",o.proxy(this.handlePan,this)),this.enableTouchEvents(!0),this.eventObject.on("wheel",o.proxy(this.handleWheel,this)))},t.prototype.enableTouchEvents=function(t){this.hammer&&(this.hammer.options.enable=t)},t.prototype.handleWheel=function(t){if(t.ctrlKey||t.metaKey){var e=t.originalEvent.deltaY;switch(t.originalEvent.deltaMode){case 1:e*=12;break;case 2:e*=100}var n=e/100;n>.25&&(n=.25),n<-.25&&(n=-.25);var i=this._desired_zoom+n;this._update_zoom(i),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}},t.prototype.handlePan=function(t){"panstart"===t.type&&(this.panStartScrollX=this.containerOuter.scrollLeft(),this.panStartScrollY=this.containerOuter.scrollTop()),"pancancel"===t.type?(this.containerOuter.scrollLeft(this.panStartScrollX),this.containerOuter.scrollTop(this.panStartScrollY)):(this.containerOuter.scrollLeft(this.panStartScrollX-t.deltaX),this.containerOuter.scrollTop(this.panStartScrollY-t.deltaY)),"panend"===t.type&&(this.panStartScrollX=null,this.panStartScrollY=null)},t.prototype.handleDoubleTap=function(t){var e=r.get(t.target,"tagName","").toLowerCase();if("text"===e||"input"===e)return!0;var n=1===this._desired_zoom?1.5:1;a.debug("handleDoubleTap",n),this._update_zoom(n)},t.prototype.handlePinch=function(t){if(a.debug("handlePinch",t),"pinchstart"===t.type&&(this.pinchStartScale=t.scale,this.pinchStartZoom=this._desired_zoom,this.panStartScrollX=this.containerOuter.scrollLeft(),this.panStartScrollY=this.containerOuter.scrollTop()),"pinchcancel"===t.type)this._update_zoom(this.pinchStartZoom),this.containerOuter.scrollLeft(this.panStartScrollX),this.containerOuter.scrollTop(this.panStartScrollY);else{this._update_zoom(this.pinchStartZoom*(t.scale/this.pinchStartScale));var e=t.center.x/this.orig_width*this.content_width-this.client_width/2;this.containerOuter.scrollLeft(e),this.containerOuter.scrollTop(t.center.y/this.orig_height*this.content_height-this.client_height/2)}"pinchend"===t.type&&(this.pinchStartScale=null,this.pinchStartZoom=null)},t.prototype.updateContentSize=function(t,e,n){void 0===n&&(n=!1);var i=this.orig_aspect;this.orig_width=t,this.orig_height=e,this.orig_aspect=this.orig_width/this.orig_height,i!==this.orig_aspect&&this.uiCallback&&this.uiCallback.aspectChanged(this.orig_aspect,this.orig_aspect>=1),this.active?this.resizeContents():(this.active=!0,this.resizeContents(),this.uiCallback&&this.uiCallback.contentReady())},t.prototype.resetScroll=function(){var t=this;setTimeout(o.proxy((function(){t.containerOuter.scrollTop(0),t.isRTL?t.containerOuter.scrollLeft(9999):t.containerOuter.scrollLeft(0)}),this),50)},t.prototype.checkRTLScroll=function(t){var e=this;void 0===t&&(t=!1),a.debug("checkRTLScroll","forceResetLeft:",t,"isRTL",this.isRTL,"scrollLeft:",this.containerOuter.scrollLeft()),this.isRTL&&(t||0===this.containerOuter.scrollLeft())&&setTimeout(o.proxy((function(){e.containerOuter.scrollLeft(9999)}),this),50)},t.prototype.resetInnerScroll=function(){this.contentContainer.scrollTop(0),this.contentContainer.scrollLeft(0)},t.prototype.resizeContents=function(){if(this.active){var t=!1;this.isRTL&&this.client_width&&this.client_width&&this.containerOuter.scrollLeft()+this.client_width>this.content_width-15&&(t=!0),this.client_width=Math.max(this.minSize,this.contentContainer.parent()[0].clientWidth),this.client_height=Math.max(this.minSize,this.contentContainer.parent()[0].clientHeight),this.client_aspect=this.client_width/this.client_height,this.effective_zoom=this._desired_zoom;var e,n,i=!1;if(this._fit.width||this._fit.height)this._fit.height&&this._fit.width&&this.client_aspect>this.orig_aspect||this._fit.height&&!this._fit.width?(this.content_height=this.client_height*this._desired_zoom,this.min_zoom=Math.max(this.abs_min_zoom,Math.min(1,this.client_width/(this.client_height*this.orig_aspect))),this.has_max_content_size?(this.content_height>this.max_content_height&&(i=!0,this.content_height=this.max_content_height,this.effective_zoom=this.max_content_height/this.client_height,a.debug("Content cannot scale all the way to the client height, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom)),this.max_zoom=Math.min(this.abs_max_zoom,this.max_content_height/this.client_height)):this.max_zoom=this.abs_max_zoom,this.content_width=this.content_height*this.orig_aspect,this.has_max_content_size&&(this.max_zoom=Math.min(this.max_zoom,this.max_content_width/(this.content_width/this.effective_zoom)),this.content_width>this.max_content_width&&(i=!0,this.content_width=this.max_content_width,this.content_height=this.content_width/this.orig_aspect,this.effective_zoom=this.content_height/this.client_height,a.debug("Content cannot scale all the way to the client width, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom))),this.effective_zoom<this.min_zoom&&!i&&(this.content_height=this.client_height*this.min_zoom,this.content_width=this.content_height*this.orig_aspect,this.effective_zoom=this.min_zoom,a.debug("Content cannot scale less than the min zoom, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom)),this.content_top=(this.client_height-this.content_height)/2,this.content_left=(this.client_width-this.content_width)/2):(this.content_width=this.client_width*this._desired_zoom,this.min_zoom=Math.max(this.abs_min_zoom,Math.min(1,this.client_height/(this.client_width/this.orig_aspect))),this.has_max_content_size?(this.content_width>this.max_content_width&&(i=!0,this.content_width=this.max_content_width,this.effective_zoom=this.max_content_width/this.client_width,a.debug("Content cannot scale all the way to the client width, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom)),this.max_zoom=Math.min(this.abs_max_zoom,this.max_content_width/this.client_width)):this.max_zoom=this.abs_max_zoom,this.content_height=this.content_width/this.orig_aspect,this.has_max_content_size&&(this.max_zoom=Math.min(this.max_zoom,this.max_content_height/(this.content_height/this.effective_zoom)),this.content_height>this.max_content_height&&(i=!0,this.content_height=this.max_content_height,this.content_width=this.content_height*this.orig_aspect,this.effective_zoom=this.content_width/this.client_width,a.debug("Content cannot scale all the way to the client height, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom))),this.effective_zoom<this.min_zoom&&!i&&(this.content_width=this.client_width*this.min_zoom,this.content_height=this.content_width/this.orig_aspect,this.effective_zoom=this.min_zoom,a.debug("Content cannot scale less than the client size, zooming to "+this.effective_zoom+" instead of "+this._desired_zoom)),this.content_left=(this.client_width-this.content_width)/2,this.content_top=(this.client_height-this.content_height)/2);else a.debug("original size: ",this.orig_width,this.orig_height),this.has_max_content_size?this.max_zoom=Math.min(this.abs_max_zoom,this.max_content_width/this.orig_width,this.max_content_height/this.orig_height):this.max_zoom=this.abs_max_zoom,this.content_height=this.orig_height*this._desired_zoom,this.content_width=this.orig_width*this._desired_zoom,this.has_max_content_size&&(this.content_height>this.max_content_height&&(i=!0,this.content_height=this.max_content_height,this.content_width=this.content_height*this.orig_aspect,this.effective_zoom=this.max_content_height/this.orig_height,a.debug("Content cannot scale all the way to the client height.")),this.content_width>this.max_content_width&&(i=!0,this.content_width=this.max_content_width,this.content_height=this.max_content_width/this.orig_aspect,this.effective_zoom=this.max_content_width/this.orig_width,a.debug("Content cannot scale all the way to the client width."))),e=this.orig_width<this.client_width?1:this.client_width/this.orig_width,n=this.orig_height<this.client_height?1:this.client_height/this.orig_height,this.min_zoom=Math.max(this.abs_min_zoom,Math.min(e,n)),a.debug("Zoom Test: ",e+", "+n+", "+this.effective_zoom+", "+this.min_zoom),this.effective_zoom<this.min_zoom&&!i&&(this.content_height=this.orig_height*this.min_zoom,this.content_width=this.orig_width*this.min_zoom,this.effective_zoom=this.min_zoom,a.debug("Content cannot scale less than the client size and/or the original size.")),this.content_left=(this.client_width-this.content_width)/2,this.content_top=(this.client_height-this.content_height)/2;a.debug("Zoom: ",this.effective_zoom,this.max_zoom,this.min_zoom),this.checkRTLScroll(t),this.last_zoom===this.effective_zoom&&this.last_zoom_max===this.max_zoom&&this.last_zoom_min===this.min_zoom||(this.last_zoom=this.effective_zoom,this.last_zoom_max=this.max_zoom,this.last_zoom_min=this.min_zoom,this.uiCallback&&this.uiCallback.zoomChanged(this.effective_zoom,this.max_zoom,this.min_zoom)),(this.content_top<0||this._align_top)&&(this.content_top=0),this.content_left<0&&(this.content_left=0);var r={top:Math.floor(this.content_top),left:Math.floor(this.content_left),width:Math.floor(this.content_width),height:Math.floor(this.content_height)},s={width:Math.floor(this.content_width),height:Math.floor(this.content_height)};this.contentContainer.css(r),this.sizeCallback&&this.sizeCallback.sizeContents(s)}},t.FIT_ACTUAL={width:!1,height:!1},t.FIT_WIDTH={width:!0,height:!1},t.FIT_HEIGHT={width:!1,height:!0},t.FIT_BEST={width:!0,height:!0},t}();e.ContentSizer=l},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/paper/dist/paper-full.js"),r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),s=n("../../../../home/node/node_modules/lil-uuid/uuid.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/nothing-tool.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/select-tool.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/pointer-tool.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/freehand-tool.js"),c=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/line-tool.js"),d=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/rectangle-tool.js"),f=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/ellipse-tool.js"),p=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/text-tool.js");e.getNewInstance=function(t,e){return new g(t,e)};var g=function(){function t(t,e){this.controller=t,this.paperscope=new i.PaperScope,this._canvas_scale=1.5;var n=Math.max(this.controller.defaultWidth,this.controller.defaultHeight)*this._canvas_scale;this._canvas_width=n,this._canvas_height=n,r.info("Canvas size is "+this._canvas_width+" by "+this._canvas_height),this.init(e)}return t.prototype.init=function(t){var e=this,n="";this.controller.opt.disableHiDPI&&(n=" hidpi='off'"),t.append(o("<canvas class='wb_canvas'"+n+"></canvas>")),t.append(o("<input class='wb_textinput' type='text' name='wb_textinput'"+(this.controller.opt.isRTL?" dir='rtl'":"")+" />")),this.wbCanvas=t.find(".wb_canvas"),this.wbCanvas.css({"background-color":"transparent",position:"absolute"}),this.textArea=t.find(".wb_textinput"),this.textArea.css({border:0,position:"absolute",display:"none",width:"200px",margin:"0px",padding:"0px"}),this.paperscope.setup(this.wbCanvas.get(0)),this.paperscope.activate(),this.paperscope.settings.hitTolerance=6,this.nothingTool=a.initTool(this.paperscope,this.controller,this),this.lineTool=c.initTool(this.paperscope,this.controller,this),this.ellipseTool=f.initTool(this.paperscope,this.controller,this),this.freeHandTool=u.initTool(this.paperscope,this.controller,this),this.freeHandTool.initOpt(this.controller.opt.smoothOptions),this.pointerTool=h.initTool(this.paperscope,this.controller,this),this.pointerTool.my_id=this.controller.getMyId(),this.rectangleTool=d.initTool(this.paperscope,this.controller,this),this.selectTool=l.initTool(this.paperscope,this.controller,this),this.selectTool.textArea=this.textArea,this.textTool=p.initTool(this.paperscope,this.controller,this),this.textTool.textArea=this.textArea,this.nothingTool.activate(),this.paperscope.view.viewSize=new this.paperscope.Size(this._canvas_width,this._canvas_height),this.wbCanvas.on("blur",(function(){e.selectTool.turnOff(!1)}))},t.prototype.setBackgroundSize=function(t){},t.prototype.size=function(t){this.textTool.accept(),this.selectTool.textAccept(),this._canvas_offset_y=(t.height-this._canvas_height)/2,this._canvas_offset_x=(t.width-this._canvas_width)/2,this._canvas_zoom=t.width/this._canvas_width;var e={top:Math.floor(this._canvas_offset_y),left:Math.floor(this._canvas_offset_x)};this.wbCanvas.css(e),this.paperscope.view.zoom=this._canvas_zoom,this.paperscope.view.update()},t.prototype.setTool=function(t,e,n){var i=!1;if(t)switch(r.debug("setTool - tool:",e,"mode:",n),e){case"draw":this.pointerTool.turnOff(),this.selectTool.turnOff(),i=this.setDrawMode(n);break;case"pointer":this.selectTool.turnOff(),this.pointerTool.activate(),this.controller.opt.touchDuringPointer&&(i=!0);break;case"select":this.pointerTool.turnOff(),this.selectTool.activate(),this.controller.opt.touchDuringSelect&&(i=!0);break;case"none":this.pointerTool.turnOff(),this.selectTool.turnOff(),this.nothingTool.activate(),i=!0;break;default:r.warn("Unknown Tool Selected - tool:",e,"mode:",n),this.pointerTool.turnOff(),this.selectTool.turnOff(),this.nothingTool.activate(),i=!0}else this.pointerTool.turnOff(),this.selectTool.turnOff(),this.nothingTool.activate();return i},t.prototype.setDrawMode=function(t){switch(t){case"pencil":this.freeHandTool.activate();break;case"rectangle":this.rectangleTool.activate();break;case"ellipse":this.ellipseTool.activate();break;case"line":this.lineTool.activate();break;case"text":this.textTool.activate();break;default:return this.nothingTool.activate(),!0}return!1},t.prototype.resetPointer=function(){this.pointerTool.reset()},Object.defineProperty(t.prototype,"eventObject",{get:function(){return this.wbCanvas},enumerable:!0,configurable:!0}),t.prototype.processUpdate=function(t){switch(t.action){case"update":case"update_pointer":case"draw":case"draw_pointer":var e=!1,n=this.paperscope.project.getItem({data:{id:t.data_id}});n?(this.selectTool.isItemSelected(n)&&(e=!0,this.selectTool.turnOff()),n.remove()):"update"===t.action&&r.warn("processUpdate:","Could not find item to update for: ",t.data_id),this.createPaperObj(t.type,t.item,e);break;case"remove":case"remove_pointer":var i=this.paperscope.project.getItem({data:{id:t.data_id}});i?(this.selectTool.isItemSelected(i)&&this.selectTool.turnOff(),i.remove()):r.warn("Could not find match to remove for:",t.data_id,t)}},t.prototype.createPaperObj=function(t,e,n){switch(t){case"Path":var i=new this.paperscope.Path;i.importJSON(e),n&&i.data.modifiedBy===this.controller.getMyId()&&this.selectTool.setSelection(i);break;case"Shape":var s=new this.paperscope.Shape;s.importJSON(e),n&&s.data.modifiedBy===this.controller.getMyId()&&this.selectTool.setSelection(s);break;case"PointText":var o=new this.paperscope.PointText;o.importJSON(e),n&&o.data.modifiedBy===this.controller.getMyId()&&this.selectTool.setSelection(o);break;default:r.warn("Unknown draw type: ",t)}},t.prototype.clear=function(){this.paperscope.project.clear()},t.prototype.redraw=function(){this.paperscope.view.update()},t.prototype.sendNewItem=function(t){this.initItemId(t);var e={type:t.className,data_id:t.data.id,action:"draw",item:t.exportJSON({asString:!1})};this.controller.send("draw",e,t.data.id)},t.prototype.sendItemUpdate=function(t,e){if(void 0===e&&(e=null),e&&e.data.id&&(t.data.id=e.data.id),t.data.id){t.data.modifiedBy=this.controller.getMyId();var n={type:t.className,data_id:t.data.id,action:"update",item:t.exportJSON({asString:!1})};this.controller.send("update",n,t.data.id)}else this.sendNewItem(t)},t.prototype.sendItemRemove=function(t){var e={type:t.className,data_id:t.data.id,action:"remove",item:t.exportJSON({asString:!1})};this.controller.send("remove",e,t.data.id)},t.prototype.sendNewPointer=function(t){var e={type:t.className,data_id:t.data.id,action:"draw_pointer",item:t.exportJSON({asString:!1})};this.controller.send("draw_pointer",e,t.data.id)},t.prototype.sendPointerUpdate=function(t){var e={type:t.className,data_id:t.data.id,action:"update_pointer",item:t.exportJSON({asString:!1})};this.controller.send("update_pointer",e,t.data.id)},t.prototype.sendPointerRemove=function(t){var e={type:t.className,data_id:t.data.id,action:"remove_pointer",item:t.exportJSON({asString:!1})};this.controller.send("remove_pointer",e,t.data.id)},t.prototype.initItemId=function(t){t.data.id||(t.data.id=s.uuid(),r.info("generated new item id:",t.data.id)),t.data.modifiedBy=this.controller.getMyId()},t.prototype.focusCanvas=function(){this.wbCanvas.focus()},Object.defineProperty(t.prototype,"canvas_scale",{get:function(){return this._canvas_scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._canvas_width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._canvas_height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wbCanvas_based_maxright",{get:function(){return this.wbCanvas.width()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas_offset_x",{get:function(){return this._canvas_offset_x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas_offset_y",{get:function(){return this._canvas_offset_y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas_zoom",{get:function(){return this._canvas_zoom},enumerable:!0,configurable:!0}),t}();e.PaperLayer=g},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js"),s=function(){function t(t,e,n){this.paperscope=null,this.tool=null,this.isDown=!1,this.paperscope=t,this.controller=e,this.drawController=n,this.tool=new this.paperscope.Tool,this.setupEvents(["mousedown","mousedrag","mouseup"])}return t.prototype.activate=function(){this.tool.activate()},t.prototype.setupEvents=function(t){var e=this;t||(t=[]),t.indexOf("mousedown")>-1?this.tool.onMouseDown=i.bind((function(t){e.isDown=!1,r.buttonAllowed(t)&&(e.isDown=!0,e.onMouseDown(t))}),this):this.tool.onMouseDown=null,t.indexOf("mousedrag")>-1?this.tool.onMouseDrag=i.bind((function(t){r.buttonAllowed(t)&&e.isDown&&e.onMouseDrag(t)}),this):this.tool.onMouseDrag=null,t.indexOf("mouseup")>-1?this.tool.onMouseUp=i.bind((function(t){r.buttonAllowed(t)&&e.isDown&&(e.isDown=!1,e.onMouseUp(t))}),this):this.tool.onMouseUp=null,t.indexOf("mousemove")>-1?this.tool.onMouseMove=i.bind((function(t){e.onMouseMove(t)}),this):this.tool.onMouseMove=null},t.prototype.onMouseDown=function(t){},t.prototype.onMouseDrag=function(t){},t.prototype.onMouseUp=function(t){},t.prototype.onMouseMove=function(t){},t}();e.BaseTool=s,e.initTool=function(t,e,n){return new s(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/bdi-util.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});e.add_rle=function(t){return"‫"+t+"‬"},e.add_lre=function(t){return"‪"+t+"‬"}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/ellipse-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.drawPath=null,e}return r(e,t),e.prototype.onMouseDown=function(t){this.startPoint=t.point,this.drawPath=null,this.tool.minDistance=10},e.prototype.onMouseDrag=function(t){this.setFromPoints(this.startPoint,t.point,t.modifiers.shift),this.tool.minDistance=0},e.prototype.onMouseUp=function(t){this.drawPath&&(this.setFromPoints(this.startPoint,t.point,t.modifiers.shift),this.drawController.sendNewItem(this.drawPath))},e.prototype.setFromPoints=function(t,e,n){if(this.drawPath&&this.drawPath.remove(),n){var i=Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2)),r=new this.paperscope.Rectangle(t.x-i,t.y-i,2*i,2*i);this.drawPath=new this.paperscope.Path.Ellipse(r)}else{var s=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),a=new this.paperscope.Rectangle(t.x-s,t.y-o,2*s,2*o);this.drawPath=new this.paperscope.Path.Ellipse(a)}this.drawPath.strokeColor=this.controller.strokeColor,this.drawPath.strokeWidth=this.controller.strokeWidth*this.drawController.canvas_scale},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new s(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/freehand-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/lodash/lodash.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opt=null,e.simplifyWorker=null,e.workerInit=!1,e.drawPath=null,e}return r(e,t),e.prototype.initOpt=function(t){var e=this;if(this.opt=s.defaults(t,{type:"simplify",factor:.5,minDistance:2,tolerance:10,useWorker:!1}),o.debug("FreeHandTool.initOpt",this.opt),this.opt.minDistance&&(this.tool.minDistance=this.opt.minDistance),"simplify"===this.opt.type&&this.opt.useWorker&&window.Worker){this.workerInit=!1,o.debug("FreeHandTool - setting up Worker from: ",this.opt.workerPath);try{this.simplifyWorker=new Worker(this.opt.workerPath)}catch(t){return void o.error("Error creating Worker:",t)}var n=this.drawController;this.simplifyWorker.onmessage=function(t){if(t.data)switch(t.data.msg){case"init_done":o.debug("Simplify worker init complete, will use worker for simplify."),e.workerInit=!0;break;case"simplify_done":var i=t.data.path,r=t.data.id,s=e.paperscope.project.getItem({data:{id:r}});if(o.debug("Simplify results returned from worker.",r),s){var a=s.segments.length,l=s.data.sent;s.importJSON(i),o.debug("Path segment simplified from:",a,"to:",s.segments.length,"in",(new Date).getTime()-t.data.start_time,"ms"),l?(o.debug("This item was already sent, so sending as an update.",r),n.sendItemUpdate(s)):(o.debug("This item had not already sent, so sending as a new item.",r),n.sendNewItem(s)),s.data.sent=!0}else o.debug("Couldn't find a path for this id, perhaps it was already deleted?",r);break;default:o.warn("Unknown event msg in simplify-worker return message: ",t.data.msg)}else o.warn("Empty event data in simplify-worker return message: ",t)}}else this.simplifyWorker=null},e.prototype.onMouseDown=function(t){this.drawPath=new this.paperscope.Path,this.drawPath.add(t.point),this.drawPath.strokeColor=this.controller.strokeColor,this.drawPath.strokeWidth=this.controller.strokeWidth*this.drawController.canvas_scale},e.prototype.onMouseDrag=function(t){this.drawPath.add(t.point)},e.prototype.onMouseUp=function(t){var e=this;this.drawPath.lastSegment.point=t.point,this.drawController.sendNewItem(this.drawPath),o.debug("FreeHandTool.onMouseUp");var n=(new Date).getTime();if("simplify"===this.opt.type&&this.workerInit){this.drawController.initItemId(this.drawPath);var i=this.drawPath.data.id,r=this.drawController;setTimeout((function(){var t=e.paperscope.project.getItem({data:{id:i}});t?t.data.sent?o.debug("Item was already sent, nothing to do.",i):(o.debug("Item was not already sent, and worker results have not returned, sending it now.",i),r.sendNewItem(t),t.data.sent=!0):o.debug("Item could not be found, was it already deleted?",i)}),500);var s={msg:"simplify",path:this.drawPath.exportJSON(),tolerance:this.opt.tolerance,id:this.drawPath.data.id,start_time:n,wait:this.opt.wait};o.debug("Posting message to simplify worker: ",s),this.simplifyWorker.postMessage(s)}else if("simplify"===this.opt.type){var a=this.drawPath.segments.length;this.drawPath.simplify(this.opt.tolerance),o.debug("Path segment simplified from:",a,"to:",this.drawPath.segments.length,"in",(new Date).getTime()-n,"ms"),this.drawController.sendNewItem(this.drawPath)}else this.drawPath.smooth({type:this.opt.type,factor:this.opt.factor}),o.debug("Smooth processing time (ms): ",(new Date).getTime()-n),this.drawController.sendNewItem(this.drawPath)},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new a(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/line-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.drawPath=null,e}return r(e,t),e.prototype.onMouseDown=function(t){this.startPoint=t.point,this.drawPath=null,this.tool.minDistance=10},e.prototype.onMouseDrag=function(t){this.drawPath?this.drawPath.lastSegment.point=t.point:(this.drawPath=new this.paperscope.Path.Line(this.startPoint,t.point),this.drawPath.strokeColor=this.controller.strokeColor,this.drawPath.strokeWidth=this.controller.strokeWidth*this.drawController.canvas_scale,this.tool.minDistance=0)},e.prototype.onMouseUp=function(t){this.drawPath.lastSegment.point=t.point,this.drawController.sendNewItem(this.drawPath)},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new s(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/nothing-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.setupEvents([]),r}return r(e,t),e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.NothingTool=s,e.initTool=function(t,e,n){return new s(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/pointer-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/lodash/lodash.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js"),l=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.latest_point=null,r.my_path=null,r.sendUpdate=null,r.setupEvents(["mousemove"]),r}return r(e,t),e.prototype.onMouseMove=function(t){this.my_id!==this.controller.getMyId()&&(this.my_path&&this.turnOff(),this.my_id=this.controller.getMyId()),this.my_path?(this.latest_point=t.point,this.sendUpdate()):(this.my_path=new this.paperscope.Path(a.hand_icon),this.my_path.strokeColor="black",this.my_path.fillColor="white",this.my_path.data.id="pointer_"+this.my_id,this.latest_point=t.point,this.drawController.sendNewPointer(this.my_path),this.sendUpdate||(this.sendUpdate=s.throttle(o.proxy(this.sendUpdate_impl,this),150)))},e.prototype.sendUpdate_impl=function(){this.my_path.position=this.latest_point,this.drawController.sendPointerUpdate(this.my_path),this.paperscope.view.update()},e.prototype.reset=function(){this.my_path&&this.my_path.remove(),this.my_path=null,this.latest_point=null},e.prototype.turnOff=function(){this.my_path&&(this.drawController.sendPointerRemove(this.my_path),this.reset())},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new l(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/rectangle-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.drawPath=null,e}return r(e,t),e.prototype.onMouseDown=function(t){this.startPoint=t.point,this.drawPath=null,this.tool.minDistance=10},e.prototype.onMouseDrag=function(t){this.setFromPoints(this.startPoint,t.point,t.modifiers.shift),this.tool.minDistance=0},e.prototype.onMouseUp=function(t){this.drawPath&&(this.setFromPoints(this.startPoint,t.point,t.modifiers.shift),this.drawController.sendNewItem(this.drawPath))},e.prototype.setFromPoints=function(t,e,n){if(this.drawPath&&this.drawPath.remove(),n){var i=Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y)),r=function(t){return 0===t?0:t<0?-1:1},s=new this.paperscope.Point(t.x+r(e.x-t.x)*i,t.y+r(e.y-t.y)*i);this.drawPath=new this.paperscope.Path.Rectangle(t,s)}else this.drawPath=new this.paperscope.Path.Rectangle(t,e);this.drawPath.strokeColor=this.controller.strokeColor,this.drawPath.strokeWidth=this.controller.strokeWidth*this.drawController.canvas_scale},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new s(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/select-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/lodash/lodash.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/bdi-util.js"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedItem=null,e.selectionRect=null,e.modified=!1,e.lastRotatePoint=null,e.lastScalePoint=null,e.hit_item=null,e.textArea=null,e.isEditing=!1,e.editTextItem=null,e._selectStrokeWidth=3,e._selectStrokeColor="#00A0EC",e}return r(e,t),e.prototype.setSelection=function(t){if(t){if(t!==this.selectionRect){var e;this.turnOff(!1),this.selectedItem=t,0===this.selectedItem.rotation&&1===this.selectedItem.scaling.x&&1===this.selectedItem.scaling.y?(e=this.selectedItem.bounds,this.selectedItem.data.initialBounds=this.selectedItem.bounds.clone()):e=this.selectedItem.data.initialBounds;var n=e.clone();this.selectionRect=new this.paperscope.Path.Rectangle(n),this.selectionRect.bringToFront(),this.selectionRect.insert(3,new this.paperscope.Point(n.right,n.top+(n.bottom-n.top)/4)),this.selectionRect.position=this.selectedItem.position,this.selectionRect.rotation=this.selectedItem.rotation,this.selectionRect.scaling=this.selectedItem.scaling,this.selectionRect.strokeWidth=this._selectStrokeWidth*this.drawController.canvas_scale,this.selectionRect.strokeColor=this._selectStrokeColor,this.selectionRect.data.selectionRect=!0,this.selectionRect.selected=!0,"PointText"===this.selectedItem.className&&(this.selectedItem.onDoubleClick=o.proxy(this.triggerEdit,this)),this.drawController.focusCanvas(),this.tool.on("keydown",o.proxy(this.onSelectKeyDown,this)),this.modified=!1,this.controller.opt.touchDuringSelect&&this.controller.contentSizer.enableTouchEvents(!1)}}else this.turnOff(!1)},e.prototype.isItemSelected=function(t){return t===this.selectedItem||t===this.editTextItem},e.prototype.triggerEdit=function(t){if(t.target===this.selectedItem&&"PointText"===this.selectedItem.className){this.editTextItem=this.selectedItem,this.setSelection(null);var e=a.parseUnit(this.editTextItem.fontSize);e[0]=e[0]*this.editTextItem.scaling.x,e[0]=e[0]*this.drawController.canvas_zoom;var n=e.join(""),i="rotate("+this.editTextItem.rotation+"deg)";this.textArea.css({"font-family":this.editTextItem.fontFamily,"font-size":n,"font-weight":this.editTextItem.fontWeight,"text-align":"center",height:"auto",color:this.editTextItem.fillColor.toCSS(!0),"-webkit-transform":i,"-moz-transform":i,"-o-transform":i,"-ms-transform":i}),this.tool.off("keydown"),this.textArea.keydown(o.proxy(this.textOnKeyDown,this)),this.textArea.keyup(o.proxy(this.textOnKeyUp,this)),this.textArea.focusout(o.proxy(this.textOnFocusOut,this)),void 0===this.editTextItem.data.text&&(this.editTextItem.data.text=this.editTextItem.content),this.textArea.attr("dir",this.editTextItem.data.dir),this.textArea.attr("aria-label",this.controller.opt.inputLabelEdit),this.textArea.val(this.editTextItem.data.text),this.positionTextBox(),this.textArea.show(),this.textArea.focus(),this.isEditing=!0}},e.prototype.positionTextBox=function(){var t=this,e=this.editTextItem.data.initialBounds;e||(e=this.editTextItem.bounds),e=e.scale(this.editTextItem.scaling.x,this.editTextItem.scaling.y);this.paperscope.view.projectToView(e.topLeft),this.paperscope.view.projectToView(e.bottomRight);var n=this.paperscope.view.projectToView(e.center),i="  "+this.textArea.val()+"  ",r=this.controller.measureText(this.textArea.get(0),i),s=n.x+this.drawController.canvas_offset_x-r/2;this.textArea.css({top:n.y+this.drawController.canvas_offset_y-this.textArea.height()/2,left:s,width:r}),setTimeout((function(){t.textArea.css({top:n.y+t.drawController.canvas_offset_y-t.textArea.height()/2})}),250)},e.prototype.textAccept=function(){if(this.isEditing){this.isEditing=!1;var t=this.textArea.val(),e=t;if(0===t.length)this.deleteItem(this.editTextItem);else if(t!==this.editTextItem.data.text){"rtl"===this.editTextItem.data.dir?e=l.add_rle(t):"ltr"===this.editTextItem.data.dir&&(e=l.add_lre(t));var n=new this.paperscope.PointText({content:e,data:{text:t,dir:this.editTextItem.data.dir},fillColor:this.editTextItem.fillColor,fontFamily:this.editTextItem.fontFamily,fontWeight:this.editTextItem.fontWeight,fontSize:this.editTextItem.fontSize});n.position=this.editTextItem.position,n.data.initialBounds=n.bounds.clone(),n.scaling=this.editTextItem.scaling,n.rotation=this.editTextItem.rotation,this.drawController.sendItemUpdate(n,this.editTextItem),this.editTextItem.remove(),this.editTextItem=null,this.setSelection(n)}t.length>0&&this.editTextItem&&this.setSelection(this.editTextItem),this.textArea.hide(),this.tool.on("keydown",this.onSelectKeyDown),this.paperscope.view.update(),this.controller.contentSizer.resetInnerScroll()}},e.prototype.textCancel=function(){this.isEditing=!1,this.textArea.hide(),this.setSelection(this.editTextItem),this.tool.on("keydown",this.onSelectKeyDown),this.controller.contentSizer.resetInnerScroll()},e.prototype.textOnKeyDown=function(t){if(this.isEditing)return 13===t.keyCode?(this.textAccept(),void t.preventDefault()):27===t.keyCode?(this.textCancel(),void t.preventDefault()):void 0},e.prototype.textOnKeyUp=function(){this.isEditing&&this.positionTextBox()},e.prototype.textOnFocusOut=function(t){this.textAccept()},e.prototype.turnOff=function(t){void 0===t&&(t=!0),this.isEditing&&t&&this.textCancel(),this.selectedItem=null,this.modified=!1,this.selectionRect&&(this.selectionRect.remove(),this.selectionRect=null,this.paperscope.view.update()),this.tool.off("keydown"),this.controller.opt.touchDuringSelect&&this.controller.contentSizer.enableTouchEvents(!0)},e.prototype.onMouseDown=function(t){this.hit_item=null,this.lastRotatePoint=null,this.lastScalePoint=null;var e=this.paperscope.project.hitTest(t.point);if(e&&e.item){if(e.item!==this.selectionRect&&e.item!==this.selectedItem)return this.setSelection(e.item),void(this.hit_item=e.item);if(e.item!==this.selectedItem)return e.item===this.selectionRect?(this.hit_item=this.selectedItem,void("segment"===e.type&&(3===e.segment.index?this.lastRotatePoint=t.point:this.lastScalePoint=t.point))):void 0;this.hit_item=this.selectedItem}else this.turnOff(!1)},e.prototype.onMouseDrag=function(t){if(null!=this.lastScalePoint){var e=this.lastScalePoint.subtract(this.selectionRect.bounds.center).length,n=t.point.subtract(this.selectionRect.bounds.center).length/e;this.selectionRect.scale(n),this.selectedItem.scale(n),this.lastScalePoint=t.point,this.modified=!0}else if(null!=this.lastRotatePoint){var i=this.lastRotatePoint.subtract(this.selectionRect.bounds.center).angle,r=t.point.subtract(this.selectionRect.bounds.center).angle-i;this.selectionRect.rotate(r),this.selectedItem.rotate(r),this.lastRotatePoint=t.point,this.modified=!0}else this.hit_item&&this.selectedItem&&(this.selectedItem.position=this.selectedItem.position.add(t.delta),this.selectionRect.position=this.selectionRect.position.add(t.delta),this.selectedItem.data.initialBounds.center=this.selectedItem.data.initialBounds.center.add(t.delta),this.modified=!0)},e.prototype.onMouseUp=function(t){this.selectedItem&&this.modified&&this.drawController.sendItemUpdate(this.selectedItem),this.modified=!1,this.setSelection(this.selectedItem)},e.prototype.onSelectKeyDown=function(t){this.isEditing||!this.selectedItem||this.isTextField(t.event)||"backspace"!==t.key&&"delete"!==t.key||(t.event.preventDefault(),this.deleteItem(this.selectedItem))},e.prototype.deleteItem=function(t){t&&(this.drawController.sendItemRemove(t),t.remove(),this.turnOff(!1))},e.prototype.isTextField=function(t){return 0===s.get(t,"target.type","").indexOf("text")},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new h(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/text-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/bdi-util.js"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.insertPoint=null,e.viewPoint=null,e.textArea=null,e.isEditing=!1,e.minWidth=100,e.fontSize="",e}return r(e,t),e.prototype.textOnKeyDown=function(t){return 13===t.keyCode?(this.accept(),void t.preventDefault()):27===t.keyCode?(this.cancel(),void t.preventDefault()):void 0},e.prototype.textOnKeyUp=function(t){this.positionTextBox()},e.prototype.textOnFocusOut=function(t){this.accept()},e.prototype.positionTextBox=function(){var t="  "+this.textArea.val()+"  ",e=this.controller.measureText(this.textArea.get(0),t),n=this.viewPoint.x+this.drawController.canvas_offset_x-e,i=(this.viewPoint.x+this.drawController.canvas_offset_x+e)/this.drawController.canvas_zoom,r=this.drawController.wbCanvas_based_maxright;this.controller.opt.isRTL?this.textArea.css({left:n,width:e}):i<=r&&this.textArea.css({width:e})},e.prototype.onMouseDown=function(t){if(o.buttonAllowed(t)){this.isEditing&&this.accept(),this.insertPoint=t.point,this.viewPoint=this.paperscope.view.projectToView(t.point);var e=o.parseUnit(this.controller.fontSize);e[0]=e[0]*this.drawController.canvas_scale,this.fontSize=e.join(""),e[0]=e[0]*this.drawController.canvas_zoom;var n=e.join(""),i="rotate(0deg)";this.textArea.css({top:this.viewPoint.y+this.drawController.canvas_offset_y-this.textArea.height()/2,left:this.viewPoint.x+this.drawController.canvas_offset_x-5,width:"200px",height:"auto","font-family":this.controller.fontFamily,"font-size":n,"font-weight":this.controller.fontWeight,color:this.controller.strokeColor,"-webkit-transform":i,"-moz-transform":i,"-o-transform":i,"-ms-transform":i}),this.controller.opt.isRTL?this.textArea.css({"text-align":"right"}):this.textArea.css({"text-align":"left","padding-left":"5px"}),this.textArea.keyup(s.proxy(this.textOnKeyUp,this)),this.textArea.keydown(s.proxy(this.textOnKeyDown,this)),this.textArea.focusout(s.proxy(this.textOnFocusOut,this)),this.textArea.attr("dir",this.controller.opt.isRTL?"rtl":"ltr"),this.textArea.attr("aria-label",this.controller.opt.inputLabelNew),this.textArea.val(""),this.positionTextBox(),this.textArea.show(),this.textArea.focus(),this.isEditing=!0}},e.prototype.accept=function(){if(this.isEditing){this.isEditing=!1;var t=this.textArea.val(),e=t;if(t.length>0){e=this.controller.opt.isRTL?a.add_rle(t):a.add_lre(t);var n=this.insertPoint.x,i=this.insertPoint.y+7;if(this.controller.opt.isRTL){var r=this.controller.measureText(this.textArea.get(0),e);n=this.insertPoint.x-r/this.drawController.canvas_zoom}var s=new this.paperscope.PointText({point:[n,i],content:e,data:{text:t,dir:this.controller.opt.isRTL?"rtl":"ltr"},fillColor:this.controller.strokeColor,fontFamily:this.controller.fontFamily,fontWeight:this.controller.fontWeight,fontSize:this.fontSize});this.drawController.sendNewItem(s)}this.textArea.hide(),this.paperscope.view.update(),this.controller.contentSizer.resetInnerScroll()}},e.prototype.cancel=function(){this.isEditing=!1,this.textArea.hide(),this.controller.contentSizer.resetInnerScroll()},e}(n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/base-tool.js").BaseTool);e.initTool=function(t,e,n){return new l(t,e,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),r=n("../../../../home/node/node_modules/lodash/lodash.js"),s=n("../../../../home/node/node_modules/svg.js/dist/svg.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/tools.js");n("../../../../home/node/node_modules/svg.path.js/svg.path.js"),n("../../../../home/node/node_modules/svg.resize.js/dist/svg.resize.js"),n("../../../../home/node/node_modules/svg.select.js/dist/svg.select.js"),n("../../../../home/node/node_modules/svg.draggable.js/dist/svg.draggable.js");var l={"background-color":"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%","touch-action":"none"};e.getNewInstance=function(t,e){return new h(t,e)};var h=function(){function t(t,e){this.controller=t,e.append(o("<div class='svg_layer' tabindex=0></div>")),this.svgDiv=e.find(".svg_layer"),this.svgDiv.css(l),this.disableAria(),this.svgDraw=s(this.svgDiv[0]),this.svgDraw.size("100%","100%"),this.svgDraw.id("wb-svg-main"),o(this.svgDraw.native()).css({"touch-action":"none"}),this.tools=a.initTools(this.svgDraw,this.controller,this),this.tools.text.initTool(this.svgDiv),this.tools.select.initTool(this.svgDiv,this.tools.text)}return Object.defineProperty(t.prototype,"cursor",{get:function(){return this.svgDiv.css("cursor")},set:function(t){this.svgDiv.css("cursor",t)},enumerable:!0,configurable:!0}),t.prototype.disableAria=function(){return this.svgDiv.attr("aria-hidden","true")},t.prototype.setBackgroundSize=function(t){this.backgroundSize=t,this.svgDraw.viewbox(0,0,t.width,t.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this.backgroundSize.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.backgroundSize.height},enumerable:!0,configurable:!0}),t.prototype.size=function(){this.tools.text.completeEdit(),this.tools.select.onSize()},t.prototype.setTool=function(t,e,n){i.debug("setTool","|tool:"+e+"|mode:"+n+"|enabled:"+t+"|");var s=r.get(this.tools,"draw"===e?n:e,null),o=t?s:null;return this.currTool&&o!==this.currTool&&this.currTool.deactivate(),o&&o!==this.currTool&&o.activate(),this.currTool=o,this.areTouchEventsActiveForTool(e)},t.prototype.resetPointer=function(){this.tools.pointer.reset()},Object.defineProperty(t.prototype,"eventObject",{get:function(){return this.svgDiv},enumerable:!0,configurable:!0}),t.prototype.processUpdate=function(t){var e=s.get(t.id);if(this.tools.pointer.isPointerAction(t))return this.tools.pointer.processPointerUpdate(t);r.isNull(e)||e.remove(),this.isRemoveAction(t.action)||this.svgDraw.svg(t.svg),!r.isNull(e)&&this.currTool&&this.currTool.onUpdate(t.id)},t.prototype.clear=function(){this.svgDraw.clear()},t.prototype.sendItem=function(t,e){void 0===e&&(e="draw");var n=t.attr("id"),r=t.type,s=t.svg(),o=this.controller.getMyId();t.data("modifiedBy",this.controller.getMyId()),i.info("sendItem|"+e+"|"+n+"|"+r),this.controller.send(e,{layer:"svg",type:r,id:n,action:e,svg:s,uid:o},n)},t.prototype.sendPointerUpdate=function(t,e){var n=this.controller.getMyId();i.info("sendPointerUpdate|"+e+"|"+t.x+","+t.y),this.controller.send(e,{layer:"svg",point:t,action:e,uid:n},n)},t.prototype.deleteItem=function(t,e){void 0===e&&(e="remove"),this.sendItem(t,e),t.remove()},t.prototype.redraw=function(){},t.prototype.focusCanvas=function(){this.svgDiv.focus()},t.prototype.areTouchEventsActiveForTool=function(t){return"draw"!==t&&(!("pointer"!==t||!this.controller.opt.touchDuringPointer)||!("select"!==t||!this.controller.opt.touchDuringSelect))},t.prototype.isRemoveAction=function(t){return"remove"===t},t}();e.SvgLayer=h},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/base-draw.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../../../home/node/node_modules/lodash/lodash.js"),s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/event-helpers.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/svg-helpers.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),l=n("../../../../home/node/node_modules/lil-uuid/uuid.js"),h=function(){function t(t,e,n){this.svgDraw=t,this.wbController=e,this.drawController=n,this.activeDrawing={},this.minDistance=10}return t.prototype.activate=function(){var t=this.svgDraw;t.on("mousedown",this.onDown,this),t.on("touchstart",this.onDown,this,s.notpassive),t.on("mousemove",this.onMove,this),t.on("touchmove",this.onMove,this,s.notpassive),document.addEventListener("mouseup",this.onEnd.bind(this)),document.addEventListener("touchend",this.onEnd.bind(this)),document.addEventListener("touchcancel",this.onEnd.bind(this))},t.prototype.deactivate=function(){this.svgDraw.off(),document.removeEventListener("mouseup",this.onEnd),document.removeEventListener("touchend",this.onEnd),document.removeEventListener("touchcancel",this.onEnd)},t.prototype.onUpdate=function(t){},t.prototype.onDown=function(t){if(s.isInvalidMouse(t))return!0;if(s.isInvalidTouch(t))return this.onEnd(t);var e=o.svgPointForEvent(s.eventXY(t),this.svgDraw.native());return this.activeDrawing=this.initDrawing(e.x,e.y,t.shiftKey),s.acceptEvent(t)},t.prototype.onMove=function(t){if(!this.hasDrawingStarted()||s.isInvalidMouse(t))return!0;var e=o.svgPointForEvent(s.eventXY(t),this.svgDraw.native());return this.updateDrawing(e.x,e.y,t.shiftKey),this.updateDrawCoords(),s.acceptEvent(t)},t.prototype.onEnd=function(t){return!this.hasDrawingStarted()||(this.completeDrawing(),s.acceptEvent(t))},t.prototype.updateDrawCoords=function(){var t=r.isNil(this.activeDrawing.element);if(this.hasValidDistance()){var e=this.drawElement(this.activeDrawing);t&&(e.id(this.activeDrawing.id),e.data("createdby",this.wbController.getMyId()),this.applyStyles(e)),e.data("modifiedby",this.wbController.getMyId()),this.setDrawingElement(e)}},t.prototype.drawElement=function(t){return t.element},t.prototype.hasValidDistance=function(){var t=Math.pow(this.activeDrawing.lastX-this.activeDrawing.startX,2),e=Math.pow(this.activeDrawing.lastY-this.activeDrawing.startY,2),n=Math.sqrt(t+e);return!this.minDistance||0===this.minDistance||n>=this.minDistance},t.prototype.hasDrawingStarted=function(){return!r.isNil(this.activeDrawing.startX)&&!r.isNil(this.activeDrawing.startY)},t.prototype.completeDrawing=function(){this.finalizeDrawing(),this.updateDrawCoords(),r.isNil(this.activeDrawing.element)||(a.debug("completeDrawing",this.activeDrawing),this.drawController.sendItem(this.activeDrawing.element)),this.activeDrawing={}},t.prototype.initDrawing=function(t,e,n){return void 0===n&&(n=!1),{startX:t,startY:e,shiftKey:n,element:null,id:l.uuid()}},t.prototype.finalizeDrawing=function(){this.activeDrawing=i({},this.activeDrawing,{final:!0})},t.prototype.setDrawingElement=function(t){this.activeDrawing=i({},this.activeDrawing,{element:t})},t.prototype.updateDrawing=function(t,e,n){void 0===n&&(n=!1),this.activeDrawing=i({},this.activeDrawing,{lastX:t,lastY:e,shiftKey:n})},t.prototype.applyStyles=function(t){var e=this.wbController.strokeColor,n=this.wbController.strokeWidth;t.stroke({color:e,width:n}).fill("none")},t}();e.BaseDraw=h},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/ellipse-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/base-draw.js"),o=n("../../../../home/node/node_modules/lodash/lodash.js"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minSize=2,e.minDistance=10,e}return r(e,t),e.prototype.drawElement=function(t){var e,n,i=o.isNil(t.element)?this.svgDraw.ellipse().center(t.startX,t.startY):t.element;if(t.shiftKey){var r=Math.pow(Math.abs(t.startX-t.lastX),2),s=Math.pow(Math.abs(t.startY-t.lastY),2);e=n=Math.sqrt(r+s)}else e=Math.abs(t.startX-t.lastX),n=Math.abs(t.startY-t.lastY);return e=Math.max(e,this.minSize),n=Math.max(n,this.minSize),i.attr({rx:e,ry:n}),i},e}(s.BaseDraw);e.EllipseTool=a},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/event-helpers.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("../../../../home/node/node_modules/lodash/lodash.js");e.accept=function(t,n){return e.acceptEvent(n)},e.passthroughEvent=function(t){return!0},e.acceptEvent=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1},e.isMainButton=function(t){return void 0!==t.buttons?1===t.buttons:void 0!==t.which?1===t.which:0===t.button},e.eventXY=function(t){var e=t.touches&&t.touches.length>0?t.touches[0]:t;return{x:e.clientX,y:e.clientY}},e.isMultiTouch=function(t){return!r.isNil(t.touches)&&t.touches.length>1};e.resetAndCallback=function(t){clearTimeout(i),i=null,t&&t()},e.detectSingleOrDoubleTap=function(t,n){i?e.resetAndCallback(n):i=setTimeout((function(){return e.resetAndCallback(t)}),400)},e.passive={passive:!0},e.notpassive={passive:!1},e.isInvalidTouch=function(t){return t.type.startsWith("touch")&&e.isMultiTouch(t)},e.isInvalidMouse=function(t){return t.type.startsWith("mouse")&&!e.isMainButton(t)},e.eventTargetId=function(t){var e=t.target,n=(void 0===e?{}:e).id;return void 0===n?null:n}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/freehand-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/base-draw.js"),a=n("../../../../home/node/node_modules/lodash/lodash.js"),l=n("../../../../home/node/node_modules/fit-curve/lib/fit-curve.js"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MIN_SIMPLIFY=2,e.SIMPLIFY_POINTS=100,e.ERROR_TOLERANCE=.2,e.minDistance=2,e}return r(e,t),e.prototype.newPath=function(t){this.points=[[t.startX,t.startY],[t.lastX,t.lastY]],this.lastSimplify=0;var e=this.svgDraw.path();return e.M({x:t.startX,y:t.startY}),e.L({x:t.lastX,y:t.lastY}),e},e.prototype.updatePath=function(t){if(!this.validDistanceFromLast(t))return t.element;var e=t.element;return this.points.push([t.lastX,t.lastY]),e.L({x:t.lastX,y:t.lastY}),this.storeLastXY(t),e},e.prototype.storeLastXY=function(t){this.lastX=t.lastX,this.lastY=t.lastY},e.prototype.validDistanceFromLast=function(t){return void 0===this.lastX||void 0===this.lastY||Math.sqrt(Math.pow(t.lastX-this.lastX,2)+Math.pow(t.lastY-this.lastY,2))>this.minDistance},e.prototype.drawElement=function(t){var e=a.isNil(t.element)?this.newPath(t):this.updatePath(t),n=this.points.length-this.lastSimplify;return(t.final&&n>this.MIN_SIMPLIFY||n>this.SIMPLIFY_POINTS)&&(this.simplifyPointsToPath(this.points,t.element),this.lastSimplify=this.points.length),e},e.prototype.simplifyPointsToPath=function(t,e){var n=e,i=(new Date).getTime(),r=l(t,this.ERROR_TOLERANCE);n.update(!0),n.clearPath();for(var o=!0,a=0,h=r;a<h.length;a++){var u=h[a];o?(n.M({x:u[0][0],y:u[0][1]}),n.L({x:u[3][0],y:u[3][1]}),o=!1):n.C({x:u[1][0],y:u[1][1]},{x:u[2][0],y:u[2][1]},{x:u[3][0],y:u[3][1]})}n.update(!1),n.redraw();var c=(new Date).getTime()-i;s.info("simplify|"+c+"ms|"+t.length+" to "+n.getSegmentCount()+" points|")},e}(o.BaseDraw);e.FreeHandTool=h},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/line-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/base-draw.js"),o=n("../../../../home/node/node_modules/lodash/lodash.js"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minDistance=10,e}return r(e,t),e.prototype.newLine=function(t){return this.svgDraw.line(t.startX,t.startY,t.lastX,t.lastY)},e.prototype.newPlot=function(t){return t.element.plot(t.startX,t.startY,t.lastX,t.lastY),t.element},e.prototype.drawElement=function(t){return o.isNil(t.element)?this.newLine(t):this.newPlot(t)},e}(s.BaseDraw);e.LineTool=a},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/pointer-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/svg.js/dist/svg.js"),s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/event-helpers.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/svg-helpers.js");e.HAND_ICON="M5.7 11c-.5-1.4-2-2-3.4-1.5s-2 1.9-1.6 3.3l3 7c.9 1.7 3.1 2.7 4.1 2.6h9.3c3.1 0 5.6-2.4 5.6-5.5v-5.3c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v-.9c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v.5-.4c0-1.2-.9-2.1-2-2.1H12c-1.2 0-2 1-2 2.2v.4-8c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v8.9";var a=function(t){return"pointer-"+t},l=function(){function t(t,e,n){this.svgDraw=t,this.controller=e,this.drawController=n,this.throttledUpdate=i.throttle(this.sendUpdate,200)}return t.prototype.onUpdate=function(){},t.prototype.activate=function(){var t=this.svgDraw;t.on("mousemove",this.onMove,this),t.on("touchmove",this.onMove,this,s.passive)},t.prototype.deactivate=function(){this.turnOff(),this.svgDraw.off()},t.prototype.isPointerAction=function(t){var e=t.action;return"draw_pointer"===e||"update_pointer"===e||"remove_pointer"===e},t.prototype.processPointerUpdate=function(t){if(!this.isUpdateForMyPointer(t)){var e=t.point,n=t.uid,i=t.action;this.clearPointerForUID(n),"remove_pointer"!==i&&this.drawPointer(e.x,e.y,a(n))}},t.prototype.clearPointerForUID=function(t){var e=r.get(a(t));e&&e.remove()},t.prototype.initPointer=function(t){var e=t.x,n=t.y,i=e-5,r=this.drawPointer(i,n,a(this.controller.getMyId()));this.drawController.cursor="none",this.sendUpdate(r,"draw_pointer")},t.prototype.drawPointer=function(t,n,i){return this.svgDraw.path(e.HAND_ICON).id(i).data("type","pointer").stroke({color:"black",width:1}).fill("white").move(t,n)},t.prototype.updatePointer=function(t,e){var n=e.x,i=e.y,r=n-5;t.move(r,i),this.throttledUpdate(t,"update_pointer")},t.prototype.onMove=function(t){var e=this.getMyPointer(),n=o.svgPointForEvent(s.eventXY(t),this.svgDraw.native());return s.passthroughEvent(i.isNil(e)?this.initPointer(n):this.updatePointer(e,n))},t.prototype.sendUpdate=function(t,e){var n={x:t.x(),y:t.y()};this.drawController.sendPointerUpdate(n,e)},t.prototype.reset=function(){var t=this.getMyPointer();t&&t.remove(),this.drawController.cursor="auto"},t.prototype.turnOff=function(){var t=this.getMyPointer();t&&(this.sendUpdate(t,"remove_pointer"),this.reset())},t.prototype.isUpdateForMyPointer=function(t){return t.uid===this.controller.getMyId()},t.prototype.getMyPointer=function(){return r.get(a(this.controller.getMyId()))},t}();e.PointerTool=l},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/rectangle-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/base-draw.js"),o=n("../../../../home/node/node_modules/lodash/lodash.js"),a=function(t){return 0===t?0:t<0?-1:1},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minDistance=10,e}return r(e,t),e.prototype.drawElement=function(t){var e,n,i=o.isNil(t.element)?this.svgDraw.rect():t.element,r=t.startX,s=t.lastX,l=t.startY,h=t.lastY;if(t.shiftKey){var u=Math.max(Math.abs(s-r),Math.abs(h-l),1);s=r+a(s-r)*u,h=l+a(h-l)*u}return r>s&&(r=(e=[s,r])[0],s=e[1]),l>h&&(l=(n=[h,l])[0],h=n[1]),i.move(r,l).size(Math.max(s-r,1),Math.max(h-l,1)),i},e}(s.BaseDraw);e.RectangleTool=l},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/select-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../../../home/node/node_modules/lodash/lodash.js"),s=n("../../../../home/node/node_modules/svg.js/dist/svg.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/event-helpers.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/svg-helpers.js");e.MAX_POINT_SIZE=25,e.RESIZE_MIN=4;var l=function(){function t(t,e,n){this.svgDraw=t,this.controller=e,this.drawController=n,this.selectedItem=null,this.selectedItemCheckpoint=null,this.resizeCheckpoint=null,this.hoverItem=null,this.dragOrResizeActive=!1}return t.prototype.initTool=function(t,e){this.textTool=e,this.svgDiv=t},t.prototype.onUpdate=function(t){if(this.selectedItem&&this.selectedItem.attr("id")===t){this.selectionOff();var e=s.get(t);e&&this.selectionOn(e)}},t.prototype.onSize=function(){if(this.selectedItem){var t=this.selectedItem;this.selectionOff(),this.selectionOn(t)}},t.prototype.activate=function(){var t=this,e=this.svgDraw;e.on("mousedown",this.onDown,this),e.on("mousemove",this.onMove,this),e.on("touchstart",this.onTouchStart,this,o.notpassive),e.on("dblclick",this.checkTextEdit,this),this.svgDiv.on("keydown",(function(e){return t.onKeyDown(e)})),this.drawController.focusCanvas()},t.prototype.deactivate=function(){this.selectionOff(),this.hoverOff(),this.svgDraw.off(),this.svgDiv.off(),this.dragOrResizeActive=!1},t.prototype.onDown=function(t){if(!o.isMainButton(t))return o.passthroughEvent();var e=this.mouseHitTest(t);return this.toggleItemSelect(e,t),e?o.acceptEvent(t):o.passthroughEvent()},t.prototype.onMove=function(t){if(this.dragOrResizeActive)return o.passthroughEvent();var e=this.mouseHitTest(t);return this.toggleItemHover(e),e?o.acceptEvent(t):o.passthroughEvent()},t.prototype.onTouchStart=function(t){if(this.dragOrResizeActive)return this.isTextElement(this.selectedItem)?(this.textElementTouch(this.selectedItem),o.acceptEvent(t)):o.passthroughEvent();var e=this.touchHitTest(t);return r.isNil(e)?o.passthroughEvent(this.toggleItemSelect(e,t)):this.isTextElement(e)?o.accept(this.textElementTouch(e),t):o.accept(this.toggleItemSelect(e,t),t)},t.prototype.textElementTouch=function(t){var e=this;o.detectSingleOrDoubleTap((function(){return e.toggleItemSelect(t,event)}),(function(){return e.editText(t)}))},t.prototype.editText=function(t){var e=this;this.selectionOff(),this.textTool.editExisting(t,(function(){return e.selectionOn(t)}))},t.prototype.toggleItemSelect=function(t,e){t?this.selectionOn(t,e):this.selectionOff()},t.prototype.toggleItemHover=function(t){t?this.hoverOn(t):this.hoverOff()},t.prototype.buildSelectionOptions=function(t){var n=this.controller.opt.touchDevice?50:10,i=this.controller.opt.touchDevice?18:10,r=(this.svgDraw.viewbox()||{}).zoom,s=void 0===r?1:r;if(s<1){var o=i*(1/s);i=o<=e.MAX_POINT_SIZE?o:e.MAX_POINT_SIZE}return{pointSize:i,radius:n,deepSelect:!0,pointsExclude:this.isTextElement(t)?["t","r","b","l"]:[]}},t.prototype.startDragOrResize=function(){this.selectedItemCheckpoint=a.captureElementCheckpoint(this.selectedItem),this.dragOrResizeActive=!0},t.prototype.handleResize=function(){this.selectedItem&&this.isTextElement(this.selectedItem)&&(this.selectedItem.attr("font-size")<=e.RESIZE_MIN&&(this.resizeCheckpoint||(this.resizeCheckpoint=a.captureElementCheckpoint(this.selectedItem)),this.selectedItem.attr("font-size",e.RESIZE_MIN),this.selectedItem.move(this.resizeCheckpoint.x,this.resizeCheckpoint.y)))},t.prototype.endDragOrResize=function(){this.dragOrResizeActive=!1,this.resizeCheckpoint=null,a.isElementDirty(this.selectedItem,this.selectedItemCheckpoint)&&this.sendItem()},t.prototype.onKeyDown=function(t){if(r.isNil(this.selectedItem)||"Backspace"!==t.key&&"Delete"!==t.key)return o.passthroughEvent();var e=this.selectedItem;return this.selectionOff(),this.drawController.deleteItem(e),o.acceptEvent(t)},t.prototype.selectionOn=function(t,e){t!==this.selectedItem&&(this.selectionOff(),t.selectize(!1).selectize(this.buildSelectionOptions(t)).resize().draggable(),this.selectedItem=t,this.selectedItemCheckpoint=null,this.resizeCheckpoint=null,this.selectionEventHandlers(t)),e&&t.remember("_draggable").start(e)},t.prototype.selectionEventHandlers=function(t){var e=this;t.on("touchstart",(function(t){return e.onTouchStart(t)}),this,o.notpassive),t.on("dragstart",(function(){return e.startDragOrResize()})),t.on("dragend",(function(){return e.endDragOrResize()})),t.on("resizestart",(function(){return e.startDragOrResize()})),t.on("resizing",(function(){return e.handleResize()})),t.on("resizedone",(function(){return e.endDragOrResize()}))},t.prototype.checkTextEdit=function(t){this.isTextElement(this.selectedItem)?o.accept(this.editText(this.selectedItem),t):o.passthroughEvent()},t.prototype.selectionOff=function(){this.textTool.completeEdit(),this.selectedItem&&(a.isElementDirty(this.selectedItem,this.selectedItemCheckpoint)&&this.sendItem(),this.selectedItem.selectize(!1,{deepSelect:!0}).resize("stop").draggable(!1),this.selectedItem.off(),this.selectedItem=null),this.selectedItemCheckpoint=null,this.dragOrResizeActive=!1},t.prototype.hoverOn=function(t){t!==this.hoverItem&&this.hoverOff(),t!==this.hoverItem&&t!==this.selectedItem&&(t.selectize(!1).selectize({points:!1,rotationPoint:!1}),this.hoverItem=t),this.drawController.cursor="move"},t.prototype.hoverOff=function(){if(this.hoverItem&&this.hoverItem!==this.selectedItem)try{this.hoverItem.selectize(!1)}catch(t){}this.hoverItem=null,this.drawController.cursor="auto"},t.prototype.isTextElement=function(t){var e=(t||{}).type;return"text"===(void 0===e?"":e)},t.prototype.mouseHitTest=function(t){var e={x:t.offsetX,y:t.offsetY},n=o.eventTargetId(t),r=i({},e,{targetId:n}),s=a.hitTest(r,this.svgDraw.native());return this.isSelectableElement(s)?s:null},t.prototype.touchHitTest=function(t){var e=a.svgPointForEvent(o.eventXY(t),this.svgDraw.native()),n=o.eventTargetId(t),r=i({},e,{targetId:n}),s=a.hitTest(r,this.svgDraw.native());return this.isSelectableElement(s)?s:null},t.prototype.sendItem=function(){this.drawController.sendItem(this.selectedItem,"update"),this.selectedItemCheckpoint=null},t.prototype.isSelectableElement=function(t){return!r.isNil(t)&&"pointer"!==t.data("type")},t}();e.SelectTool=l},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/svg-helpers.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/svg.js/dist/svg.js"),r=n("../../../../home/node/node_modules/lodash/lodash.js");function s(t){var e=t?t.getAttribute("id"):null;return e?i.get(e):null}function o(t){var e=s(t);return e?e.position():0}function a(t,e){var n=t.x,i=t.y;if("function"!=typeof e.getIntersectionList)return null;var a=e.createSVGRect();a.x=n-3,a.y=i-3,a.width=6,a.height=6;var l=e.getIntersectionList(a,e),h=r.orderBy(l,(function(t){return o(t)}),["desc"]);return h.length>0?s(h[0]):null}e.hitTest=function(t,e){var n=i.get(t.targetId);return n&&"svg"===n.type&&(n=null),r.isNil(n)?a(t,e):n},e.getSVGElement=s,e.elementPos=o,e.checkIntersection=a,e.captureElementCheckpoint=function(t){if(r.isNil(t))return null;var e=t.transform();return{x:t.x(),y:t.y(),h:t.height(),w:t.width(),skewX:e.skewX,skewY:e.skewY}},e.isValueDirty=function(t,e){return Math.abs(t-e)>1},e.isElementDirty=function(t,n){if(r.isNil(t)||r.isNil(n))return!1;var i=t.transform();return e.isValueDirty(t.x(),n.x)||e.isValueDirty(t.y(),n.y)||e.isValueDirty(t.width(),n.w)||e.isValueDirty(t.height(),n.h)||e.isValueDirty(i.skewX,n.skewX)||e.isValueDirty(i.skewY,n.skewY)},e.svgPointForEvent=function(t,e){var n=t.x,i=t.y,r=e.createSVGPoint();r.x=n,r.y=i;var s=e.getScreenCTM().inverse(),o=r.matrixTransform(s);return{x:o.x,y:o.y}},e.screenXYForElement=function(t,e){var n=e.createSVGPoint(),i=t.node.getCTM();n.x=t.x(),n.y=t.y();var r=n.matrixTransform(i);return{x:r.x,y:r.y}},e.getRotation=function(t){var e=(t?t.transform():{}).rotation;return void 0===e?0:e}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/text-tool.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/paper-tools/bdi-util.js"),s=n("../../../../home/node/node_modules/lil-uuid/uuid.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/event-helpers.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/svg-helpers.js");e.TOP_OFFSET=2.75,e.DEFAULT_WIDTH=200,e.DEFAULT_COLOR="rgba(255, 255, 255, 0.85)",e.PLACEHOLDER="-placeholder-",e.BASE_TEXT_CSS={border:0,position:"absolute",display:"none",width:e.DEFAULT_WIDTH+"px",margin:0,padding:0},e.INPUT_ID="svg_textinput",e.INPUT_TEMPLATE='<input id="'+e.INPUT_ID+'" type="text" name="svg_textinput"/>';var h=function(){function t(t,e,n){this.svgDraw=t,this.controller=e,this.drawController=n,this.textArea=null}return t.prototype.activate=function(){var t=this.svgDraw;t.on("mousedown",this.onDown,this),t.on("touchstart",this.onDown,this,a.notpassive)},t.prototype.onUpdate=function(){},t.prototype.deactivate=function(){this.completeEdit(),this.svgDraw.off()},t.prototype.initTool=function(t){t.append(o(e.INPUT_TEMPLATE)),this.textArea=t.find("#"+e.INPUT_ID),this.textArea.css(e.BASE_TEXT_CSS)},t.prototype.onDown=function(t){i.isNil(this.editItem)||this.completeEdit();var e=l.svgPointForEvent(a.eventXY(t),this.svgDraw.native());return a.accept(this.startNewEdit(e),t)},t.prototype.textOnKeyDown=function(t){return 13===t.keyCode?(this.completeEdit(),void t.preventDefault()):27===t.keyCode?(this.cancel(),void t.preventDefault()):void 0},t.prototype.startNewEdit=function(t){var e=this.controller.opt.isRTL,n=this.createElement(t,e);this.editItem={anchorRTL:e,element:n,isNew:!0},this.setupTextBox()},t.prototype.setTextBoxStyle=function(t){var n=this.editItem.isNew?"right":"center",i=this.editItem.anchorRTL?n:"left",r=this.svgDraw.viewbox().zoom,s=void 0===r?1:r,o=t.attr("font-size")*s;this.textArea.css({height:"auto",color:t.attr("fill"),"font-family":t.attr("font-family"),"font-size":o,"font-weight":t.attr("font-weight"),"background-color":e.DEFAULT_COLOR,"text-align":i})},t.prototype.setupTextBox=function(){var t=this.editItem,e=l.screenXYForElement(t.element,this.svgDraw.native());t.element.hide();var n=t.isNew?this.controller.opt.inputLabelNew:this.controller.opt.inputLabelEdit,i=t.anchorRTL?"rtl":"ltr";this.textArea.attr({dir:i,"aria-label":n});var r=t.element.data("text");this.textArea.val(r),this.setTextBoxStyle(t.element);var s=this.getTextBoxPosition(t,e.x,e.y);this.textArea.css(s),this.setTextBoxTransform(t),this.textAreaEventHandlers(e),this.textArea.show(),this.textArea.focus()},t.prototype.textAreaEventHandlers=function(t){var e=this;this.textArea.keyup((function(){return e.adjustWidth(e.editItem,t)})),this.textArea.keydown((function(t){return e.textOnKeyDown(t)})),this.textArea.focusout((function(){return e.completeEdit()}))},t.prototype.adjustWidth=function(t,e){if(!i.isNil(t)){var n=this.getTextBoxPosition(t,e.x,e.y);this.textArea.css({width:n.width,left:n.left})}},t.prototype.getTextBoxPosition=function(t,n,i){var r=this.svgDraw.viewbox().zoom,s=void 0===r?1:r,o=this.controller.measureText(this.textArea.get(0),this.textArea.val()),a=o<e.DEFAULT_WIDTH?e.DEFAULT_WIDTH:o,l=t.isNew?a:a/2;return{left:t.anchorRTL?n-l:n,width:a,top:i-e.TOP_OFFSET*s}},t.prototype.setTextBoxTransform=function(t){var e="rotate("+l.getRotation(t.element)+"deg)",n=t.anchorRTL?"50 50":"0 0";this.textArea.css({transform:e,"transform-origin":n})},t.prototype.editExisting=function(t,e){if(!this.editItem||this.editItem.element!==t){var n=t.y(),i="rtl"===t.data("dir");this.editItem={element:t,checkpointY:n,anchorRTL:i,isNew:!1,onComplete:e},this.adjustX(this.editItem,"start"),this.setupTextBox()}},t.prototype.completeEdit=function(){if(!i.isNil(this.editItem)){var t=this.editItem,n=this.textArea.val();if(i.isEmpty(n)||n===e.PLACEHOLDER)return this.endEditMode();var s=t.anchorRTL?r.add_rle(n):r.add_lre(n);t.element.data("text",n).plain(s).style({"white-space":"pre"}),t.isNew||t.element.data("modifiedby",this.controller.getMyId()),this.showElement(t),this.adjustX(t,"end"),this.drawController.sendItem(t.element),this.endEditMode()}},t.prototype.adjustX=function(t,e){if(t.anchorRTL){var n=t.element,i=n.bbox().w,r=void 0===i?0:i,s=t.isNew?r:r/2,o="end"===e?n.x()-s:n.x()+s;n.x(o)}},t.prototype.createElement=function(t,n){var i=t.x,r=t.y,o=this.controller.fontFamily,a=this.controller.fontWeight,l=this.controller.fontSize,h=this.controller.strokeColor;return this.svgDraw.plain(e.PLACEHOLDER).move(i,r).font({family:o,weight:a,size:l}).fill({color:h}).data("dir",n?"rtl":"ltr").data("createdby",this.controller.getMyId()).id(s.uuid())},t.prototype.cancel=function(){this.editItem&&!i.isNil(this.editItem.element.data("text"))&&(this.showElement(this.editItem),this.adjustX(this.editItem,"end")),this.endEditMode()},t.prototype.showElement=function(t){t.element.show(),i.isNil(t.checkpointY)||(t.element.y(t.checkpointY),t.checkpointY=null)},t.prototype.endEditMode=function(){var t=this.editItem.onComplete;this.editItem=null,this.textArea.hide(),this.textArea.val(""),this.textArea.off(),this.controller.contentSizer.resetInnerScroll(),this.drawController.focusCanvas(),t&&t()},t}();e.TextTool=h},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/tools.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/line-tool.js");e.LineTool=i.LineTool;var r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/freehand-tool.js");e.FreeHandTool=r.FreeHandTool;var s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/ellipse-tool.js");e.EllipseTool=s.EllipseTool;var o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/rectangle-tool.js");e.RectangleTool=o.RectangleTool;var a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/pointer-tool.js");e.PointerTool=a.PointerTool;var l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/select-tool.js");e.SelectTool=l.SelectTool;var h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation/svg-tools/text-tool.js");e.TextTool=h.TextTool,e.initTools=function(t,e,n){return{pencil:new r.FreeHandTool(t,e,n),line:new i.LineTool(t,e,n),ellipse:new s.EllipseTool(t,e,n),rectangle:new o.RectangleTool(t,e,n),pointer:new a.PointerTool(t,e,n),text:new h.TextTool(t,e,n),select:new l.SelectTool(t,e,n)}}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/background.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/urijs/src/URI.js"),s=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/base-bg-layer.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/img-bg-layer.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/svg-bg-layer.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/pdf-bg-layer.js"),c=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/pdf-config.js");e.getNewInstance=function(t,e){return new d(t,e)};var d=function(){function t(t,e){this.requestSeq=0,this.controller=t,c.configurePDFJS(t.opt),this.init(e)}return t.prototype.init=function(t){this.bgContainer=s('<div class="background"/>'),t.append(this.bgContainer)},t.prototype.insertLayerElem=function(t){return this.bgContainer.append(t)},t.prototype.size=function(t){if(this.bgContainer){this.bgContainer.css(t);var e=this.newLayer;if(this.newLayer=null,e&&e!==this.bgLayer){var n=this.bgLayer;this.bgLayer=e,this.bgLayer.size(t),this.bgLayer.show().then((function(){n&&n.remove()}))}else this.newLayer=null,this.bgLayer&&this.bgLayer.size(t)}else o.error("Attempt to size background element when it does not exist - init should be called before size.")},t.prototype.processUrls=function(t){var e;!i.isEmpty(t.url)||i.isEmpty(t.relativeUrl)||i.isEmpty(this.controller.baseUrl)||(e=new r(t.relativeUrl,this.controller.baseUrl+"/"),t.url=e.toString()),t.url&&i.isEmpty(t.image_ext)&&(e||(e=new r(t.url)),t.image_ext=e.suffix())},t.prototype.determineType=function(t){return i.isEmpty(t.url)?"blank":this.controller.opt.disablePDF||i.isEmpty(t.pdfUrl)?i.isEmpty(t.svgUrl)&&"image/svg+xml"!==t.pageType&&"svg"!==t.image_ext||t.disableSVGDOM?"img":"svg":"pdf"},t.prototype.handleErrorFallback=function(t,e){"pdf"===t?(e.pdfUrl=null,o.warn("Retrying by disabling PDF support."),this.load(e)):"svg"!==t||e.disableSVGDOM?(o.error("Unrecoverable error while trying to show a background."),this.controller.layerError(this.getBackgroundUpdateInfo(e))):(o.error("Error loading svg via XHR, will attempt again without XHR."),e.disableSVGDOM=!0,this.load(e))},t.prototype.createBackgroundLayer=function(t,e,n){var i={cookieValues:e.cookieValues,cookieSignature:e.cookieSignature,urlCallback:this.controller.opt.urlCallback};switch(t){case"img":return new l.ImageBackgroundLayer(this.controller,this,e,i,n);case"svg":return new h.SvgBackgroundLayer(this.controller,this,e,i,n);case"pdf":return new u.PdfBackgroundLayer(this.controller,this,e,i,n);case"blank":return new a.BaseBackgroundLayer(this.controller,this,e,i,n);default:return o.warn("Unknown bgType, using blank background:",t),new a.BaseBackgroundLayer(this.controller,this,e,i,n)}},t.prototype.getBackgroundUpdateInfo=function(t){return{contentName:t.contentName,contentId:t.uid,slideIndex:t.subSlideIndex,slideCount:t.totalSlides,slidesLoaded:t.subSlides}},t.prototype.load=function(t){var e=this;this.processUrls(t),(this.controller.opt.disableXHR||this.controller.opt.disableSVGDOM)&&(t.disableSVGDOM=!0),t.reset&&this.controller.clear(!1);var n=this.determineType(t),i=this.createBackgroundLayer(n,t,++this.requestSeq);o.info("Layer ("+n+") load set up as: "+i.requestSeq),this.controller.layerLoading(this.getBackgroundUpdateInfo(t)),i.load().then((function(n){if(i.requestSeq!==e.requestSeq)return o.info("Layer loaded, but skipping updating background, since a different background update was already in progress. ("+e.requestSeq+" vs "+i.requestSeq+")"),i.remove(),void(i=null);e.newLayer=i,e.controller.layerReady(n,e.getBackgroundUpdateInfo(t))})).catch((function(r){i.requestSeq===e.requestSeq?i.displayed?o.info("Error detected while preparing the slide, but skipping further fallbacks, since the slide is marked as displayed."):(o.warn("error detected while trying to prepare the "+n+" slide for display: "+r),e.handleErrorFallback(n,t),i.remove(),i=null):o.info("Error detected while preparing the slide, but skipping further fallbacks, since a different  background update was already in progress. ("+e.requestSeq+" vs "+i.requestSeq+")")})).done()},t}();e.Background=d},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/base-bg-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/q/q.js"),r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),s=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed");e.FADE_TIME_MS=150;var o=function(){function t(t,e,n,i,r){this.layerElemInserted=!1,this._displayed=!1,this.controller=t,this.background=e,this.wbj=n,this.loaderOpts=i,this._requestSeq=r}return Object.defineProperty(t.prototype,"displayed",{get:function(){return this._displayed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestSeq",{get:function(){return this._requestSeq},enumerable:!0,configurable:!0}),t.prototype.load=function(){var t=this;return i.Promise((function(e,n,i){var o;o=t.wbj.width>0&&t.wbj.height>0?{width:t.wbj.width,height:t.wbj.height}:{width:t.controller.defaultWidth,height:t.controller.defaultHeight},r.info("setting up blank background"),t.layerElem=s("<div class='background'/>"),t.setDefaultStyle(),e(o)}))},t.prototype.show=function(t){var n=this;return void 0===t&&(t=!1),i.Promise((function(i,r,s){n._displayed=!0,n.layerElemInserted||(n.background.insertLayerElem(n.layerElem),n.layerElemInserted=!0),n.layerElem.fadeIn(n.controller.opt.disableFade||t?0:e.FADE_TIME_MS,(function(){i()}))}))},t.prototype.appendTo=function(t){t.append(this.layerElem),this.layerElemInserted=!0},t.prototype.remove=function(){this.layerElem?(this.layerElem.remove(),this.layerElem=null):r.warn("Attempt to remove layer element when it does not exist."),this.layerElemInserted=!1},t.prototype.size=function(t){this.layerElem?this.layerElem.css(t):r.warn("Attempt to size layer element when it does not exist.")},t.prototype.setDefaultStyle=function(t){return void 0===t&&(t=!1),this.layerElem.css({position:"absolute",top:"0",border:"none","background-color":"white"}).toggle(t)},t}();e.BaseBackgroundLayer=o},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/img-bg-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/lodash/lodash.js"),o=n("../../../../home/node/node_modules/q/q.js"),a=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/base-bg-layer.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/img-loader.js"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.load=function(){var t=this;return s.isEmpty(this.wbj.url)?o.reject("No url for ImageBackgroundLayer to load!"):(l.info("loading image: ",this.wbj.url),u.loadImgFromUrlPromise(this.wbj.url,this.loaderOpts).then((function(e){if(!e.loaded||!e.img)throw new Error("Image not loaded!");l.info("img loaded for whiteboard: ",e),t.wbj.width=e.width,t.wbj.height=e.height,s.isEmpty(t.wbj.contentName)||(e.img.alt=t.wbj.contentName);var n=a(e.img);return e.orientationCss&&n.css(e.orientationCss),e.includesRotation?(t.layerElem=a("<div class='img_background'/>"),t.imgScale=a("<div class='img_scale'></div>"),t.layerElem.append(t.imgScale),n.css({"max-width":"none"}),t.imgScale.append(n)):t.layerElem=n,t.setDefaultStyle(),{width:t.wbj.width,height:t.wbj.height}})))},e.prototype.size=function(e){if(t.prototype.size.call(this,e),this.imgScale){var n=e.width/this.wbj.width;this.imgScale.css({"transform-origin":"top left",transform:"scale("+n+")"})}},e}(h.BaseBackgroundLayer);e.ImageBackgroundLayer=c},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/pdf-bg-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/lodash/lodash.js"),o=n("../../../../home/node/node_modules/q/q.js"),a=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/base-bg-layer.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/img-bg-layer.js"),c=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/pdf-loader.js");n("../../../../home/node/node_modules/pdfjs-dist/web/pdf_viewer.js");var d=n("../../../../home/node/node_modules/pdfjs-dist/build/pdf.js"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disablePDFCanvas=!1,e.pdfCanvasDisplayed=!1,e.pdfReady=!1,e}return r(e,t),e.prototype.load=function(){if(s.isEmpty(this.wbj.pdfUrl))return o.reject("No url for PdfBackgroundLayer to load!");this.controller.opt.disablePDFCanvas&&(this.disablePDFCanvas=!0),l.info("loading pdf: ",this.wbj.pdfUrl),this.layerElem=a('<div class="pdf_background" id="pdf_request_'+this.requestSeq+'"/>'),this.setDefaultStyle();var t=o.defer();return this.loadLowRes(t),this.loadPdf(t),t.promise},e.prototype.loadLowRes=function(t){var e=this;this.lowresLayer=new u.ImageBackgroundLayer(this.controller,this.background,this.wbj,this.loaderOpts,this.requestSeq);var n=!0;if(!this.disablePDFCanvas){var i=c.returnPdfFromCache(this.wbj.pdfUrl);i&&i.loaded&&i.pdfDoc&&this.wbj.subSlideIndex>0&&this.wbj.subSlideIndex<=i.pages&&(n=!1)}n&&this.lowresLayer.load().then((function(n){l.info("loaded lowresLayer"),e.displayed&&!e.disablePDFCanvas||(l.info("appending lowresLayer"),e.lowresLayer.setDefaultStyle(!0),e.lowresLayer.appendTo(e.layerElem),e.layerElemInserted||(e.background.insertLayerElem(e.layerElem),e.layerElemInserted=!0),t.resolve({width:e.wbj.width,height:e.wbj.height}),e.lastSize&&e.size(e.lastSize))})).catch((function(n){l.warn("error loading lowres image for PDF:",e.wbj.url),e.disablePDFCanvas&&t.reject("error loading lowresLayer, which is required due to disablePDFCanvas")})).done()},e.prototype.loadPdf=function(t){var e=this;c.loadPdfFromUrlPromise(this.wbj.pdfUrl,this.loaderOpts).then((function(n){n.loaded&&n.pdfDoc||t.reject("Pdf not loaded!"),(e.wbj.subSlideIndex<0||e.wbj.subSlideIndex>n.pages)&&t.reject("Slide index is out of range!"),l.info("pdf loaded for whiteboard: ",n),n.pdfDoc.getPage(e.wbj.subSlideIndex).then((function(n){e.handlePdfPageReady(t,n)}),(function(n){l.error("error loading pdf page:",e.wbj.subSlideIndex," from document:",e.wbj.pdfUrl),t.reject("error loading pdf page")}))})).catch((function(n){l.error("error loading pdf document:",e.wbj.pdfUrl),t.reject("error loading pdf document:")})).done()},e.prototype.handlePdfPageReady=function(t,e){var n=this;if(l.info("loaded pdf for: ",this.wbj.pdfUrl),this.layerElem){this.pdfPage=e;var i=this.initViewport(e);this.wbj.width=i.width,this.wbj.height=i.height,this.loadedSlideWidth=this.wbj.width,this.background.insertLayerElem(this.layerElem),this.layerElemInserted=!0;var r=new d.PDFJS.PDFPageView({container:this.layerElem[0],id:this.wbj.subSlideIndex,renderer:"canvas",defaultViewport:i,scale:i.scale,textLayerFactory:new d.PDFJS.DefaultTextLayerFactory,removePageBorders:!0});r.setPdfPage(this.pdfPage),l.info("drawing pdf page"),r.draw().then((function(){n.handlePdfDrawComplete(t)}),(function(e){l.error("error detected while drawing pdf page:",n.wbj.subSlideIndex," from document:",n.wbj.pdfUrl),t.reject("error drawing pdf page")}))}},e.prototype.initViewport=function(t){var e=this.controller.opt.minimumPdfWidth,n=1,i=this.pdfPage.getViewport(n);return i.width>0&&i.width<e&&(n=e/i.width,i=this.pdfPage.getViewport(n)),l.info("source document width: "+i.width+", height: "+i.height+", scale: "+n),i},e.prototype.handlePdfDrawComplete=function(t){this.layerElem.find(".canvasWrapper").hide(),this.pdfReady=!0,this.disablePDFCanvas||t.resolve({width:this.wbj.width,height:this.wbj.height}),this.lastSize&&this.size(this.lastSize)},e.prototype.remove=function(){this.lowresLayer&&this.lowresLayer.remove(),t.prototype.remove.call(this)},e.prototype.size=function(e){var n=this;if(this.lastSize=e,t.prototype.size.call(this,e),this.lowresLayer&&this.lowresLayer.size(e),this.pageElem&&0!==this.pageElem.length||(this.pageElem=this.layerElem.find(".page")),0!==this.pageElem.length){var i=e.width/(96/72*this.loadedSlideWidth);if(this.pageElem.css({"transform-origin":"top left",transform:"scale("+i+")"}),this.pdfReady&&!this.pdfCanvasDisplayed&&!this.disablePDFCanvas){var r=this.pageElem.find(".canvasWrapper");r&&r.length>0&&(this.pdfCanvasDisplayed=!0,r.fadeIn(this.controller.opt.disableFade||!this.displayed?0:h.FADE_TIME_MS,(function(){n.lowresLayer&&!n.disablePDFCanvas&&(n.lowresLayer.remove(),n.lowresLayer=null)})))}}},e}(h.BaseBackgroundLayer);e.PdfBackgroundLayer=f},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/pdf-config.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/pdfjs-dist/build/pdf.js"),r=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/pdf-loader.js"),s=n("../../../../home/node/node_modules/lodash/lodash.js");e.configurePDFJS=function(t){var e=t.pdfjs,n=e&&e.workerPath?e.workerPath:null;i.PDFJS.workerSrc=n;var o=e&&e.debugEnabled?i.PDFJS.VERBOSITY_LEVELS.debug:i.PDFJS.VERBOSITY_LEVELS.errors;i.PDFJS.verbosity=o,s.isNumber(t.cacheSizePdf)&&r.setCacheSize(t.cacheSizePdf)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/svg-bg-layer.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),o=n("../../../../home/node/node_modules/lodash/lodash.js"),a=n("../../../../home/node/node_modules/q/q.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/base-bg-layer.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/svg-loader.js"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.load=function(){var t=this,e=this.wbj.url;return o.isEmpty(this.wbj.svgUrl)||(e=this.wbj.svgUrl),o.isEmpty(e)?a.reject("No url for SvgBackgroundLayer to load!"):(l.info("loading svg: ",e),u.loadSvgFromUrlPromise(e,this.wbj.url_base,this.wbj.stylesheetUrl,this.loaderOpts).then((function(e){if(!e.loaded||!e.svg)throw new Error("Svg not loaded!");return l.info("svg loaded for whiteboard: ",e),t.wbj.width=e.width,t.wbj.height=e.height,t.layerElem=s(e.svg),t.setDefaultStyle(),{width:t.wbj.width,height:t.wbj.height}})))},e}(h.BaseBackgroundLayer);e.SvgBackgroundLayer=c},"../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/img-loader.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/q/q.js"),s=n("../../../../home/node/node_modules/exif-js/exif.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/node_modules/detect-browser/es/index.js"),a=n("../../../../home/node/node_modules/is-touch-device/build/index.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/url-loader.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/lru-cache.js");function c(t,e){void 0===e&&(e={});var n=h.getUrlWithAuthParams(t,e);if(i.isFunction(e.urlCallback))return l.info("callback for img url: ",t,n),h.urlCallbackPromise(n,void 0,e.urlCallback,!1).then((function(t){return t.isResponse?(l.error("img-loader cannot accept response data via urlCallback, use a data URI instead: ",n),r.reject("img-loader cannot accept response data via urlCallback, use a data URI instead")):c(t.returnValue)}));l.info("loading img from url: ",t,n);var o={loaded:!1,width:0,height:0,orientation:0,img:null,orientationCss:null,centeredOrientationCss:null,includesRotation:!1},u=r.defer(),f=new Image;return f.crossOrigin="anonymous",f.onload=function(){l.info("Image loaded: ",t,n),o.loaded=!0,o.width=f.naturalWidth,o.height=f.naturalHeight,o.img=f;try{s.getData(f,(function(){o.orientation=i.toInteger(s.getTag(this,"Orientation")),o.orientation>=5&&function(){if("firefox"===v.name&&v.version.startsWith("76"))return!0;return!m()}()&&(o.height=f.naturalWidth,o.width=f.naturalHeight,o.includesRotation=!0),!function(){if(m()||(t="Mac OS"===v.os&&a(),"safari"===v.name&&("iOS"===v.os||t)))return!1;var t;return!0}()?m()&&(o.orientationCss=o.centeredOrientationCss={"image-orientation":"from-image"}):(o.orientationCss=d(o.orientation,!1),o.centeredOrientationCss=d(o.orientation,!0)),u.resolve(o)}))}catch(t){l.error("Exception while reading EXIF data:",t),u.reject(t)}},f.onerror=function(){u.reject("image error")},f.src=n,u.promise}function d(t,e){switch(t){case 2:return{transform:"rotateY(180deg)"};case 3:return{transform:"rotate(180deg)"};case 4:return{transform:"rotate(180deg) rotateY(180deg)"};case 5:return e?{transform:"rotate(270deg) rotateY(180deg)","transform-origin":"center"}:{transform:"rotate(270deg) rotateY(180deg)","transform-origin":"top left"};case 6:return e?{transform:"rotate(90deg)","transform-origin":"center"}:{transform:"translateY(-100%) rotate(90deg)","transform-origin":"bottom left"};case 7:return e?{transform:"rotate(90deg) rotateY(180deg)","transform-origin":"center"}:{transform:"translateY(-100%) translateX(-100%) rotate(90deg) rotateY(180deg)","transform-origin":"bottom right"};case 8:return e?{transform:"rotate(270deg)","transform-origin":"center"}:{transform:"translateX(-100%) rotate(270deg)","transform-origin":"top right"};default:return null}}var f=!0,p=new u.LRUCache(20);function g(t){return{loaded:t.loaded,width:t.width,height:t.height,orientation:t.orientation,img:t.img.cloneNode(!0),orientationCss:t.orientationCss,centeredOrientationCss:t.centeredOrientationCss,includesRotation:t.includesRotation}}var v=o.detect();function m(){return CSS.supports("image-orientation","from-image")}e.loadImgFromUrlPromise=function(t,e){if(void 0===e&&(e={}),f){var n=p.get(t);if(n)return r.when(g(n))}return c(t,e).then((function(e){return f&&p.put(t,e),g(e)}))},e.setCacheSize=function(t){p.limit=t,f=t>0}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/lru-cache.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){void 0===t&&(t=10),this._size=0,t<1&&(t=1),this._limit=t,this._keymap={}}return Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){for(t<1&&(t=1),this._limit=t;this._size>this._limit&&this._head;)this.remove(this._head.key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){var n={key:t,value:e};if(this._keymap[t]=n,this._tail?(this._tail.newer=n,n.older=this._tail):this._head=n,this._tail=n,this._size===this._limit)return this.shift();this._size++},t.prototype.shift=function(){var t=this._head;return t&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,t.newer=t.older=void 0,delete this._keymap[t.key]),t},t.prototype.get=function(t){var e=this.get_entry(t);return e?e.value:void 0},t.prototype.get_entry=function(t){var e=this._keymap[t];if(void 0!==e)return e===this._tail||(e.newer&&(e===this._head&&(this._head=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this._tail,this._tail&&(this._tail.newer=e),this._tail=e),e},t.prototype.find=function(t){var e=this._keymap[t];return e?e.value:void 0},t.prototype.set=function(t,e){var n=this.get_entry(t);if(n){var i=n.value;return n.value=e,i}this.put(t,e)},t.prototype.remove=function(t){var e=this._keymap[t];if(e)return delete this._keymap[e.key],e.newer&&e.older?(e.older.newer=e.newer,e.newer.older=e.older):e.newer?(e.newer.older=void 0,this._head=e.newer):e.older?(e.older.newer=void 0,this._tail=e.older):this._head=this._tail=void 0,this._size--,e.value},t.prototype.removeAll=function(){this._head=this._tail=void 0,this._size=0,this._keymap={}},t.prototype.keys=function(){return Object.keys(this._keymap)},t.prototype.forEach=function(t,e,n){var i;if(!0===e?(n=!0,e=void 0):"object"!=typeof e&&(e=this),n)for(i=this._tail;i;)t.call(e,i.key,i.value,this),i=i.older;else for(i=this._head;i;)t.call(e,i.key,i.value,this),i=i.newer},t.prototype.toJSON=function(){for(var t=[],e=this._head;e;)t.push({key:e.key,value:JSON.stringify(e.value)}),e=e.newer;return t},t.prototype.toString=function(){for(var t="",e=this._head;e;)t+=String(e.key)+":"+e.value,(e=e.newer)&&(t+=" < ");return t},t}();e.LRUCache=i},"../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/pdf-loader.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/q/q.js"),s=n("../../../../home/node/node_modules/pdfjs-dist/build/pdf.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/url-loader.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/lru-cache.js");var h=!0,u=new l.LRUCache(5);e.returnPdfFromCache=function(t){return u.get(t)},e.loadPdfFromUrlPromise=function(t,e){if(void 0===e&&(e={}),h){var n=u.get(t);if(n)return r.when(n)}return function t(e,n){void 0===n&&(n={});var l=a.getUrlWithAuthParams(e,n);if(i.isFunction(n.urlCallback))return o.info("callback for url: ",e,l),a.urlCallbackPromise(l,void 0,n.urlCallback,!1).then((function(e){return e.isResponse?(o.error("pdf-loader cannot accept response data via urlCallback, use a data URI instead: ",l),r.reject("pdf-loader cannot accept response data via urlCallback, use a data URI instead")):t(e.returnValue)}));o.info("loading pdf from url: ",e,l);var h={loaded:!1,pages:0,pdfDoc:null},u=r.defer();return s.getDocument({url:l}).then((function(t){o.info("pdf loaded: ",e,l),h.loaded=!0,h.pages=t.numPages,h.pdfDoc=t,u.resolve(h)}),(function(t){o.error("Caught pdf getDocument erorr while loading ",l,", error:",t),u.reject(t)})),u.promise}(t,e).then((function(e){return h&&u.put(t,e),e}))},e.setCacheSize=function(t){u.limit=t,h=t>0}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/svg-loader.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/q/q.js"),s=n("../../../../home/node/node_modules/urijs/src/URI.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/url-loader.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/lru-cache.js"),u=1,c=Math.pow(2,52);function d(t,e,n){return void 0===n&&(n={}),l.urlLoaderPromise(t.getAttribute("href"),"text",n).then((function(n){var i=document.createElement("style");i.type="text/css",i.appendChild(document.createTextNode(n)),e.insertBefore(i,t),e.removeChild(t)}))}function f(t,e,n,i){void 0===i&&(i={});var h={loaded:!1,width:0,height:0,svg:null};return a.info("loading svg from url: ",t),l.urlLoaderPromise(t,"xml",i).then((function(t){a.info("svg loaded: ",t),h.loaded=!0,h.svg=t.documentElement;var l=t.documentElement.attributes;h.width=parseFloat(l.width.value),isNaN(h.width)&&(h.width=0),h.height=parseFloat(l.height.value),isNaN(h.height)&&(h.height=0),t.documentElement.setAttribute("style","width: 100%; height: 100%; overflow:hidden;"),t.documentElement.setAttribute("width","100%"),t.documentElement.setAttribute("height","100%"),t.documentElement.setAttribute("focusable","false");var u=t.documentElement;document.adoptNode(u);var c=function(t,e,n,i){void 0===i&&(i={});for(var o,l=t.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","link"),h=[],u=l.length-1;u>=0;u--){var c=(o=l[u]).parentNode;if("stylesheet"===o.getAttribute("rel")&&"text/css"===o.getAttribute("type")){var f,p=o.getAttribute("href");if(n&&"stylesheet.css"===p)f=n;else f=new s(p).absoluteTo(e);a.debug("Updating link: ",p,f),o.setAttribute("href",f),h.push(r.fcall(d,o,c,i))}}return h}(u,e,n,i);return function(t){for(var e,n=t.getElementsByTagName("use"),i=n.length-1;i>=0;i--){var r=(e=n[i]).parentNode,s=e.getAttribute("xlink:href").split("#");if(0===s[0].length){a.debug("Updating use with url fragment: ",s[1]);var l=o(t).find("#"+s[1])[0];if("symbol"!==l.tagName){for(var h=l.cloneNode(!0),u=0;u<e.attributes.length;u++){var c=e.attributes[u].name,d=e.attributes[u].value;"xlink:href"!==c&&h.setAttribute(c,d)}r.insertBefore(h,e),r.removeChild(e)}}}}(u),r.all(c).then((function(){return h}))}))}var p=!0,g=new h.LRUCache(20);function v(t){var e=t.svg.cloneNode(!0),n=(u++).toString(36);return u>c&&(u=1),function(t,e){var n="",r="",s=t.getAttribute("class"),o=s?s.match(/crocodoc-(?!page-svg)[^\s]*/):null;o&&(r=o[0],n="collab-"+e,t.setAttribute("class",s+" "+n));for(var a=new RegExp("."+r+" ","g"),l="."+n+"."+r+" ",h=t.querySelectorAll("style"),u=0;u<h.length;++u)i.isEmpty(n)?h[u].textContent+="":h[u].textContent=h[u].textContent.replace(a,l)}(e,n),function(t,e){for(var n={clippath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],lineargradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialgradient:["fill","stroke"]},i=t.querySelectorAll("defs [id]"),r=0;r<i.length;++r){var s=i[r].tagName,o=i[r].id,a=e+"_"+o;i[r].id=a,(n[s.toLowerCase()]||[]).forEach((function(e){for(var n=t.querySelectorAll("["+e+'*="#'+o+'"]'),i=0;i<n.length;++i)n[i].setAttribute(e,'url("#'+a+'")')}));for(var l=t.querySelectorAll('[*|href="#'+o+'"]'),h=0;h<l.length;++h)l[h].getAttribute("xlink:href")==="#"+o&&l[h].setAttribute("xlink:href","#"+a)}}(e,n),{loaded:t.loaded,width:t.width,height:t.height,svg:e}}e.loadSvgFromUrlPromise=function(t,e,n,o){if(void 0===o&&(o={}),i.isEmpty(e)&&(e=new s("..").absoluteTo(t)),p){var a=g.get(t);if(a)return r.when(v(a))}return f(t,e,n,o).then((function(e){return p&&g.put(t,e),v(e)}))},e.setCacheSize=function(t){g.limit=t,p=t>0}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/url-loader.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=n("../../../../home/node/node_modules/q/q.js"),s=n("../../../../home/node/node_modules/urijs/src/URI.js"),o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/lru-cache.js");function h(t,e){if(i.isEmpty(e.cookieSignature)&&i.isEmpty(e.cookieValues))return t;var n=new s(t);n.query(e.cookieSignature);return i.forOwn(e.cookieValues,(function(t,e){i.startsWith(e,"CloudFront-")?n.addQuery(e.substr("CloudFront-".length),t):i.startsWith(e,"Cookies-")?"Cookies-expires"===e&&n.addQuery("Expires",t):n.addQuery(e,t)})),n.toString()}function u(t,e,n,i){var s=r.defer();return"function"==typeof n?n(t,e,(function(t,e){void 0===e&&(e=!1),s.resolve({returnValue:t,isResponse:e})}),i):s.resolve({returnValue:t,isResponse:!1}),s.promise}e.getUrlWithAuthParams=h,e.urlCallbackPromise=u;var c=!0,d=new l.LRUCache(30);function f(t,e){return"xml"===e?o.parseXML(t):"json"===e?o.parseJSON(t):t}e.urlLoaderPromise=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n={}),c){var s=d.get(t);if(s)return r.when(f(s,e))}return function t(e,n){void 0===n&&(n={});var s=h(e,n);return i.isFunction(n.urlCallback)?(a.info("callback for url: ",e,s),u(s,void 0,n.urlCallback,!0).then((function(e){return e.isResponse?r.when(e.returnValue):t(e.returnValue)}))):(a.info("loading from url: ",e,s),r(o.ajax({type:"GET",dataType:"text",url:s})))}(t,n).then((function(n){return c&&d.put(t,n),f(n,e)}))},e.setCacheSize=function(t){d.limit=t,c=t>0}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/platform/jinx-web/wb-jinx-web-messaging.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),r=n("../../../../home/node/node_modules/lodash/lodash.js");e.getNewInstance=function(){return new s};var s=function(){function t(){}return t.prototype.initAdapter=function(t){this.adapter=t},t.prototype.initLibrary=function(){this.classroom||(this.classroom=Module.BbClassroom.getSharedClassroom(),this.wbFeature=this.classroom.getWhiteboardFeature(),this.setupListeners(),this.classroom.isConnected()&&(this.handleConnected(),this.processParticipant("",this.classroom.getRoster().getMyAddress())))},t.prototype.setViewReady=function(t){this._viewReady=t,this._viewReady&&this.checkForNewMessages()},t.prototype.draw=function(t,e,n){this.wbFeature||i.error("Library feature not set up cannot submit draw payload:",e),this.classroom.isConnected()||i.error("Can't send draw payload while not connected:",e);var r=this.updateTypeStrToVal(t);this.wbFeature.draw(r,e,n)},t.prototype.point=function(t,e){this.wbFeature||i.error("Library feature not set up cannot submit point payload:",e),this.classroom.isConnected()||i.error("Can't send point payload while not connected:",e);var n=this.updateTypeStrToVal(t);this.wbFeature.pointer(n,e)},t.prototype.updateTypeStrToVal=function(t){switch(t){case"add":return Module.BbWhiteboardUpdateType.Bb_WHITEBOARD_UPDATE_TYPE_ADD;case"remove":return Module.BbWhiteboardUpdateType.Bb_WHITEBOARD_UPDATE_TYPE_REMOVE;case"update":return Module.BbWhiteboardUpdateType.Bb_WHITEBOARD_UPDATE_TYPE_REPLACE;default:return Module.BbWhiteboardUpdateType.Bb_WHITEBOARD_UPDATE_TYPE_UNDEFINED}},t.prototype.checkForNewMessages=function(){if(this._viewReady){for(var t=this.wbFeature.getAllMessages(),e=!1,n=0;n<t.size();n++){var r=t.get(n);switch(r.getUpdateCommand()){case Module.BbWhiteboardUpdateCommand.Bb_WHITEBOARD_UPDATE_COMMAND_RESET:this.adapter.processReset(r.getPayload()),e=!0;break;case Module.BbWhiteboardUpdateCommand.Bb_WHITEBOARD_UPDATE_COMMAND_CLEAR:this.adapter.processClear();break;case Module.BbWhiteboardUpdateCommand.Bb_WHITEBOARD_UPDATE_COMMAND_POINTER:this.adapter.processPoint(r.getPayload());break;case Module.BbWhiteboardUpdateCommand.Bb_WHITEBOARD_UPDATE_COMMAND_DRAW:this.adapter.processDraw(r.getPayload()),e=!0;break;default:i.error("Unknown update command value:",r.getUpdateCommand())}r.delete()}e&&this.adapter.updatesComplete(),t.delete()}},t.prototype.handleConnected=function(){this.checkForNewMessages()},t.prototype.getParticipantUid=function(t,e){var n,i=t.getName();return r.isNil(i)||-1===i.indexOf("#")||(n=i.split("#")[1]),r.isNil(n)?e:n},t.prototype.connectionStateChanged=function(t,e){e===Module.BbClassroomConnectionState.Bb_CLASSROOM_CONNECTED_STATE.value&&this.handleConnected()},t.prototype.processParticipant=function(t,e){var n=this.classroom.getRoster().getParticipant(e);n&&n.isMe()&&(this.adapter.setMyId(this.getParticipantUid(n,e)),n.delete())},t.prototype.handlePresenceChange=function(t,e){var n=this.classroom.getRoster().getParticipant(e);if(n){var i=n.getAnnotationValueInt(Module.Bb_PARTICIPANT_PRESENCE_ANNOTATION);if(i===Module.BbParticipantPresence.Bb_PARTICIPANT_NO_CONNECTION.value||i===Module.BbParticipantPresence.Bb_PARTICIPANT_LEFT.value){var r=this.getParticipantUid(n,e);this.adapter.processParticipantExit(r)}n.delete()}},t.prototype.checkNotifications=function(){},t.prototype.setupListeners=function(){NotificationMgr.addSubscriber(Module.Bb_WHITEBOARD_MESSAGE_ARRIVED,this.checkForNewMessages,this),NotificationMgr.addSubscriber(Module.Bb_WHITEBOARD_NOTIFICATION_ARRIVED,this.checkNotifications,this),NotificationMgr.addSubscriber(Module.Bb_CLASSROOM_CONNECTION_STATE_CHANGED,this.connectionStateChanged,this),NotificationMgr.addSubscriber(Module.Bb_PARTICIPANT_JOINED,this.processParticipant,this),NotificationMgr.addSubscriber(Module.Bb_PARTICIPANT_PRESENCE_ANNOTATION_CHANGED,this.handlePresenceChange,this)},t}();e.WhiteboardACLMessaging=s},"../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-config.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("../../../../home/node/node_modules/lodash/lodash.js"),s=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/svg-loader.js"),o=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/img-loader.js"),a=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/loaders/url-loader.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js");e.SVG_STROKE_WIDTH=2,e.PAPER_STROKE_WIDTH=2,e.SVG_FONT_SIZE=16,e.PAPER_FONT_SIZE="12pt";var h={};e.opts=h,e.defaultOptions={uiCallback:null,urlCallback:null,disableHiDPI:null,disableSVGDOM:!1,disableXHR:!1,disableFade:!1,isRTL:!1,cacheSizeUrl:null,cacheSizeImg:null,cacheSizeSvg:null,cacheSizePdf:null,touchDuringSelect:!0,touchDuringPointer:!0,inputLabelNew:"Type new text on the whiteboard and press Enter. Press Escape to cancel.",inputLabelEdit:"Edit the text on the whiteboard and press Enter. Press Escape to cancel.",containerAriaLabel:"Shared content",disablePDF:!1,svgAnnotations:!1,touchDevice:null,minimumPdfWidth:1024,defaultWidth:1024,defaultHeight:576,strokeColor:"#157afb",fontFamily:"Arial",fontWeight:"normal"},e.initOpts=function(t){!function(t){r.isNumber(t.cacheSizeUrl)&&a.setCacheSize(e.opts.cacheSizeUrl),r.isNumber(t.cacheSizeImg)&&o.setCacheSize(e.opts.cacheSizeImg),r.isNumber(t.cacheSizeSvg)&&s.setCacheSize(e.opts.cacheSizeSvg)}(t);var n="function"==typeof t.urlCallback?t.urlCallback:null,u="object"==typeof t.uiCallback?t.uiCallback:null,c=null!==t.disableHiDPI?t.disableHiDPI:l.isMobileSafari();Object.assign(h,i({},e.defaultOptions,t,{urlCallback:n,uiCallback:u,disableHiDPI:c}))},e.strokeWidth=function(){return h.svgAnnotations?e.SVG_STROKE_WIDTH:e.PAPER_STROKE_WIDTH},e.fontSize=function(){return h.svgAnnotations?e.SVG_FONT_SIZE:e.PAPER_FONT_SIZE},e.enableTouchDevice=function(){return h.touchDevice=!0},e.toggleSVGAnnotations=function(t){return h.svgAnnotations=t},e.setStrokeColor=function(t){return h.strokeColor=t},e.getOptValue=function(t,n){return void 0===n&&(n=null),"strokeWidth"===t?e.strokeWidth():"fontSize"===t?e.fontSize():r.get(h,t,n)}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");Object.defineProperty(e,"__esModule",{value:!0});var i=n("../../../../home/node/node_modules/lodash/lodash.js"),r=!1,s=null,o=!1;function a(t){var e="";return i.forEach(t,(function(t){if(e.length&&(e+=" "),i.isObject(t)){var n="";try{n=""+t,e+=JSON.stringify(t)}catch(t){e+="(cannot stringify "+n+": "+t+")"}}else e+=t})),e}e.registerLogObject=function(t,e){void 0===e&&(e=!0),s=t,o=e},e.setInternalLogging=function(t){r=t},e.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(r){var n=["%c "+t[0],"background: #F2FA7C; color: #000000"];console.log.apply(console,n.concat(t.slice(1)))}s&&(o?s.log(a(t)):s.log.apply(s,t))},e.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(r){var n=["%c "+t[0],"background: #5EEE84; color: #000000"];console.info.apply(console,n.concat(t.slice(1)))}s&&(o?s.info(a(t)):s.info.apply(s,t))},e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(r){var n=["%c "+t[0],"background: #F2A54E; color: #000000"];console.warn.apply(console,n.concat(t.slice(1)))}s&&(o?s.warn(a(t)):s.warn.apply(s,t))},e.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(r){var n=["%c "+t[0],"background: #EC5151; color: #000000"];console.error.apply(console,n.concat(t.slice(1)))}s&&(o?s.error(a(t)):s.error.apply(s,t))},e.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(r){var n=["%c "+t[0],"background: #6FA0F6; color: #000000"];console.debug.apply(console,n.concat(t.slice(1)))}s&&(o?s.debug(a(t)):s.debug.apply(s,t))}},"../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-utils.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");function i(){return(null!==navigator.userAgent.match(/Safari/)||null!==navigator.userAgent.match(/AppleWebKit/))&&null===navigator.userAgent.match(/Chrome/)}Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnit=function(t){var e=[0,""];t=String(t);var n=parseFloat(t);return e[0]=n,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e},e.buttonAllowed=function(t,e){void 0===e&&(e=!1);var n=t;return n.event&&(n=n.event),n.which<=1&&(e||(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation()),!0)},e.isSafari=i,e.isMobileSafari=function(){return null!==navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&i()},e.hand_icon="M5.7 11c-.5-1.4-2-2-3.4-1.5s-2 1.9-1.6 3.3l3 7c.9 1.7 3.1 2.7 4.1 2.6h9.3c3.1 0 5.6-2.4 5.6-5.5v-5.3c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v-.9c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v.5-.4c0-1.2-.9-2.1-2-2.1H12c-1.2 0-2 1-2 2.2v.4-8c0-1.2-.9-2.1-2-2.1h-.2c-1.2 0-2 1-2 2.1v8.9"},"../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard.js":function(t,e,n){n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(o,a)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),n("../../../../home/node/node_modules/custom-event-polyfill/polyfill.js");var o=n("../../../../home/node/node_modules/jquery/dist/jquery.js-exposed"),a=n("../../../../home/node/node_modules/lodash/lodash.js"),l=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/content-sizer.js"),h=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-log.js"),u=n("../../../../home/node/node_modules/collab-js-whiteboard/dist/whiteboard-config.js"),c=function(){function t(){this.wbDom={outer:null,container:null,measureDiv:null},this.wbLayers={background:null,annotations:{}},this._toolsEnabled=!0,this._tool="none",this._mode="pencil",this._baseUrl="",this._contentSizer=l.ContentSizer.getNewInstance()}return t.prototype.teardown=function(){h.debug("Tearing down wb controller."),this._contentSizer&&this._contentSizer.teardown(),this.adapter&&this.adapter.initProcessor(void 0)},t.prototype.measureText=function(t,e){var n=this.wbDom.measureDiv.style,i=getComputedStyle(t);n.position="absolute",n.visibility="hidden",n["font-family"]=i["font-family"],n["font-size"]=i["font-size"],n["font-weight"]=i["font-weight"],this.wbDom.measureDiv.textContent=e.replace(/\s/g," ");var r=document.createElement("span");r.textContent=".",this.wbDom.measureDiv.appendChild(r);var s=r.offsetLeft;return this.wbDom.measureDiv.removeChild(r),s},t.prototype.init=function(t,e,n){this.adapter=t,u.initOpts(n);var i=o(e);this.isValidDOM(i)?(this.initWb(i),o(window).one("touchstart",(function(){return u.enableTouchDevice()}))):h.error("wbController: invalid DOM or already initialized")},t.prototype.isValidDOM=function(t){return 1===t.length&&0===t.find(".canvas_container_outer").length},t.prototype.initWb=function(t){return r(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return this.wbDom=this.initWbDom(t),e=this,[4,this.loadLayers()];case 1:return e.wbLayers=n.sent(),this.toggleActiveAnnotationClass(),this.initContentSizer(),this.allAnnotations().forEach((function(t){return t.redraw()})),this.adapter.initProcessor(this),this.uiCallback("wbReady"),[2]}}))}))},t.prototype.initWbDom=function(t){t.empty(),t.html('<div class="canvas_container_outer"><div class="canvas_container" role="region"></div></div>');var e=t.find(".canvas_container_outer"),n=t.find(".canvas_container");n.css({"touch-action":"none"}),n.attr("aria-label",u.getOptValue("containerAriaLabel"));var i=document.createElement("div");return i.id="wb_measurediv",i.style.visibility="hidden",i.style.position="absolute",n.get(0).appendChild(i),{outer:e,container:n,measureDiv:i}},t.prototype.sizeContents=function(t){this.wbLayers.background.size(t),this.allAnnotations().forEach((function(e){return e.size(t)}))},t.prototype.getMyId=function(){return a.toString(this.adapter.getMyId())},Object.defineProperty(t.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){this._baseUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opt",{get:function(){return u.opts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return u.getOptValue("fontFamily")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return u.getOptValue("fontSize")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return u.getOptValue("fontWeight")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeColor",{get:function(){return u.getOptValue("strokeColor")},set:function(t){u.setStrokeColor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return u.getOptValue("strokeWidth")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultWidth",{get:function(){return u.getOptValue("defaultWidth")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultHeight",{get:function(){return u.getOptValue("defaultHeight")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentSizer",{get:function(){return this._contentSizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolsEnabled",{get:function(){return this._toolsEnabled},set:function(t){this._toolsEnabled=t,this.setTool(this._tool,this._mode)},enumerable:!0,configurable:!0}),t.prototype.layerReady=function(t,e){this.allAnnotations().forEach((function(e){return e.setBackgroundSize(t)})),this._contentSizer.updateContentSize(t.width,t.height,!0),this._contentSizer.resetScroll(),this.uiCallback("backgroundUpdated",e)},t.prototype.layerError=function(t){this.uiCallback("backgroundError",t)},t.prototype.layerLoading=function(t){this.uiCallback("backgroundLoading",t)},t.prototype.setTool=function(t,e){this._tool=t,this._mode=e;var n=this.defaultAnnotationLayer().setTool(this._toolsEnabled,t,e);this._contentSizer.enableTouchEvents(n)},t.prototype.processUpdate=function(t){var e=this.getLayerForAction(t);this.isAnnotationLayerChangeRequired(e),h.info("wbController|processUpdate|"+e,JSON.stringify(t)),"background"===e?this.wbLayers.background.load(t):this.wbLayers.annotations[e].processUpdate(t)},t.prototype.getLayerForAction=function(t){var e=(t||{}).layer,n=void 0===e?"paper":e;return"background"===t.action&&(n="background"),"remove_pointer"===t.action&&(n=u.getOptValue("svgAnnotations")?"svg":"paper"),n},t.prototype.isAnnotationLayerChangeRequired=function(t){"svg"!==t||u.getOptValue("svgAnnotations")||(u.toggleSVGAnnotations(!0),this.toggleActiveAnnotationClass()),"paper"===t&&u.getOptValue("svgAnnotations")&&(u.toggleSVGAnnotations(!1),this.toggleActiveAnnotationClass())},t.prototype.clear=function(t){void 0===t&&(t=!0),this.allAnnotations().forEach((function(t){return t.clear()})),t&&this.allAnnotations().forEach((function(t){return t.redraw()}))},t.prototype.reset=function(t){void 0===t&&(t=!0),this.wbLayers.background.load({action:"background",reset:!0}),t&&this.allAnnotations().forEach((function(t){return t.redraw()}))},t.prototype.updatesComplete=function(){this.allAnnotations().forEach((function(t){return t.redraw()}))},t.prototype.send=function(t,e,n){this.adapter.send(t,e,n)},t.prototype.loadLayers=function(){return r(this,void 0,void 0,(function(){var t,e,i,r,o;return s(this,(function(s){switch(s.label){case 0:return[4,Promise.resolve().then((function(){return n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/background/background.js")}))];case 1:return t=s.sent(),e=t.getNewInstance(this,this.wbDom.container),this.shouldLoadSVGLayer()?[4,this.initAnnotationLayer("svg")]:[3,3];case 2:return r=s.sent(),[3,4];case 3:r=null,s.label=4;case 4:return i=r,this.shouldLoadPaperLayer()?[4,this.initAnnotationLayer("paper")]:[3,6];case 5:return o=s.sent(),[3,7];case 6:o=null,s.label=7;case 7:return[2,{background:e,annotations:{svg:i,paper:o}}]}}))}))},t.prototype.initContentSizer=function(){var t=this.defaultAnnotationLayer().maxHeight,e=this.defaultAnnotationLayer().maxWidth,n=this.defaultAnnotationLayer().eventObject,r=i({},u.opts,{maxHeight:t,maxWidth:e,sizeCallback:this});this._contentSizer.init(this.wbDom.outer,this.wbDom.container,n,r)},t.prototype.initAnnotationLayer=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return n("../../../../home/node/node_modules/collab-js-whiteboard/dist/layers/annotation sync recursive ^\\.\\/.*\\-layer$")("./"+t+"-layer")}))];case 1:return[2,e.sent().getNewInstance(this,this.wbDom.container)]}}))}))},t.prototype.defaultAnnotationLayer=function(){var t=u.getOptValue("svgAnnotations",!1)?"svg":"paper";return this.wbLayers.annotations[t]},t.prototype.toggleActiveAnnotationClass=function(){var t=u.getOptValue("svgAnnotations",!1)?"svg":"paper";this.wbDom.container.removeClass("paper").removeClass("svg").addClass(t)},t.prototype.allAnnotations=function(){return a.filter(a.values(this.wbLayers.annotations),(function(t){return!a.isNil(t)}))},t.prototype.shouldLoadPaperLayer=function(){return!u.getOptValue("svgAnnotations",!1)||u.getOptValue("svgPaperDualAnnotations",!1)},t.prototype.shouldLoadSVGLayer=function(){return u.getOptValue("svgAnnotations",!1)||u.getOptValue("svgPaperDualAnnotations",!1)},t.prototype.uiCallback=function(t,e){var n=a.get(u.opts,"uiCallback."+t);if("function"==typeof n)try{n(e)}catch(e){h.error("ui callback error "+t+": ",e)}},t.getNewInstance=function(){return new t},t}();e.Whiteboard=c},"../../../../home/node/node_modules/collab-js-whiteboard/node_modules/detect-browser/es/index.js":function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"BrowserInfo",(function(){return r})),n.d(e,"NodeInfo",(function(){return s})),n.d(e,"SearchBotDeviceInfo",(function(){return o})),n.d(e,"BotInfo",(function(){return a})),n.d(e,"ReactNativeInfo",(function(){return l})),n.d(e,"detect",(function(){return d})),n.d(e,"browserName",(function(){return p})),n.d(e,"parseUserAgent",(function(){return g})),n.d(e,"detectOS",(function(){return v})),n.d(e,"getNodeVersion",(function(){return m}));n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");var i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i},r=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform},o=function(t,e,n,i){this.name=t,this.version=e,this.os=n,this.bot=i,this.type="bot-device"},a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},h=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(t){return t?g(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!=typeof navigator?g(navigator.userAgent):m()}function f(t){return""!==t&&u.reduce((function(e,n){var i=n[0],r=n[1];if(e)return e;var s=r.exec(t);return!!s&&[i,s]}),!1)}function p(t){var e=f(t);return e?e[0]:null}function g(t){var e=f(t);if(!e)return null;var n=e[0],s=e[1];if("searchbot"===n)return new a;var l=s[1]&&s[1].split(/[._]/).slice(0,3);l?l.length<3&&(l=i(l,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-l.length))):l=[];var u=l.join("."),c=v(t),d=h.exec(t);return d&&d[1]?new o(n,u,c,d[1]):new r(n,u,c)}function v(t){for(var e=0,n=c.length;e<n;e++){var i=c[e],r=i[0];if(i[1].exec(t))return r}return null}function m(){return void 0!==t&&t.version?new s(t.version.slice(1)):null}}.call(this,n("../../../../home/node/node_modules/process/browser.js"))},"../../../../home/node/node_modules/collab-js-whiteboard/node_modules/hammerjs/hammer.js":function(t,e,n){var i;n("../../../../home/node/node_modules/css-element-queries/src/ResizeSensor.js");
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(r,s,o,a){"use strict";var l,h=["","webkit","Moz","MS","ms","o"],u=s.createElement("div"),c=Math.round,d=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(w(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function m(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,i,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var _=m((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),y=m((function(t,e){return _(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&l(i,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function S(t,e){return void 0===t?e:t}function A(t,e,n){v(T(e),(function(e){t.addEventListener(e,n,!1)}))}function P(t,e,n){v(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function k(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];E(r,o)<0&&i.push(t[s]),r[s]=o,s++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function O(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),s=0;s<h.length;){if((i=(n=h[s])?n+r:e)in t)return i;s++}}var j=1;function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var L="ontouchstart"in r,D=void 0!==O(r,"PointerEvent"),N=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],z=["clientX","clientY"];function q(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&n.handler(e)},this.init()}function B(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=1&e&&i-r==0,o=12&e&&i-r==0;n.isFirst=!!s,n.isFinal=!!o,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=U(e));r>1&&!n.firstMultiple?n.firstMultiple=U(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,a=o?o.center:s.center,l=e.center=W(i);e.timeStamp=f(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=G(a,l),e.distance=X(a,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=H(e.deltaX,e.deltaY);var h=V(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=d(h.x)>d(h.y)?h.x:h.y,e.scale=o?(u=o.pointers,c=i,X(c[0],c[1],z)/X(u[0],u[1],z)):1,e.rotation=o?function(t,e){return G(e[1],e[0],z)+G(t[1],t[0],z)}(o.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,s,o=t.lastInterval||e,a=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(a>25||void 0===o.velocity)){var l=e.deltaX-o.deltaX,h=e.deltaY-o.deltaY,u=V(a,l,h);i=u.x,r=u.y,n=d(u.x)>d(u.y)?u.x:u.y,s=H(l,h),t.lastInterval=e}else n=o.velocity,i=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}(n,e);var u,c;var p=t.element;C(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function U(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:c(n/e),y:c(i/e)}}function V(t,e,n){return{x:e/t||0,y:n/t||0}}function H(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function X(t,e,n){n||(n=F);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function G(t,e,n){n||(n=F);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}q.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(M(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function J(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,q.apply(this,arguments)}b(J,q,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:"touch",3:"pen",4:"mouse",5:"kinect"},K="pointerdown",$="pointermove pointerup pointercancel";function tt(){this.evEl=K,this.evWin=$,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(K="MSPointerDown",$="MSPointerMove MSPointerUp MSPointerCancel"),b(tt,q,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Z[i],s=Q[t.pointerType]||t.pointerType,o="touch"==s,a=E(e,t.pointerId,"pointerId");1&r&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&r&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(a,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function nt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,q.apply(this,arguments)}function it(t,e){var n=I(t.touches),i=I(t.changedTouches);return 12&e&&(n=R(n.concat(i),"identifier",!0)),[n,i]}b(nt,q,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var n=it.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function st(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},q.apply(this,arguments)}function ot(t,e){var n=I(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,o=I(t.changedTouches),a=[],l=this.target;if(s=n.filter((function(t){return C(t.target,l)})),1===e)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&a.push(o[r]),12&e&&delete i[o[r].identifier],r++;return a.length?[R(s.concat(a),"identifier",!0),a]:void 0}b(st,q,{handler:function(t){var e=rt[t.type],n=ot.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});function at(){q.apply(this,arguments);var t=w(this.handler,this);this.touch=new st(this.manager,t),this.mouse=new J(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function lt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ht.call(this,e)):12&t&&ht.call(this,e)}function ht(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function ut(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),o=Math.abs(n-r.y);if(s<=25&&o<=25)return!0}return!1}b(at,q,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)lt.call(this,e,n);else if(r&&ut.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=O(u.style,"touchAction"),dt=void 0!==ct,ft=function(){if(!dt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function pt(t,e){this.manager=t,this.set(e)}pt.prototype={set:function(t){"compute"==t&&(t=this.compute()),dt&&this.manager.element.style&&ft[t]&&(this.manager.element.style[ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(k(t,"none"))return"none";var e=k(t,"pan-x"),n=k(t,"pan-y");if(e&&n)return"none";if(e||n)return e?"pan-x":"pan-y";if(k(t,"manipulation"))return"manipulation";return"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=k(i,"none")&&!ft.none,s=k(i,"pan-y")&&!ft["pan-y"],o=k(i,"pan-x")&&!ft["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,h=t.deltaTime<250;if(a&&l&&h)return}if(!o||!s)return r||s&&6&n||o&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function gt(t){this.options=l({},this.defaults,t||{}),this.id=j++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function vt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function mt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function _t(t,e){var n=e.manager;return n?n.get(t):t}function yt(){gt.apply(this,arguments)}function bt(){yt.apply(this,arguments),this.pX=null,this.pY=null}function wt(){yt.apply(this,arguments)}function xt(){gt.apply(this,arguments),this._timer=null,this._input=null}function St(){yt.apply(this,arguments)}function At(){yt.apply(this,arguments)}function Pt(){gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ct(t,e){return(e=e||{}).recognizers=S(e.recognizers,Ct.defaults.preset),new kt(t,e)}gt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=_t(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=_t(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=_t(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=_t(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+vt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+vt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(yt,gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:32}}),b(bt,yt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(6&e.direction?(r=0===s?1:s<0?2:4,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===o?1:o<0?8:16,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return yt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=mt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(wt,yt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(xt,gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(St,yt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(At,yt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return bt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=mt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Pt,gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ct.VERSION="2.0.7",Ct.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[St,{enable:!1}],[wt,{enable:!1},["rotate"]],[At,{direction:6}],[bt,{direction:6},["swipe"]],[Pt],[Pt,{event:"doubletap",taps:2},["tap"]],[xt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function kt(t,e){var n;this.options=l({},Ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(D?tt:N?st:L?at:J))(n,B),this.touchAction=new pt(this,this.options.touchAction),Tt(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Tt(t,e){var n,i=t.element;i.style&&(v(t.options.cssProps,(function(r,s){n=O(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}kt.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof gt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return v(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return v(T(t),(function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&Tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ct,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:kt,Input:q,TouchAction:pt,TouchInput:st,MouseInput:J,PointerEventInput:tt,TouchMouseInput:at,SingleTouchInput:nt,Recognizer:gt,AttrRecognizer:yt,Tap:Pt,Pan:bt,Swipe:At,Pinch:wt,Rotate:St,Press:xt,on:A,off:P,each:v,merge:y,extend:_,assign:l,inherit:b,bindFn:w,prefixed:O}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Ct,void 0===(i=function(){return Ct}.call(e,n,e,t))||(t.exports=i)}(window,document)},"../../../../home/node/node_modules/paper/dist/paper-full.js":function(t,e,n){var i,r,s=function(o,a){var l=o?o.window:n(14),h=l&&l.document;o=o||l;var u=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[].forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},n=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},i=Object.create||function(t){return{__proto__:t}},r=Object.getOwnPropertyDescriptor||function(t,e){var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null},s=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},o=function(t,e,n){return delete t[e],s(t,e,n)};function l(e,n,i,s,a){var l={};function h(t,h){"string"==typeof(h=h||(h=r(n,t))&&(h.get?h:h.value))&&"#"===h[0]&&(h=e[h.substring(1)]||h);var c,d="function"==typeof h,f=h,p=a||d&&!h.base?h&&h.get?t in e:e[t]:null;a&&p||(d&&p&&(h.base=p),d&&!1!==s&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&u.isPlainObject(f)||(f={value:f,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=i),o(e,t,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&h(c);for(var c in l){var d=l[c],f=e["set"+d],p=e["get"+d]||f&&e["is"+d];!p||!0!==s&&0!==p.length||h(c,{get:p,set:f})}}return e}function h(t,i,r){return t&&("length"in t&&!t.getLength&&"number"==typeof t.length?e:n).call(t,i,r=r||t),r}function c(t,e,n){for(var i=n,r=e.length;i<r;i++){var s=e[i];for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])}return t}return l((function(){c(this,arguments,0)}),{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&l(this.prototype,t,t.enumerable,n,i),l(this,e,!0,n,i)}for(var r=1,s=arguments.length;r<s;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,r=this,s=0,a=arguments.length;s<a&&(!t||!e);s++)n=arguments[s],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){r.apply(this,arguments)}).prototype=e||i(this.prototype),o(e,"constructor",{value:t,writable:!0,configurable:!0}),l(t,this,!0),arguments.length&&this.inject.apply(t,arguments),t.base=r,t}},!0).inject({inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=i(this);return t.inject.apply(t,arguments)},each:function(t,e){return h(this,t,e)},set:function(){return c(this,arguments,0)},clone:function(){return new this.constructor(this)},statics:{each:h,create:i,define:o,describe:r,set:function(t){return c(t,arguments,1)},clone:function(t){return c(new t.constructor,arguments,0)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===u||"Object"===e.name)},pick:function(t,e){return t!==a?t:e}}})};t.exports=u,u.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+u.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?p.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return u.importJSON(t,this)},exportJSON:function(t){return u.exportJSON(this,t)},toJSON:function(){return u.serialize(this)},_set:function(t){if(t&&u.isPlainObject(t))return u.filter(this,t)},statics:{exports:{enumerable:!0},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!u.exports[n]&&(u.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!u.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!u.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===u){var r=this.peek(t,e);return t.__index++,r}var s=this.prototype._readIndex,o=e||s&&t.__index||0;i||(i=t.length-o);var l=t[o];return l instanceof this||n&&n.readNull&&null==l&&i<=1?(s&&(t.__index=o+1),l&&n&&n.clone?l.clone():l):(l=u.create(this.prototype),s&&(l.__read=!0),l=l.initialize.apply(l,o>0||i<t.length?Array.prototype.slice.call(t,o,o+i):t)||l,s&&(t.__index=o+l.__read,l.__read=a),l)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readAll:function(t,e,n){for(var i,r=[],s=e||0,o=t.length;s<o;s++)r.push(Array.isArray(i=t[s])?this.read(i,0,n):this.read(t,s,n,1));return r},readNamed:function(t,e,n,i,r){var s=this.getNamed(t,e),o=s!==a;if(o){var l=t._filtered;l||((l=t._filtered=u.create(t[0]))._filtering=t[0]),l[e]=a}return this.read(o?[s]:t,n,i,r)},getNamed:function(t,e){var n=t[0];if(t._hasObject===a&&(t._hasObject=1===t.length&&u.isPlainObject(n)),t._hasObject)return e?n[e]:t._filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n){for(var i=Object.keys(e._filtering||e),r=0,s=i.length;r<s;r++){var o=i[r];if(!n||!n[o]){var l=e[o];l!==a&&(t[o]=l)}}return t},isPlainValue:function(t,e){return this.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new p(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!s&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var a=0,l=t.length;a<l;a++)r[a]=u.serialize(t[a],e,n,i)}else if(u.isPlainObject(t)){r={};var h=Object.keys(t);for(a=0,l=h.length;a<l;a++){var c=h[a];r[c]=u.serialize(t[c],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var s=t,o=!n,a=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],h="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];s=[];for(var c=(l=u.exports[l])?1:0,d=t.length;c<d;c++)s.push(u.deserialize(t[c],e,n,h,a));if(l){var f=s;e?s=e(l,f,o||r):(s=u.create(l.prototype),l.apply(s,f))}}else if(u.isPlainObject(t))for(var p in s={},i&&(n.dictionary=s),t)s[p]=u.deserialize(t[p],e,n);return a?s[1]:s},exportJSON:function(t,e){var n=u.serialize(t,e);return e&&!1===e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return u.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,i){var r=i&&e&&e.constructor===t,s=r?e:u.create(t.prototype);if(1===n.length&&s instanceof C&&(r||!(s instanceof T))){var o=n[0];u.isPlainObject(o)&&(o.insert=!1)}return(r?s._set:t).apply(s,n),r&&(e=null),s}))},splice:function(t,e,n,i){var r=e&&e.length,s=n===a;(n=s?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(s)return t.push.apply(t,e),[];var l=[n,i];e&&l.push.apply(l,e);for(var h=t.splice.apply(t,l),u=(o=0,h.length);o<u;o++)h[o]._index=a;for(o=n+r,u=t.length;o<u;o++)t[o]._index=o;return h},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={on:function(t,e){if("string"!=typeof t)u.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}u.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function(){e.apply(this,arguments),this.off(t,e)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=[].slice.call(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(!1===n[s].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],o=s&&s[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};u.each(n,(function(t,n){var r="string"==typeof t,s=r?t:n,o=u.capitalize(s),a=s.substring(2).toLowerCase();i[a]=r?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(a,e),t&&this.on(a,t),this[s]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},d=u.extend({_class:"PaperScope",initialize:function t(){s=this,this.settings=new u({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=ot.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:at.nativeModes},ot.release(n)}if(!this.agent){var i=o.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],a="darwin"===r?"mac":r,l=e.agent=e.browser={platform:a};a&&(l[a]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,i,r){if(!l.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;l.version=s,l.versionNumber=parseFloat(s),e="trident"===e?"msie":e,l.name=e,l[e]=!0}})),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.10.2",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){s.PaperScript.execute(t,this,e),Q.updateFocus()},install:function(t){var e=this;for(var n in u.each(["project","view","tool"],(function(n){u.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return s=this,this.project=new P(t),this},createCanvas:function(t,e){return ot.getCanvas(t,e)},activate:function(){s=this},clear:function(){for(var t=this.projects,e=this.tools,n=this.palettes,i=t.length-1;i>=0;i--)t[i].remove();for(i=e.length-1;i>=0;i--)e[i].remove();for(i=n.length-1;i>=0;i--)n[i].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),f=u.extend(c,{initialize:function(t){this._scope=s,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(u.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p=u.extend({initialize:function(t){this.precision=u.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});p.instance=new p;var g=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function a(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var s=e*e-t*i,o=e*e+t*i;if(3*n(s)<o){var a=r(t),l=r(e),h=r(i),u=e*e,c=t*i;s=u-c+(l[0]*l[0]-u+2*l[0]*l[1]+l[1]*l[1]-(a[0]*h[0]-c+a[0]*h[1]+a[1]*h[0]+a[1]*h[1]))}return s}function l(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(s(t))):0}return{TOLERANCE:1e-6,EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-9,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:o,integrate:function(n,i,r,s){for(var o=t[s-2],a=e[s-2],l=.5*(r-i),h=l+i,u=0,c=s+1>>1,d=1&s?a[u++]*n(h):0;u<c;){var f=l*o[u];d+=a[u++]*(n(h+f)+n(h-f))}return l*d},findRoot:function(t,e,i,r,s,o,a){for(var l=0;l<o;l++){var h=t(i),u=h/e(i),c=i-u;if(n(u)<a)return c;h>0?(s=i,i=c<=r?.5*(r+s):c):(r=i,i=c>=s?.5*(r+s):c)}return i},solveQuadratic:function(t,e,r,s,h,u){var c,d=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(r)<1e-12?-1:0;c=-r/e}else{var f=a(t,e*=-.5,r);if(f&&n(f)<112e-18){var p=l(n(t),n(e),n(r));p&&(f=a(t*=p,e*=p,r*=p))}if(f>=-112e-18){var g=f<0?0:i(f),v=e+(e<0?-g:g);0===v?d=-(c=r/t):(c=v/t,d=r/v)}}var m=0,_=null==h,y=h-1e-12,b=u+1e-12;return isFinite(c)&&(_||c>y&&c<b)&&(s[m++]=_?c:o(c,h,u)),d!==c&&isFinite(d)&&(_||d>y&&d<b)&&(s[m++]=_?d:o(d,h,u)),m},solveCubic:function(t,e,s,a,h,u,c){var d,f,p,v,m,_=l(n(t),n(e),n(s),n(a));function y(n){var i=t*(d=n);v=(i+(f=i+e))*d+(p=f*d+s),m=p*d+a}if(_&&(t*=_,e*=_,s*=_,a*=_),n(t)<1e-12)t=e,f=s,p=a,d=1/0;else if(n(a)<1e-12)f=e,p=s,d=0;else{y(-e/t/3);var b=m/t,w=r(n(b),1/3),x=b<0?-1:1,S=-v/t,A=S>0?1.324717957244746*Math.max(w,i(S)):w,P=d-x*A;if(P!==d){do{y(P),P=0===v?d:d-m/v/(1+112e-18)}while(x*P>x*d);n(t)*d*d>n(a/d)&&(f=((p=-a/d)-s)/d)}}var C=g.solveQuadratic(t,f,p,h,u,c),k=null==u;return isFinite(d)&&(0===C||C>0&&d!==h[0]&&d!==h[1])&&(k||d>u-1e-12&&d<c+1e-12)&&(h[C++]=k?d:o(d,u,c)),C}}},v={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},m=u.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.x=t,this.y=i?e:t,this.__read&&(this.__read=i?2:1)}else if("undefined"===n||null===t)this.x=this.y=0,this.__read&&(this.__read=null===t?1:0);else{var r="string"===n?t.split(/[\s,]+/)||[]:t;Array.isArray(r)?(this.x=r[0],this.y=r.length>1?r[1]:r[0]):"x"in r?(this.x=r.x,this.y=r.y):"width"in r?(this.x=r.width,this.y=r.height):"angle"in r?(this.x=r.length,this.y=0,this.setAngle(r.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new m(this.x,this.y)},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();g.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=m.read(arguments),e=this.getLength()*t.getLength();if(g.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=m.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=m.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n,r=u.read(arguments);return r?i:Math.sqrt(i)},normalize:function(t){t===a&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new m(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new m(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=m.read(arguments);return new m(this.x+t.x,this.y+t.y)},subtract:function(){var t=m.read(arguments);return new m(this.x-t.x,this.y-t.y)},multiply:function(){var t=m.read(arguments);return new m(this.x*t.x,this.y*t.y)},divide:function(){var t=m.read(arguments);return new m(this.x/t.x,this.y/t.y)},modulo:function(){var t=m.read(arguments);return new m(this.x%t.x,this.y%t.y)},negate:function(){return new m(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=m.read(arguments),e=u.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=m.read(arguments);return m.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=m.read(arguments);return m.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){return g.isZero(this.x)&&g.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var t=m.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=m.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=m.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new m(t.x*e,t.y*e)},statics:{min:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new m(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},u.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new m(e(this.x),e(this.y))}}),{})),_=m.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),y=u.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this.__read&&(this.__read=i?2:1)}else if("undefined"===n||null===t)this.width=this.height=0,this.__read&&(this.__read=null===t?1:0);else{var r="string"===n?t.split(/[\s,]+/)||[]:t;Array.isArray(r)?(this.width=r[0],this.height=r.length>1?r[1]:r[0]):"width"in r?(this.width=r.width,this.height=r.height):"x"in r?(this.width=r.x,this.height=r.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new y(this.width,this.height)},toString:function(){var t=p.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=y.read(arguments);return new y(this.width+t.width,this.height+t.height)},subtract:function(){var t=y.read(arguments);return new y(this.width-t.width,this.height-t.height)},multiply:function(){var t=y.read(arguments);return new y(this.width*t.width,this.height*t.height)},divide:function(){var t=y.read(arguments);return new y(this.width/t.width,this.height/t.height)},modulo:function(){var t=y.read(arguments);return new y(this.width%t.width,this.height%t.height)},negate:function(){return new y(-this.width,-this.height)},isZero:function(){return g.isZero(this.width)&&g.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new y(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new y(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new y(Math.random(),Math.random())}}},u.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new y(e(this.width),e(this.height))}}),{})),b=y.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=u.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r=typeof t,s=0;if("number"===r?(this.x=t,this.y=e,this.width=n,this.height=i,s=4):"undefined"===r||null===t?(this.x=this.y=this.width=this.height=0,s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],s=1):t.x!==a||t.width!==a?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,s=1):t.from===a&&t.to===a&&(this.x=this.y=this.width=this.height=0,this._set(t),s=1)),!s){var o=m.readNamed(arguments,"from"),l=u.peek(arguments);if(this.x=o.x,this.y=o.y,l&&l.x!==a||u.hasNamed(arguments,"to")){var h=m.readNamed(arguments,"to");this.width=h.x-o.x,this.height=h.y-o.y,this.width<0&&(this.x=h.x,this.width=-this.width),this.height<0&&(this.y=h.y,this.height=-this.height)}else{var c=y.read(arguments);this.width=c.width,this.height=c.height}s=arguments.__index}this.__read&&(this.__read=s)},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=u.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?m:_)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?y:b)(this.width,this.height,this,"setSize")},setSize:function(){var t=y.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){this._fixX!==a&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){this._fixY!==a&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){return new(t?m:_)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=m.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==a||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(m.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=w.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},include:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new w(e,n,i-e,r-n)},expand:function(){var t=y.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===a?t:e)-this.height)}},u.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,l="set"+r,h="set"+s,u="set"+n;this["get"+n]=function(t){return new(t?m:_)(this[o](),this[a](),this,u)},this[u]=function(){var t=m.read(arguments);this[l](t.x),this[h](t.y)}}),{beans:!0})),x=w.extend({initialize:function(t,e,n,i,r,s){this.set(t,e,n,i,!0),this._owner=r,this._setter=s},set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return u.each(["x","y","width","height"],(function(t){var e=u.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),u.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e.changeSelection&&e.changeSelection(2,t)}}))}),S=u.extend({_class:"Matrix",initialize:function t(e){var n=arguments.length,i=!0;if(6===n?this.set.apply(this,arguments):1===n?e instanceof t?this.set(e._a,e._b,e._c,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):i=!1:0===n?this.reset():i=!1,!i)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,s,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t,e){return u.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=p.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,u.pick(t,!0),e),this.isIdentity())},translate:function(){var t=m.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=m.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,l=this._a,h=this._b,u=this._c,c=this._d;return this._a=r*l+s*u,this._b=r*h+s*c,this._c=-s*l+r*u,this._d=-s*h+r*c,this._tx+=o*l+a*u,this._ty+=o*h+a*c,this._changed(),this},shear:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new m(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=t._a,o=t._c,a=t._b,l=t._d,h=t._tx,u=t._ty;this._a=s*e+a*i,this._c=o*e+l*i,this._b=s*n+a*r,this._d=o*n+l*r,this._tx+=h*e+u*i,this._ty+=h*n+u*r,this._changed()}return this},prepend:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty,a=t._a,l=t._c,h=t._b,u=t._d,c=t._tx,d=t._ty;this._a=a*e+l*n,this._c=a*i+l*r,this._b=h*e+u*n,this._d=h*i+u*r,this._tx=a*s+l*o+c,this._ty=h*s+u*o+d,this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,o=t*i-e*n,a=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(s)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*s-i*r)/o,this._ty=(e*r-t*s)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(m.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new m),e.set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],o=t[i+1];e[i]=s*this._a+o*this._c+this._tx,e[i+1]=s*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),o=2;o<8;o++){var a=i[o],l=1&o;a<r[l]?r[l]=a:a>s[l]&&(s[l]=a)}return e||(e=new w),e.set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(m.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,o=this._d,a=this._tx,l=this._ty,h=i*o-r*s,u=null;if(h&&!isNaN(h)&&isFinite(a)&&isFinite(l)){var c=t.x-this._tx,d=t.y-this._ty;e||(e=new m),u=e.set((c*o-d*s)/h,(d*i-c*r)/h,n)}return u},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,o=this._d,a=i*o-r*s,l=Math.sqrt,h=Math.atan2,u=180/Math.PI;if(0!==i||0!==r){var c=l(i*i+r*r);t=Math.acos(i/c)*(r>0?1:-1),e=[c,a/c],n=[h(i*s+r*o,c*c),0]}else if(0!==s||0!==o){var d=l(s*s+o*o);t=Math.asin(s/d)*(o>0?1:-1),e=[a/d,d],n=[0,h(i*s+r*o,d*d)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*u,scaling:new m(e),skewing:new m(n[0]*u,n[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new m(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},u.each(["a","b","c","d","tx","ty"],(function(t){var e=u.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),A=u.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new m(this._px,this._py)},getVector:function(){return new m(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return A.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return A.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(A.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return m.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return m.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,o,a,l,h){l||(n-=t,i-=e,o-=r,a-=s);var u=n*a-i*o;if(!g.isZero(u)){var c=t-r,d=e-s,f=(o*d-a*c)/u,p=(n*d-i*c)/u;if(h||-1e-12<f&&f<1+1e-12&&-1e-12<p&&p<1+1e-12)return h||(f=f<=0?0:f>=1?1:f),new m(t+f*n,e+f*i)}},getSide:function(t,e,n,i,r,s,o,a){o||(n-=t,i-=e);var l=r-t,h=l*i-(s-e)*n;return 0!==h||a||(h=(l*n+l*n)/(n*n+i*i))>=0&&h<=1&&(h=0),h<0?-1:h>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)}}}),P=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=Q.create(this,t||ot.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return u.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,o=r[s];o?o.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return 0===this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new T({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:R,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(a,t)},insertLayer:function(t,e){if(e instanceof T){e._remove(!1,!0),u.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(a,new T(C.NO_INSERT),!0,!0)).insertChild(t,e,n),i&&e.activate&&e.activate(),e},getItems:function(t){return C._getItems(this,t)},getItem:function(t){return C._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return u.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var o=e[s];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new u({offset:new m(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),s=0,o=i.length;s<o;s++)i[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var a=this._selectionItems,l=this._scope.settings.handleSize,h=this._updateVersion;for(var c in a)a[c]._drawSelection(t,e,l,a,h);t.restore()}}}),C=u.extend(c,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=u.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}}},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return u.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&u.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new S,o=n&&t.project||s.project,l=s.settings;return this._id=i?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Y(o._currentStyle,this,o),i||n&&!1===t.insert||!l.insertItems&&(!n||!0!==t.insert)?this._setProject(o):(n&&t.parent||o)._insertItem(a,this,!0,!0),n&&t!==C.NO_INSERT&&u.filter(this,t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function r(r){for(var s in r){var o=i[s];u.equals(o,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=u.serialize(o,t,"data"!==s,e))}}return r(this._serializeFields),this instanceof k||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=a),n&&40&t&&C._clearBoundsCache(n),2&t&&C._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||a,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},u.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=u.capitalize(t);t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this.changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this.changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?m:_;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(m.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(t){var e=this._pivot;e&&(e=new(t?m:_)(e.x,e.y,this,"setPivot"));return e},setPivot:function(){this._pivot=m.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},u.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,i=u.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i);return 0===arguments.length?new x(r.x,r.y,r.width,r.height,this,"setBounds"):r},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,i=new S,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.initialize(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&0!==n.length?(C._updateBoundsCache(this,e.cacheItem),C._getBounds(n,t,e)):new w},_getCachedBounds:function(t,e){t=t&&t._orNullIfIdentity();var n=e.internal,i=e.cacheItem,r=n?null:this._matrix._orNullIfIdentity(),s=i&&(!t||t.equals(r))&&[e.stroke?1:0,e.handle?1:0,n?1:0].join("");if(C._updateBoundsCache(this._parent||this._symbol,i),s&&this._bounds&&s in this._bounds)return this._bounds[s].rect.clone();var o=this._getBounds(t||r,e);if(s){this._bounds||(this._bounds={});this._bounds[s]={rect:o.clone(),internal:e.internal}}return o},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=a;for(var n=0,i=e.list,r=i.length;n<r;n++){var s=i[n];s!==t&&(s._bounds=s._position=a,s._boundsCache&&C._clearBoundsCache(s))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,o=r;n=n||{};for(var a=0,l=t.length;a<l;a++){var h=t[a];if(h._visible&&!h.isEmpty()){var u=h._getCachedBounds(e&&e.appended(h._matrix),n);i=Math.min(u.x,i),s=Math.min(u.y,s),r=Math.max(u.x+u.width,r),o=Math.max(u.y+u.height,o)}}return isFinite(i)?new w(i,s,r-i,o-s):new w}}}),{beans:!0,_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(t){var e=this._decompose(),n=e&&e.scaling;return n&&new(t?m:_)(n.x,n.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=m.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof T)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t,e){this.removeChildren(),this.addChildren(t,e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return u.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(C.NO_INSERT),n=this._children,i=u.pick(t?t.insert:a,t===a||!0===t),r=u.pick(t?t.deep:a,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var s=this._name,o=this._parent;if(s&&o){n=o._children;for(var l=s,h=1;n[s];)s=l+" "+h++;s!==l&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.initialize(t._matrix),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,a=t._name;this._data=o?u.clone(o):null,a&&this.setName(a)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),s=n.getBottomRight().ceil(),o=new y(s.subtract(r)),l=new I(C.NO_INSERT);if(!o.isZero()){var h=ot.getCanvas(o.multiply(i)),c=h.getContext("2d"),d=(new S).scale(i).translate(r.negate());c.save(),d.applyToContext(c),this.draw(c,new u({matrices:[d]})),c.restore(),l.setCanvas(h)}return l.transform((new S).translate(r.add(o.divide(2))).scale(1/i)),(e===a||e)&&l.insertAbove(this),l},contains:function(){return!!this._contains(this._matrix._inverseTransform(m.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new z.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(m.read(arguments),j.getOptions(arguments))}function e(){var t=m.read(arguments),e=j.getOptions(arguments),n=e.match,i=[];return e=u.set({},e,{match:function(t){n&&!n(t)||i.push(t)}}),this._hitTest(t,e),i}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o!==i&&o._hitTest(t,e,n);if(a)return a}return null}return P.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),s=this.getStrokeScaling()?null:r.inverted()._shiftless(),o=Math.max(e.tolerance,1e-6),a=e._tolerancePadding=new y(z._getStrokePadding(o,s));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(a.multiply(2))._containsPoint(t))return null;var l,h,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==u.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,f=this;function p(t){return!d||t&&d(t)?t:null}function g(e,n){var i=l["get"+n]();if(t.subtract(i).divide(a).length<=1)return new j(e,f,{name:u.hyphenate(n),point:i})}if(c&&(e.center||e.bounds)&&this._parent){if(l=this.getInternalBounds(),e.center&&(h=g("center","Center")),!h&&e.bounds)for(var v=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],m=0;m<8&&!h;m++)h=g("bounds",v[m]);h=p(h)}return h||(h=this._hitTestChildren(t,e,r)||c&&p(this._hitTestSelf(t,e,r,s))||null),h&&h.point&&(h.point=i.transform(h.point)),h},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new j("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+u.capitalize(t)]():"type"===t?u.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(u.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],s=n[i];if(u.isPlainObject(r)&&u.isPlainObject(s)){if(!t(r,s))return!1}else if(!u.equals(r,s))return!1}return!0}(e,r)}return u.equals(r,e)},getItems:function(t){return C._getItems(this,t,this._matrix)},getItem:function(t){return C._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,s){if(!r){var o="object"==typeof n&&n,a=o&&o.overlapping,l=o&&o.inside,h=(_=a||l)&&w.read([_]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!l,overlapping:!!a,rect:h,path:a&&new z.Rectangle({rectangle:h,insert:!1})},o&&(n=u.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var c=e._children,d=r.items;i=(h=r.rect)&&(i||new S);for(var f=0,p=c&&c.length;f<p;f++){var g=c[f],v=i&&i.appended(g._matrix),m=!0;if(h){var _=g.getBounds(v);if(!h.intersects(_))continue;h.contains(_)||r.overlapping&&(_.contains(h)||r.path.intersects(g,v))||(m=!1)}if(m&&g.matches(n)&&(d.push(g),s))break;if(!1!==r.recursive&&t(g,n,v,r,s),s&&d.length>0)break}return d}}},{importJSON:function(t){var e=u.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t,e){return this.insertChild(a,t,e)},insertChild:function(t,e,n){var i=e?this.insertChildren(t,[e],n):null;return i&&i[0]},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,n,i){var r=this._children;if(r&&e&&e.length>0){for(var s=(e=Array.prototype.slice.apply(e)).length-1;s>=0;s--){(h=e[s])&&(!i||h instanceof i)?h._remove(!1,!0):e.splice(s,1)}u.splice(r,e,t,0);for(var o=this._project,a=o._changes,l=(s=0,e.length);s<l;s++){var h,c=(h=e[s])._name;h._parent=this,h._setProject(o,!0),c&&h.setName(c),a&&this._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e,n){var i=this;if(i!==t){var r=t&&t._getOwner();r?(i._remove(!1,!0),r._insertItem(t._index+e,i,n)):i=null}return i},insertAbove:function(t,e){return this._insertAt(t,1,e)},insertBelow:function(t,e){return this._insertAt(t,0,e)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(t){return t._insertItem(a,this.clone(!1))},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return!!n&&(null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),u.splice(n._children,null,r,1)),this._name&&this._removeNamed(),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=u.pick(e,this._children.length);for(var n=u.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},u.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?u:m).read(arguments),i=m.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getPosition(!0)))}}),{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,s=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);if(!t&&!s)return this;if(t&&(!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t)),s=s&&this._transformContent(r,n,i)){var o=this._pivot,a=this._style,l=a.getFillColor(!0),h=a.getStrokeColor(!0);o&&r._transformPoint(o,o,!0),l&&l.transform(r),h&&h.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var u=this._bounds,c=this._position;this._changed(9);var d=u&&t&&t.decompose();if(d&&!d.shearing&&d.rotation%90==0){for(var f in u){var p=u[f];if(s||!p.internal){var g=p.rect;t._transformBounds(g,g)}}var v=this._boundsGetter;(g=u[v&&v.getBounds||v||"getBounds"])&&(this._position=g.getCenter(!0)),this._bounds=u}else t&&c&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(m.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(m.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(m.read(arguments))},localToParent:function(){return this._matrix._transformPoint(m.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new w(new m,new y(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t),t.lineWidth=i.getStrokeWidth();var r=i.getStrokeJoin(),o=i.getStrokeCap(),a=i.getMiterLimit();if(r&&(t.lineJoin=r),o&&(t.lineCap=o),a&&(t.miterLimit=a),s.support.nativeDash){var l=i.getDashArray(),h=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=h):(t.mozDash=l,t.mozDashOffset=h))}}if(i.hasShadow()){var u=e.pixelRatio||1,c=n._shiftless().prepend((new S).scale(u,u)),d=c.transform(new m(i.getShadowBlur(),0)),f=c.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}},draw:function(t,e,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,o=this._matrix,a=r[r.length-1].appended(o);if(a.isInvertible()){s=s?s.appended(a):a,r.push(a),e.updateMatrix&&(a._updateVersion=i,this._globalMatrix=a);var l,h,u,c=this._blendMode,d=this._opacity,f="normal"===c,p=at.nativeModes[c],g=f&&1===d||e.dontStart||e.clip||(p||f&&d<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var m=this.getStrokeBounds(s);if(!m.width||!m.height)return;u=e.offset,h=e.offset=m.getTopLeft().floor(),l=t,t=ot.getContext(m.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var _=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!g&&e.clipItem,b=!_||y;if(g?(t.globalAlpha=d,p&&(t.globalCompositeOperation=c)):b&&t.translate(-h.x,-h.y),b&&(g?o:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),_){t.setTransform(v,0,0,v,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,s,_),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(at.process(c,t,l,d,h.subtract(u).multiply(v)),ot.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof q)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,o=1&s,a=2&s||o&&this._selectBounds,l=4&s;if(this._drawSelected||(o=!1),(o||a||l)&&this._isUpdated(r)){var h,u=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),d=n/2;if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,c,i),l){var f=this.getPosition(!0),p=f.x,g=f.y;t.beginPath(),t.arc(p,g,d,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],m=d,_=n+1,y=0;y<4;y++){var b=v[y],w=b[0],x=b[1];t.moveTo(p+w*m,g+x*m),t.lineTo(p+w*_,g+x*_),t.stroke()}}if(a){var S=c._transformCorners(this.getInternalBounds());t.beginPath();for(y=0;y<8;y++)t[0===y?"moveTo":"lineTo"](S[y],S[++y]);t.closePath(),t.stroke();for(y=0;y<8;y++)t.fillRect(S[y]-d,S[++y]-d,n,n)}}},_canComposite:function(){return!1}},u.each(["down","drag","up","move"],(function(t){this["removeOn"+u.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),k=C.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=a)},_getClipItem:function(){var t=this._clipItem;if(t===a){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(e&&e.appended(i._matrix),u.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,o=r.length;s<o;s++){var a=r[s];a!==i&&a.draw(t,e)}}}),T=k.extend({_class:"Layer",initialize:function(){k.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),E=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&u.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new b(t.width,t.height,this,"setSize")},setSize:function(){var t=y.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;if("rectangle"===e){var r=y.min(this._radius,t.divide(2));this._radius.set(r.width,r.height)}else"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius.set(n/2,i/2);this._size.set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new b(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size.set(n,n)}else if(t=y.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t.width,t.height),"rectangle"===e){n=y.max(this._size,t.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===e&&this._size.set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(z[u.capitalize(this._type)])({center:new m,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),s.settings.applyMatrix&&e.setApplyMatrix(!0),(t===a||t)&&e.insertAbove(this),e},toShape:"#clone",_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),o=r.hasStroke(),a=e.dontFinish||e.clip,l=!i;if(s||o||a){var h=this._type,u=this._radius,c="circle"===h;if(e.dontStart||t.beginPath(),l&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,f=c?u:u.height,p=this._size,g=p.width,v=p.height;if(l&&"rectangle"===h&&0===d&&0===f)t.rect(-g/2,-v/2,g,v);else{var m=g/2,_=v/2,y=.44771525016920644,b=d*y,w=f*y,x=[-m,-_+f,-m,-_+w,-m+b,-_,-m+d,-_,m-d,-_,m-b,-_,m,-_+w,m,-_+f,m,_-f,m,_-w,m-b,_,m-d,_,-m+d,_,-m+b,_,-m,_-w,-m,_-f];i&&i.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),m!==d&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),_!==f&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),m!==d&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}a||!s&&!o||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(z._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=0;s<4;s++){var o=new m(1&s?1:-1,s>1?1:-1),a=o.multiply(r),l=a.subtract(o.multiply(i)),h=new w(a,l);if((n?h.expand(n):h).contains(e))return l}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.quadrant===i)&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,o){var a=!1,l=this._style,h=r.stroke&&l.hasStroke(),u=r.fill&&l.hasFill();if(h||u){var c=this._type,d=this._radius,f=h?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(z._getStrokePadding(f,!l.getStrokeScaling()&&o));if("rectangle"===c){var g=p.multiply(2),v=t(this,i,g);if(v)a=e(i.subtract(v),d,p,v.getQuadrant());else{var m=new w(this._size).setCenter(0,0),_=m.expand(g),y=m.expand(g.negate());a=_._containsPoint(i)&&!y._containsPoint(i)}}else a=e(i,d,p)}return a?new j(h?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=new E(u.getNamed(r));return s._type=t,s._size=n,s._radius=i,s.translate(e)}return{Circle:function(){var e=m.readNamed(arguments,"center"),n=u.readNamed(arguments,"radius");return t("circle",e,new y(2*n),n,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),n=y.min(y.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=E._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(u.hasNamed(t,"radius"))e=m.readNamed(t,"center"),n=y.readNamed(t,"radius");else{var i=w.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),I=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},initialize:function(t,e){if(!this._initialize(t,e!==a&&m.read(arguments,1))){var n="string"==typeof t?h.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new y,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=ot.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new b(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=y.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(ot.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&ot.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new m(0,0).transform(t),n=new m(1,0).transform(t).subtract(e),i=new m(0,1).transform(t).subtract(e);return new y(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(s=n._scope,e.emit(i,new $(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Z.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&ot.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new y(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=ot.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ot.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new l.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=ot.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new I(C.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=m.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof F?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),r=Math.min(e.height,32),s=I._sampleContext;s?s.clearRect(0,0,33,33):s=I._sampleContext=ot.getContext(new y(32)),s.save();var o=(new S).scale(i/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(s),n&&n.draw(s,new u({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var a=this.getElement(),l=this._size;a&&s.drawImage(a,-l.width/2,-l.height/2),s.restore();for(var h=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,c=[0,0,0],d=0,f=0,p=h.length;f<p;f+=4){var g=h[f+3];d+=g,g/=255,c[0]+=h[f]*g,c[1]+=h[f+1]*g,c[2]+=h[f+2]*g}for(f=0;f<3;f++)c[f]/=d;return d?H.read(c):null},getPixel:function(){var t=m.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new H("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=m.read(arguments),e=H.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=y.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=m.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new j("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),R=C.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==a&&m.read(arguments,1))||this.setDefinition(t instanceof O?t:new O(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n,i){var r=this._definition._item._hitTest(t,e,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),O=u.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=v.get(),this.project=s.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return u.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new m),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new R(this,t)},clone:function(){return new O(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),j=u.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){var e=t&&u.read(t);return u.set({type:null,tolerance:s.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),M=u.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,s){var o,l,h,u,c=arguments.length;0===c||(1===c?t&&"point"in t?(o=t.point,l=t.handleIn,h=t.handleOut,u=t.selection):o=t:null==t||"object"==typeof t?(o=t,l=e,h=n,u=i):(o=t!==a?[t,e]:null,l=n!==a?[n,i]:null,h=r!==a?[r,s]:null)),new L(o,this,"_point"),new L(l,this,"_handleIn"),new L(h,this,"_handleOut"),u&&this.setSelection(u)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),u.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var t=m.read(arguments);this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var t=m.read(arguments);this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var t=m.read(arguments);this._handleOut.set(t.x,t.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(129))},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this.changeSelection(7,t)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new N(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,s=i.factor,o=this.getPrevious(),l=this.getNext(),h=(o||this)._point,u=this._point,c=(l||this)._point,d=h.getDistance(u),f=u.getDistance(c);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&l){var p=h.subtract(c),g=s===a?.4:s,v=g*d/(d+f);e||this.setHandleIn(p.multiply(v)),n||this.setHandleOut(p.multiply(v-g))}}else{var _=s===a?.5:s,y=Math.pow(d,_),b=y*y,w=Math.pow(f,_),x=w*w;if(!e&&o){var S=2*x+3*w*y+b,A=3*w*(w+y);this.setHandleIn(0!==A?new m((x*h._x+S*u._x-b*c._x)/A-u._x,(x*h._y+S*u._y-b*c._y)/A-u._y):new m)}if(!n&&l){S=2*b+3*y*w+x,A=3*y*(y+w);this.setHandleOut(0!==A?new m((b*c._x+S*u._x-x*h._x)/A-u._x,(b*c._y+S*u._y-x*h._y)/A-u._y):new m)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t._x,i=t._y;t.set(e._x,e._y),e.set(n,i)},reversed:function(){return new M(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new M(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,o=e._point,a=t._handleIn,l=e._handleIn,h=e._handleOut,u=t._handleOut;this._point.set(i*s._x+r*o._x,i*s._y+r*o._y,!0),this._handleIn.set(i*a._x+r*l._x,i*a._y+r*l._y,!0),this._handleOut.set(i*u._x+r*h._x,i*u._y+r*h._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,l=2;return e[0]=o,e[1]=a,r&&(e[l++]=r._x+o,e[l++]=r._y+a),s&&(e[l++]=s._x+o,e[l++]=s._y+a),t&&(t._transformCoordinates(e,e,l/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-a),s&&(s._x=e[l++]-o,s._y=e[l++]-a)):(r||(e[l++]=o,e[l++]=a),s||(e[l++]=o,e[l++]=a))),e}}),L=m.extend({initialize:function(t,e,n){var i,r,s;if(t)if((i=t[0])!==a)r=t[1];else{var o=t;(i=o.x)===a&&(i=(o=m.read(arguments)).x),r=o.y,s=o.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,s&&this.setSelected(!0)},set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return g.isZero(this._x)&&g.isZero(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),D=u.extend({_class:"Curve",initialize:function(t,e,n,i,r,s,o,a){var l,h,u,c,d,f,p=arguments.length;3===p?(this._path=t,l=e,h=n):0===p?(l=new M,h=new M):1===p?"segment1"in t?(l=new M(t.segment1),h=new M(t.segment2)):"point1"in t?(u=t.point1,d=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(u=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new M(t),h=new M(e)):4===p?(u=t,d=e,f=n,c=i):8===p&&(u=[t,e],c=[o,a],d=[n-t,i-e],f=[r-o,s-a]),this._segment1=l||new M(u,null,d),this._segment2=h||new M(c,f,null)},_serialize:function(t,e){return u.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=a},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n.x,n.y)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){var t=m.read(arguments);this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var t=m.read(arguments);this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var t=m.read(arguments);this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var t=m.read(arguments);this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return D.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new m(t[n],t[n+1]));return e},getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new A(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new D(D.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return D.getLength(this.getValues(),t,e)},getIntersections:function(t){return D._getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{})},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:t)},divideAtTime:function(t,e){var n=null;if(t>=4e-7&&t<=1-4e-7){var i=D.subdivide(this.getValues(),t),r=i[0],s=i[1],o=e||this.hasHandles(),a=this._segment1,l=this._segment2,h=this._path;o&&(a._handleOut.set(r[2]-r[0],r[3]-r[1]),l._handleIn.set(s[4]-s[6],s[5]-s[7]));var u=r[6],c=r[7],d=new M(new m(u,c),o&&new m(r[4]-u,r[5]-c),o&&new m(s[2]-u,s[3]-c));h?(h.insert(a._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new D(d,l))}return n},splitAt:function(t){return this._path?this._path.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===a?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===a?.5:e?t:this.getTimeAt(t))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(t,e,n){var i=t._point,r=t._handleOut,s=e._handleIn,o=e._point,a=[i._x,i._y,i._x+r._x,i._y+r._y,o._x+s._x,o._y+s._y,o._x,o._y];return n&&n._transformCoordinates(a,a,4),a},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],l=t[5],h=t[6],u=t[7];e===a&&(e=.5);var c=1-e,d=c*n+e*r,f=c*i+e*s,p=c*r+e*o,g=c*s+e*l,v=c*o+e*h,m=c*l+e*u,_=c*d+e*p,y=c*f+e*g,b=c*p+e*v,w=c*g+e*m,x=c*_+e*b,S=c*y+e*w;return[[n,i,d,f,_,y,x,S],[x,S,b,w,v,m,h,u]]},solveCubic:function(t,e,n,i,r,s){var o=t[e],a=t[e+2],l=t[e+4],h=t[e+6],u=0;if(!(o<n&&h<n&&a<n&&l<n||o>n&&h>n&&a>n&&l>n)){var c=3*(a-o),d=3*(l-a)-c,f=h-o-c-d;u=g.solveCubic(f,d,c,o-n,i,r,s)}return u},getTimeOf:function(t,e){var n=new m(t[0],t[1]),i=new m(t[6],t[7]),r=e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null;if(null!==r)return r;for(var s=[e.x,e.y],o=[],a=0;a<2;a++)for(var l=D.solveCubic(t,a,s[a],o,0,1),h=0;h<l;h++)if(r=o[h],e.isClose(D.getPoint(t,r),2e-7))return r;return e.isClose(n,2e-7)?0:e.isClose(i,2e-7)?1:null},getNearestTime:function(t,e){if(D.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,s=t[7]-i,o=r*r+s*s;if(0===o)return 0;var a=((e.x-n)*r+(e.y-i)*s)/o;return a<1e-12?0:a>.999999999999?1:D.getTimeOf(t,new m(n+a*r,i+a*s))}var l=1/0,h=0;function u(n){if(n>=0&&n<=1){var i=e.getDistance(D.getPoint(t,n),!0);if(i<l)return l=i,h=n,!0}}for(var c=0;c<=100;c++)u(c/100);for(var d=.005;d>4e-7;)u(h-d)||u(h+d)||(d/=2);return h},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=D.subdivide(t,e)[1]),n<1&&(t=D.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],h=t[7],u=3*r-2*n-l,c=3*s-2*i-h,d=3*o-2*l-n,f=3*a-2*h-i;return Math.max(u*u,d*d)+Math.max(c*c,f*f)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7];return 3*((l-n)*(i+s)-(a-e)*(r+o)+r*(e-s)-i*(n-o)+l*(s+e/3)-a*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)D._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,o,a,l){function h(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>a[r]&&(a[r]=i)}s/=2;var u=o[r]-s,c=a[r]+s;if(t<u||e<u||n<u||i<u||t>c||e>c||n>c||i>c)if(e<t!=e<i&&n<t!=n<i)h(t,s),h(i,s);else{var d=3*(e-n)-t+i,f=2*(t+n)-4*e,p=e-t,v=g.solveQuadratic(d,f,p,l);h(i,0);for(var m=0;m<v;m++){var _=l[m],y=1-_;4e-7<_&&_<1-4e-7&&h(y*y*y*t+3*y*y*_*e+3*y*_*_*n+_*_*_*i,s)}}}}},u.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=z[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),u.each({isStraight:function(t,e,n){if(e.isZero()&&n.isZero())return!0;var i=t.getVector();if(i.isZero())return!1;if(t.getDistance(e)<2e-7&&t.getDistance(n)<2e-7){var r=i.dot(i),s=i.dot(e)/r,o=i.dot(n)/r;return s>=0&&s<=1&&o<=0&&o>=-1}return!1},isLinear:function(t,e,n){var i=t.getVector().divide(3);return e.equals(i)&&n.negate().equals(i)}},(function(t,e){this[e]=function(){var e=this._segment1,n=this._segment2;return t(new A(e._point,n._point),e._handleOut,n._handleIn)},this.statics[e]=function(e){var n=e[0],i=e[1],r=e[6],s=e[7];return t(new A(n,i,r,s),new m(e[2]-n,e[3]-i),new m(e[4]-r,e[5]-s))}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-7}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new N(this,t):null},getTimeAt:function(t,e){return D.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(m.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),m.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=m.read(arguments),e=this.getValues(),n=D.getNearestTime(e,t),i=D.getPoint(e,n);return new N(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return u.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return D[t](i,n?e:D.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return D[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=9*(i-s)+3*(a-e),u=6*(e+s)-12*i,c=3*(i-e),d=9*(r-o)+3*(l-n),f=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(h*t+u)*t+c,n=(d*t+f)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],h=t[5],u=t[6],c=t[7],d=g.isZero;d(o-r)&&d(a-s)&&(o=r,a=s),d(l-u)&&d(h-c)&&(l=u,h=c);var f,p,v=3*(o-r),_=3*(l-o)-v,y=u-r-v-_,b=3*(a-s),w=3*(h-a)-b,x=c-s-b-w;if(0===n)f=0===e?r:1===e?u:((y*e+_)*e+v)*e+r,p=0===e?s:1===e?c:((x*e+w)*e+b)*e+s;else{if(e<4e-7?(f=v,p=b):e>1-4e-7?(f=3*(u-l),p=3*(c-h)):(f=(3*y*e+2*_)*e+v,p=(3*x*e+2*w)*e+b),i){0===f&&0===p&&(e<4e-7||e>1-4e-7)&&(f=l-o,p=h-a);var S=Math.sqrt(f*f+p*p);S&&(f/=S,p/=S)}if(3===n){var A=6*y*e+2*_,P=6*x*e+2*w,C=Math.pow(f*f+p*p,1.5);f=0!==C?(f*P-p*A)/C:0,p=0}}return 2===n?new m(p,-f):new m(f,p)}return{statics:{getLength:function(n,i,r,s){if(i===a&&(i=0),r===a&&(r=1),D.isStraight(n)){var o=n;r<1&&(o=D.subdivide(o,r)[0],i/=r),i>0&&(o=D.subdivide(o,i)[1]);var l=o[6]-o[0],h=o[7]-o[1];return Math.sqrt(l*l+h*h)}return g.integrate(s||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){if(r===a&&(r=i<0?1:0),0===i)return r;var s=Math.abs,o=i>0,l=o?r:0,h=o?1:r,u=t(n),c=D.getLength(n,l,h,u),d=s(i)-c;if(s(d)<1e-12)return o?h:l;if(d>1e-12)return null;var f=i/c,p=0;return g.findRoot((function(t){return p+=g.integrate(u,r,t,e(r,t)),r=t,p-i}),u,r+f,l,h,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x}}}},new function(){function t(t,e,n,i,r,s,o,a,l,h,u){var c=!u&&e.excludeStart,d=!u&&e.excludeEnd;if(null==r&&(r=D.getTimeOf(n,s)),null!==r&&r>=(c?4e-7:0)&&r<=(d?1-4e-7:1)&&(null==l&&(l=D.getTimeOf(o,h)),null!==l&&l>=(d?4e-7:0)&&l<=(c?1-4e-7:1))){var f=e.renormalize;if(f){var p=f(r,l);r=p[0],l=p[1]}var g=new N(i,r,s||D.getPoint(n,r),u),v=new N(a,l,h||D.getPoint(o,l),u),m=g.getPath()===v.getPath()&&g.getIndex()>v.getIndex()?v:g,_=e.include;g._intersection=v,v._intersection=g,_&&!_(m)||N.insert(t,m,!0)}}function e(i,r,s,o,a,l,h,u,c,d,f,p,g){if(++p>=48||++g>4096)return g;var v,m,_=r[0],y=r[1],b=r[6],w=r[7],x=A.getSignedDistance,S=x(_,y,b,w,r[2],r[3]),P=x(_,y,b,w,r[4],r[5]),C=S*P>0?3/4:4/9,k=C*Math.min(0,S,P),T=C*Math.max(0,S,P),E=x(_,y,b,w,i[0],i[1]),I=x(_,y,b,w,i[2],i[3]),R=x(_,y,b,w,i[4],i[5]),O=x(_,y,b,w,i[6],i[7]),j=function(t,e,n,i){var r,s=[0,t],o=[1/3,e],a=[2/3,n],l=[1,i],h=e-(2*t+i)/3,u=n-(t+2*i)/3;if(h*u<0)r=[[s,o,l],[s,a,l]];else{var c=h/u;r=[c>=2?[s,o,l]:c<=.5?[s,a,l]:[s,o,a,l],[s,l]]}return(h||u)<0?r.reverse():r}(E,I,R,O),M=j[0],L=j[1];if(0===S&&0===P&&0===E&&0===I&&0===R&&0===O||null==(v=n(M,L,k,T))||null==(m=n(M.reverse(),L.reverse(),k,T)))return g;var N=h+(u-h)*v,F=h+(u-h)*m;if(Math.max(d-c,F-N)<1e-9){var z=(N+F)/2,q=(c+d)/2;i=s.getValues(),r=o.getValues(),t(a,l,f?r:i,f?o:s,f?q:z,null,f?i:r,f?s:o,f?z:q,null)}else if(i=D.getPart(i,v,m),m-v>.8)if(F-N>d-c){z=(N+F)/2;g=e(r,(B=D.subdivide(i,.5))[0],o,s,a,l,c,d,N,z,!f,p,g),g=e(r,B[1],o,s,a,l,c,d,z,F,!f,p,g)}else{var B;q=(c+d)/2;g=e((B=D.subdivide(r,.5))[0],i,o,s,a,l,c,q,N,F,!f,p,g),g=e(B[1],i,o,s,a,l,q,d,N,F,!f,p,g)}else g=e(r,i,o,s,a,l,c,d,N,F,!f,p,g);return g}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,o=t.length;s<o;s++){var a=t[s][0],l=t[s][1];if(e?l>=n:l<=n)return l===n?a:i+(n-r)*(a-i)/(l-r);i=a,r=l}return null}function r(e,n,i,r,s,o){for(var a=D.isStraight(e),l=a?n:e,h=a?e:n,u=h[0],c=h[1],d=h[6]-u,f=h[7]-c,p=Math.atan2(-f,d),v=Math.sin(p),m=Math.cos(p),_=[],y=0;y<8;y+=2){var b=l[y]-u,w=l[y+1]-c;_.push(b*m-w*v,b*v+w*m)}var x=[],S=D.solveCubic(_,1,0,x,0,1);for(y=0;y<S;y++){var A=x[y],P=D.getPoint(l,A),C=D.getTimeOf(h,P);if(null!==C){var k=D.getPoint(h,C),T=a?C:A,E=a?A:C;(!o.excludeEnd||E>g.CURVETIME_EPSILON)&&t(s,o,e,i,T,a?k:P,n,r,E,a?P:k)}}}function s(e,n,i,r,s,o){var a=A.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);a&&t(s,o,e,i,null,a,n,r,null,a)}return{statics:{_getIntersections:function(n,i,o,a,l,h){if(!i)return D._getSelfIntersection(n,o,l,h);var u=n[0],c=n[1],d=n[6],f=n[7],p=i[0],g=i[1],v=i[6],_=i[7],y=(3*n[2]+u)/4,b=(3*n[3]+c)/4,w=(3*n[4]+d)/4,x=(3*n[5]+f)/4,S=(3*i[2]+p)/4,A=(3*i[3]+g)/4,P=(3*i[4]+v)/4,C=(3*i[5]+_)/4,k=Math.min,T=Math.max;if(!(T(u,y,w,d)+2e-7>k(p,S,P,v)&&k(u,y,w,d)-2e-7<T(p,S,P,v)&&T(c,b,x,f)+2e-7>k(g,A,C,_)&&k(c,b,x,f)-2e-7<T(g,A,C,_)))return l;var E=D.getOverlaps(n,i);if(E){for(var I=0;I<2;I++){var R=E[I];t(l,h,n,o,R[0],null,i,a,R[1],null,!0)}return l}var O=D.isStraight(n),j=D.isStraight(i),M=O&&j,L=l.length;if((M?s:O||j?r:e)(n,i,o,a,l,h,0,1,0,1,0,0,0),M&&l.length>L)return l;var N=new m(u,c),F=new m(d,f),z=new m(p,g),q=new m(v,_);return N.isClose(z,2e-7)&&t(l,h,n,o,0,N,i,a,0,z),!h.excludeStart&&N.isClose(q,2e-7)&&t(l,h,n,o,0,N,i,a,1,q),!h.excludeEnd&&F.isClose(z,2e-7)&&t(l,h,n,o,1,F,i,a,0,z),F.isClose(q,2e-7)&&t(l,h,n,o,1,F,i,a,1,q),l},_getSelfIntersection:function(t,e,n,i){var r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],h=t[5],u=t[6],c=t[7],d=new A(r,s,u,c,!1),f=d.getSide(new m(o,a),!0);if(f===d.getSide(new m(l,h),!0)&&((r-l)*(a-c)+(o-u)*(h-s))*f>0)return n;var p=u-3*l+3*o-r,v=l-2*o+r,_=o-r,y=c-3*h+3*a-s,b=h-2*a+s,w=a-s,x=y*_-p*w;if(x*x-4*(y*v-p*b)*(b*_-v*w)<0){var S,P=[],C=g.solveCubic(p*p+y*y,3*(p*v+y*b),2*(v*v+b*b)+p*_+y*w,v*_+b*w,P,0,1);if(C>0){for(var k=0,T=0;k<C;k++){var E=Math.abs(e.getCurvatureAtTime(P[k]));E>T&&(T=E,S=P[k])}var I=D.subdivide(t,S);i.excludeEnd=!0,i.renormalize=function(t,e){return[t*S,e*(1-S)+S]},D._getIntersections(I[0],I[1],e,e,n,i)}}return n},getOverlaps:function(t,e){var n=Math.abs,i=D.isStraight(t),r=D.isStraight(e),s=i&&r;function o(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var a=o(t)<o(e),l=a?e:t,h=a?t:e,u=new A(l[0],l[1],l[6],l[7]);if(u.getDistance(new m(h[0],h[1]))<2e-7&&u.getDistance(new m(h[6],h[7]))<2e-7)!s&&u.getDistance(new m(l[2],l[3]))<2e-7&&u.getDistance(new m(l[4],l[5]))<2e-7&&u.getDistance(new m(h[2],h[3]))<2e-7&&u.getDistance(new m(h[4],h[5]))<2e-7&&(i=r=s=!0);else if(s)return null;if(i^r)return null;for(var c=[t,e],d=[],f=0,p=0;f<2&&d.length<2;f+=0===p?0:1,p^=1){var g=D.getTimeOf(c[1^f],new m(c[f][0===p?0:6],c[f][0===p?1:7]));if(null!=g){var v=0===f?[p,g]:[g,p];(0===d.length||n(v[0]-d[0][0])>4e-7&&n(v[1]-d[0][1])>4e-7)&&d.push(v)}if(1===f&&0===d.length)break}if(2!==d.length)d=null;else if(!s){var _=D.getPart(t,d[0][0],d[1][0]),y=D.getPart(e,d[0][1],d[1][1]);(n(y[2]-_[2])>2e-7||n(y[3]-_[3])>2e-7||n(y[4]-_[4])>2e-7||n(y[5]-_[5])>2e-7)&&(d=null)}return d}}}}),N=u.extend({_class:"CurveLocation",beans:!0,initialize:function(t,e,n,i,r){if(e>.9999996){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this.getCurve(),e=this._segment;if(!e){var n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),e._segment=t,n}return t&&t._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this.getCurve(),e=this.getTime();return null!=e&&t&&t.getPartLength(0,e)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=null;return t&&(e=t.divideAtTime(this.getTime()))&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve();return t?t.splitAtTime(this.getTime()):null},equals:function(t,e){var n=this===t;if(!n&&t instanceof N&&this.getPath()===t.getPath()&&this.getPoint().isClose(t.getPoint(),2e-7)){var i=this.getCurve(),r=t.getCurve(),s=Math.abs,o=s((i.isLast()&&r.isFirst()?-1:i.getIndex())+this.getTime()-((r.isLast()&&i.isFirst()?-1:r.getIndex())+t.getTime()));n=(o<4e-7||(o=s(this.getOffset()-t.getOffset()))<2e-7||s(this.getPath().getLength()-o)<2e-7)&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0))}return n},toString:function(){var t=[],e=this.getPoint(),n=p.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>4e-7&&e<1-4e-7,r=n>4e-7&&n<1-4e-7;if(i&&r)return!this.isTouching();var s=this.getCurve(),o=e<=4e-7?s.getPrevious():s,a=t.getCurve(),l=n<=4e-7?a.getPrevious():a;if(e>=1-4e-7&&(s=s.getNext()),n>=1-4e-7&&(a=a.getNext()),!(o&&s&&l&&a))return!1;function h(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var u=[];i||u.push(o.getLength(),s.getLength()),r||u.push(l.getLength(),a.getLength());var c=this.getPoint(),d=Math.min.apply(Math,u)/64,f=i?s.getTangentAtTime(e):s.getPointAt(d).subtract(c),p=i?f.negate():o.getPointAt(-d).subtract(c),g=r?a.getTangentAtTime(n):a.getPointAt(d).subtract(c),v=r?g.negate():l.getPointAt(-d).subtract(c),m=p.getAngle(),_=f.getAngle(),y=v.getAngle(),b=g.getAngle();return!!(i?h(m,y,b)^h(_,y,b)&&h(m,b,y)^h(_,b,y):h(y,m,_)^h(b,m,_)&&h(y,_,m)^h(b,_,m))},hasOverlap:function(){return!!this._overlap}},u.each(D._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,s=i-1;function o(n,r){for(var s=n+r;s>=-1&&s<=i;s+=r){var o=t[(s%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),2e-7))break;if(e.equals(o))return o}return null}for(;r<=s;){var a,l=r+s>>>1,h=t[l];if(n&&(a=e.equals(h)?h:o(l,-1)||o(l,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var u=e.getPath(),c=h.getPath();(u===c?e.getIndex()+e.getTime()-(h.getIndex()+h.getTime()):u._id-c._id)<0?s=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),F=C.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,initialize:function(){},statics:{create:function(t){return new((t&&t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t)?q:z)(t)}},_asPathItem:function(){return this},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,o=new m,a=new m;function l(t,n){var i=+e[t];return s&&(i+=o[n]),i}function h(t){return new m(l(t,"x"),l(t+1,"y"))}this.clear();for(var u=0,c=r&&r.length;u<c;u++){var d=r[u],f=d[0],p=f.toLowerCase(),g=(e=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=f===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o=a),p){case"m":case"l":for(var v="m"===p,_=0;_<g;_+=2)this[0===_&&v?"moveTo":"lineTo"](o=h(_));i=o,v&&(a=o);break;case"h":case"v":var b="h"===p?"x":"y";for(_=0;_<g;_++)o[b]=l(_,b),this.lineTo(o);i=o;break;case"c":for(_=0;_<g;_+=6)this.cubicCurveTo(h(_),i=h(_+2),o=h(_+4));break;case"s":for(_=0;_<g;_+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=h(_),o=h(_+2)),n=p;break;case"q":for(_=0;_<g;_+=4)this.quadraticCurveTo(i=h(_),o=h(_+2));break;case"t":for(_=0;_<g;_+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=h(_)),n=p;break;case"a":for(_=0;_<g;_+=7)this.arcTo(o=h(_+5),new y(+e[_],+e[_+1]),+e[_+2],+e[_+4],+e[_+3]);break;case"z":this.closePath(1e-12)}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))&&this._getWinding(t);return!!("evenodd"===this.getFillRule()?1&e:e)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),o=r?s:(n||t._matrix)._orNullIfIdentity();if(!r&&!this.getBounds(s).touches(t.getBounds(o)))return[];for(var a,l=this.getCurves(),h=r?l:t.getCurves(),u=l.length,c=r?u:h.length,d=[],f=[],p=0;p<c;p++)d[p]=h[p].getValues(o);for(p=0;p<u;p++){var g=l[p],v=r?d[p]:g.getValues(s),m=g.getPath();m!==t&&(t=m,a=[],f.push(a)),r&&D._getSelfIntersection(v,g,a,{include:e,excludeStart:1===u&&g.getPoint1().equals(g.getPoint2())});for(var _=r?p+1:0;_<c;_++){if(i&&a.length)return a;var y=h[_];D._getIntersections(v,d[_],g,y,a,{include:e,excludeStart:r&&g.getPrevious()===y,excludeEnd:r&&g.getNext()===y})}}a=[];p=0;for(var b=f.length;p<b;p++)a.push.apply(a,f[p]);return a},getCrossings:function(t){return this.getIntersections(t,(function(t){return t._overlap||t.isCrossing()}))},getNearestLocation:function(){for(var t=m.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],o=e[r],a=this[r];if(!s||!o||s.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=a.length,h=o.length;if(l<h)for(var u=i?M:z,c=l;c<h;c++)this.add(new u);else l>h&&this[i?"removeSegments":"removeChildren"](h,l);for(c=0;c<h;c++)a[c].interpolate(s[c],o[c],n);i&&(this.setClosed(t._closed),this._changed(9))}}),z=F.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==a||t.x===a&&t.point===a?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=a,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&u.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed;var e=t._clockwise;e!==a&&(this._clockwise=e)},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=this._clockwise=this._monoCurves=a,16&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 32&e&&(this._bounds=a)},getStyle:function(){var t=this._parent;return(t instanceof q?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected();this._segments.length=0,this._segmentSelection=0,this._curves=a,t&&t.length>0&&this._add(M.readAll(t)),e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new D(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new D(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){var n,i,r,s,o,a,l,h,u=this._segments,c=u.length,d=new p(e),f=new Array(6),g=!0,v=[];function m(e,u){e._transformCoordinates(t,f),n=f[0],i=f[1],g?(v.push("M"+d.pair(n,i)),g=!1):(o=f[2],a=f[3],o===n&&a===i&&l===r&&h===s?u||v.push("l"+d.pair(n-r,i-s)):v.push("c"+d.pair(l-r,h-s)+" "+d.pair(o-r,a-s)+" "+d.pair(n-r,i-s))),r=n,s=i,l=f[4],h=f[5]}if(0===c)return"";for(var _=0;_<c;_++)m(u[_]);return this._closed&&c>0&&(m(u[0],!0),v.push("z")),v.join("")},isEmpty:function(){return 0===this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,o=(e=s?n.length:e,0);o<r;o++){var a=t[o];a._path&&(a=t[o]=a.clone()),a._path=this,a._index=e+o,a._selection&&this._updateSelection(a,0,a._selection)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+r;for(var l=n.length;o<l;o++)n[o]._index=o}if(i){var h=this._countCurves(),u=e>0&&e+r-1===h?e-1:e,c=u,d=Math.min(u+r,h);t._curves&&(i.splice.apply(i,[u,0].concat(t._curves)),c+=t._curves.length);for(o=c;o<d;o++)i.splice(o,0,new D(this,null,null));this._adjustCurves(u,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(M.readAll(arguments)):this._add([M.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(M.readAll(arguments,1),t):this._add([M.read(arguments,1)],t)[0]},addSegment:function(){return this._add([M.read(arguments)])[0]},insertSegment:function(t){return this._add([M.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(M.readAll(t))},insertSegments:function(t,e){return this._add(M.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=u.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,o=i.splice(t,e-t),a=o.length;if(!a)return o;for(var l=0;l<a;l++){var h=o[l];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}l=t;for(var c=i.length;l<c;l++)i[l]._index=l;if(r){var d=t>0&&e===s+(this._closed?1:0)?t-1:t;for(l=(r=r.splice(d,a)).length-1;l>=0;l--)r[l]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(t){var e=t===a,n=this._area;if(!e||null==n){var i=this._segments,r=i.length,s=r-1;n=0;for(var o=0,l=(e?this._closed:t)?r:s;o<l;o++)n+=D.getArea(D.getValues(i[o],i[o<s?o+1:0]));e&&(this._area=n)}return n},isClockwise:function(){return this._clockwise!==a?this._clockwise:this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},splitAt:function(t){var e="number"==typeof t?this.getLocationAt(t):t,n=e&&e.index,i=e&&e.time;i>=1-4e-7&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=4e-7&&r[n++].divideAtTime(i);var s,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new z(C.NO_INSERT)).insertAbove(this,!0),s.copyAttributes(this)),s._add(o,0),this.addSegment(o[0]),s}return null},split:function(t,e){var n,i=e===a?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,n)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,n)?(a.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),h=this.getLastSegment();return l!==h&&l._point.isClose(h._point,n)&&(l.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?2e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(s.getLength()<i||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._clockwise!==a&&(this._clockwise=!this._clockwise),this._changed(9)},flatten:function(t){for(var e=new B(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new M(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new M(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new U(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},i=n.type||"asymmetric",r=this._segments,s=r.length,o=this._closed;function l(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw new Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof D&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&o?i%s:i<0?i+s:i,s-1)}var h=o&&n.from===a&&n.to===a,u=l(n.from,0),c=l(n.to,s-1);if(u>c)if(o)u-=s;else{var d=u;u=c,c=d}if(/^(?:asymmetric|continuous)$/.test(i)){var f="asymmetric"===i,p=Math.min,g=c-u+1,v=g-1,m=h?p(g,4):1,_=m,y=m,b=[];if(o||(_=p(1,u),y=p(1,s-c-1)),(v+=_+y)<=1)return;for(var w=0,x=u-_;w<=v;w++,x++)b[w]=r[(x<0?x+s:x)%s]._point;var S=b[0]._x+2*b[1]._x,A=b[0]._y+2*b[1]._y,P=2,C=v-1,k=[S],T=[A],E=[P],I=[],R=[];for(w=1;w<v;w++){var O=w<C,j=O?4:f?2:7,M=O?4:f?3:8,L=O?2:f?0:1,N=(O||f?1:2)/P;P=E[w]=j-N,S=k[w]=M*b[w]._x+L*b[w+1]._x-N*S,A=T[w]=M*b[w]._y+L*b[w+1]._y-N*A}I[C]=k[C]/E[C],R[C]=T[C]/E[C];for(w=v-2;w>=0;w--)I[w]=(k[w]-I[w+1])/E[w],R[w]=(T[w]-R[w+1])/E[w];I[v]=(3*b[v]._x-I[C])/2,R[v]=(3*b[v]._y-R[C])/2;w=_;var F=v-y;for(x=u;w<=F;w++,x++){var z=r[x<0?x+s:x],q=z._point,B=I[w]-q._x,U=R[w]-q._y;(h||w<F)&&z.setHandleOut(B,U),(h||w>_)&&z.setHandleIn(-B,-U)}}else for(w=u;w<=c;w++)r[w<0?w+s:w].smooth(n,!h&&w===u,!h&&w===c)},toShape:function(t){if(!this._closed)return null;var e,n,i,r,s,o,l,h=this._segments;function u(t,e){var n=h[t],i=n.getNext(),r=h[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function c(t){var e=h[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,s=.5522847498307936;if(i.isOrthogonal(r)){var o=e._point,a=n._point,l=new A(o,i,!0).intersect(new A(a,r,!0),!0);return l&&g.isZero(i.getLength()/l.subtract(o).getLength()-s)&&g.isZero(r.getLength()/l.subtract(a).getLength()-s)}return!1}function d(t,e){return h[t]._point.getDistance(h[e]._point)}if(!this.hasHandles()&&4===h.length&&u(0,2)&&u(1,3)&&(s=h[1],o=s.getPrevious(),l=s.getNext(),o._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&l._handleIn.isZero()&&s._point.subtract(o._point).isOrthogonal(l._point.subtract(s._point)))?(e=E.Rectangle,n=new y(d(0,3),d(0,1)),r=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&c(0)&&c(2)&&c(4)&&c(6)&&u(1,5)&&u(3,7)?(e=E.Rectangle,i=(n=new y(d(1,6),d(0,3))).subtract(new y(d(0,7),d(1,2))).divide(2),r=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&c(0)&&c(1)&&c(2)&&c(3)&&(g.isZero(d(0,2)-d(1,3))?(e=E.Circle,i=d(0,2)/2):(e=E.Ellipse,i=new y(d(2,0)/2,d(3,1)/2)),r=h[1]._point),e){var f=this.getPosition(!0),p=new e({center:f,size:n,radius:i,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(r.subtract(f).getAngle()+90),(t===a||t)&&p.insertAbove(this),p}return null},toPath:"#clone",_hitTestSelf:function(t,e,n,i){var r,s,o,a,l,h,u=this,c=this.getStyle(),d=this._segments,f=d.length,p=this._closed,g=e._tolerancePadding,v=g,m=e.stroke&&c.hasStroke(),_=e.fill&&c.hasFill(),y=e.curves,b=m?c.getStrokeWidth()/2:_&&e.tolerance>0||y?0:null;function w(e,n){return t.subtract(e).divide(n).length<=1}function x(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),w(n,v))return new j(i,u,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&x(t,t._point,"segment")||!n&&e.handles&&(x(t,t._handleIn,"handle-in")||x(t,t._handleOut,"handle-out"))}function A(t){a.add(t)}function P(e){var n;if(("round"!==r||"round"!==s)&&(a=new z({internal:!0,closed:!0}),p||e._index>0&&e._index<f-1?"round"!==r&&(e._handleIn.isZero()||e._handleOut.isZero())&&z._addBevelJoin(e,r,b,o,null,i,A,!0):"round"!==s&&z._addSquareCap(e,s,b,null,i,A,!0),!a.isEmpty()))return a.contains(t)||(n=a.getNearestLocation(t))&&w(n.getPoint(),g);return w(e._point,v)}if(null!==b&&(b>0?(r=c.getStrokeJoin(),s=c.getStrokeCap(),o=b*c.getMiterLimit(),v=v.add(z._getStrokePadding(b,i))):r=s="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var C=0;C<f;C++)if(h=S(d[C]))return h}else if(h=S(d[0],!0)||S(d[f-1],!0))return h;if(null!==b){if(l=this.getNearestLocation(t)){var k=l.getTime();0===k||1===k&&f>1?P(l.getSegment())||(l=null):w(l.getPoint(),v)||(l=null)}if(!l&&"miter"===r&&f>1)for(C=0;C<f;C++){var T=d[C];if(t.getDistance(T._point)<=o&&P(T)){l=T.getLocation();break}}}return!l&&_&&this._contains(t)||l&&!m&&!y?new j("fill",this):l?new j(m?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},u.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=m.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-s)}return e.length>0&&t<=this.getLength()?new N(e[e.length-1],1):null}}),new function(){function t(t,e,n){var i,r,s,o,a,l,h,u,c=e._segments,d=c.length,f=new Array(6),p=!0;function g(e){if(n)e._transformCoordinates(n,f),i=f[0],r=f[1];else{var c=e._point;i=c._x,r=c._y}if(p)t.moveTo(i,r),p=!1;else{if(n)a=f[2],l=f[3];else{var d=e._handleIn;a=i+d._x,l=r+d._y}a===i&&l===r&&h===s&&u===o?t.lineTo(i,r):t.bezierCurveTo(h,u,a,l,i,r)}if(s=i,o=r,n)h=f[4],u=f[5];else{d=e._handleOut;h=s+d._x,u=o+d._y}}for(var v=0;v<d;v++)g(c[v]);e._closed&&d>0&&g(c[0])}return{_draw:function(e,n,i,r){var o=n.dontStart,a=n.dontFinish||n.clip,l=this.getStyle(),h=l.hasFill(),u=l.hasStroke(),c=l.getDashArray(),d=!s.support.nativeDash&&u&&c&&c.length;function f(t){return c[(t%d+d)%d]}if(o||e.beginPath(),(h||u&&!d||a)&&(t(e,this,r),this._closed&&e.closePath()),!a&&(h||u)&&(this._setStyles(e,n,i),h&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(d){o||e.beginPath();var p,g=new B(this,.25,32,!1,r),v=g.length,m=-l.getDashOffset(),_=0;for(m%=v;m>0;)m-=f(_--)+f(_--);for(;m<v;)p=m+f(_++),(m>0||p>0)&&g.drawPart(e,Math.max(m,0),Math.max(p,0)),m=p+f(_++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){var r,s,o=i/2,a=new Array(6);function l(e){var n=a[e],i=a[e+1];r==n&&s==i||(t.beginPath(),t.moveTo(r,s),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}for(var h=0,u=e.length;h<u;h++){var c=e[h],d=c._selection;if(c._transformCoordinates(n,a),r=a[0],s=a[1],2&d&&l(2),4&d&&l(4),t.fillRect(r-o,s-o,i,i),!(1&d)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-o+1,s-o+1,i-2,i-2),t.fillStyle=f}}}(e,this._segments,n,s.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(0===e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new M(m.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new M(m.read(arguments))])},cubicCurveTo:function(){var e=m.read(arguments),n=m.read(arguments),i=m.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new M(i,n.subtract(i))])},quadraticCurveTo:function(){var e=m.read(arguments),n=m.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=m.read(arguments),n=m.read(arguments),i=u.pick(u.read(arguments),.5),r=1-i,s=t(this)._point,o=e.subtract(s.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,r,s=t(this),o=s._point,a=m.read(arguments),l=u.peek(arguments);if("boolean"==typeof(p=u.pick(l,!0)))var h=(_=o.add(a).divide(2)).add(_.subtract(o).rotate(p?-90:90));else if(u.remain(arguments)<=2)h=a,a=m.read(arguments);else{var c=y.read(arguments),d=g.isZero;if(d(c.width)||d(c.height))return this.lineTo(a);var f=u.read(arguments),p=!!u.read(arguments),v=!!u.read(arguments),_=o.add(a).divide(2),b=(H=o.subtract(_).rotate(-f)).x,w=H.y,x=Math.abs,P=x(c.width),C=x(c.height),k=P*P,T=C*C,E=b*b,I=w*w,R=Math.sqrt(E/k+I/T);if(R>1&&(k=(P*=R)*P,T=(C*=R)*C),x(R=(k*T-k*I-T*E)/(k*I+T*E))<1e-12&&(R=0),R<0)throw new Error("Cannot create an arc with the given arguments");e=new m(P*w/C,-C*b/P).multiply((v===p?-1:1)*Math.sqrt(R)).rotate(f).add(_),n=(i=(r=(new S).translate(e).rotate(f).scale(P,C))._inverseTransform(o)).getDirectedAngle(r._inverseTransform(a)),!p&&n>0?n-=360:p&&n<0&&(n+=360)}if(h){var O=new A(o.add(h).divide(2),h.subtract(o).rotate(90),!0),j=new A(h.add(a).divide(2),a.subtract(h).rotate(90),!0),L=new A(o,a),D=L.getSide(h);if(!(e=O.intersect(j,!0))){if(!D)return this.lineTo(a);throw new Error("Cannot create an arc with the given arguments")}n=(i=o.subtract(e)).getDirectedAngle(a.subtract(e));var N=L.getSide(e);0===N?n=D*Math.abs(n):D===N&&(n+=n<0?360:-360)}for(var F=Math.abs(n),z=F>=360?4:Math.ceil(F/90),q=n/z,B=q*Math.PI/360,U=4/3*Math.sin(B)/(1+Math.cos(B)),W=[],V=0;V<=z;V++){var H=a,X=null;if(V<z&&(X=i.rotate(90).multiply(U),r?(H=r._transformPoint(i),X=r._transformPoint(i.add(X)).subtract(H)):H=e.add(i)),0===V)s.setHandleOut(X);else{var G=i.rotate(-90).multiply(U);r&&(G=r._transformPoint(i.add(G)).subtract(H)),W.push(new M(H,G,X))}i=i.rotate(q)}this._add(W)},lineBy:function(){var e=m.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=m.read(arguments),n=m.read(arguments),i=u.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=m.read(arguments),n=m.read(arguments),i=m.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=m.read(arguments),n=m.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(m.read(arguments)),i=u.pick(u.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(m.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return z[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){var o=t[0];if(!o)return new w;var a=new Array(6),l=o._transformCoordinates(i,new Array(6)),h=l.slice(0,2),u=h.slice(),c=new Array(2);function d(t){t._transformCoordinates(i,a);for(var e=0;e<2;e++)D._addBounds(l[e],l[e+4],a[e+2],a[e],e,s?s[e]:0,h,u,c);var n=l;l=a,a=n}for(var f=1,p=t.length;f<p;f++)d(t[f]);return e&&d(o),new w(h[0],h[1],u[0]-h[0],u[1]-h[1])},getStrokeBounds:function(t,e,n,i,r){var s=n.getStyle(),o=s.hasStroke(),a=s.getStrokeWidth(),l=o&&n._getStrokeMatrix(i,r),h=o&&z._getStrokePadding(a,l),u=z.getBounds(t,e,n,i,r,h);if(!o)return u;var c=a/2,d=s.getStrokeJoin(),f=s.getStrokeCap(),p=c*s.getMiterLimit(),g=new w(new y(h));function v(t){u=u.include(t)}function m(t){u=u.unite(g.setCenter(t._point.transform(i)))}function _(t,e){var n=t._handleIn,r=t._handleOut;"round"===e||!n.isZero()&&!r.isZero()&&n.isCollinear(r)?m(t):z._addBevelJoin(t,e,c,p,i,l,v)}function b(t,e){"round"===e?m(t):z._addSquareCap(t,e,c,i,l,v)}for(var x=t.length-(e?0:1),S=1;S<x;S++)_(t[S],d);return e?_(t[0],d):x>0&&(b(t[0],f),b(t[t.length-1],f)),u},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new m(t,0).transform(e),i=new m(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),o=i.getLength(),a=Math.sin(r),l=Math.cos(r),h=Math.tan(r),u=Math.atan2(o*h,s),c=Math.atan2(o,h*s);return[Math.abs(s*Math.cos(u)*l+o*Math.sin(u)*a),Math.abs(o*Math.sin(c)*l+s*Math.cos(c)*a)]},_addBevelJoin:function(t,e,n,i,r,s,o,a){var l=t.getCurve(),h=l.getPrevious(),u=l.getPointAtTime(0),c=h.getNormalAtTime(1),d=l.getNormalAtTime(0),f=c.getDirectedAngle(d)<0?-n:n;if(c.setLength(f),d.setLength(f),r&&r._transformPoint(u,u),s&&(s._transformPoint(c,c),s._transformPoint(d,d)),a&&(o(u),o(u.add(c))),"miter"===e){var p=new A(u.add(c),new m(-c.y,c.x),!0).intersect(new A(u.add(d),new m(-d.y,d.x),!0),!0);if(p&&u.getDistance(p)<=i&&(o(p),!a))return}a||o(u.add(c)),o(u.add(d))},_addSquareCap:function(t,e,n,i,r,s,o){var a=t._point,l=t.getLocation(),h=l.getNormal().multiply(n);i&&i._transformPoint(a,a),r&&r._transformPoint(h,h),o&&(s(a.subtract(h)),s(a.add(h))),"square"===e&&(a=a.add(h.rotate(0===l.getTime()?-90:90))),s(a.add(h)),s(a.subtract(h))},getHandleBounds:function(t,e,n,i,r){var s,o,a=n.getStyle();if(r.stroke&&a.hasStroke()){var l=n._getStrokeMatrix(i,r),h=a.getStrokeWidth()/2,u=h;"miter"===a.getStrokeJoin()&&(u=h*a.getMiterLimit()),"square"===a.getStrokeCap()&&(u=Math.max(u,h*Math.sqrt(2))),s=z._getStrokePadding(h,l),o=z._getStrokePadding(u,l)}for(var c=new Array(6),d=1/0,f=-d,p=d,g=f,v=0,m=t.length;v<m;v++){t[v]._transformCoordinates(i,c);for(var _=0;_<6;_+=2){var y=0===_?o:s,b=y?y[0]:0,x=y?y[1]:0,S=c[_],A=c[_+1],P=S-b,C=S+b,k=A-x,T=A+x;P<d&&(d=P),C>f&&(f=C),k<p&&(p=k),T>g&&(g=T)}}return new w(d,p,f-d,g-p)}}});z.inject({statics:new function(){var t=.5522847498307936,e=[new M([-1,0],[0,t],[0,-t]),new M([0,-1],[-t,0],[t,0]),new M([1,0],[0,-t],[0,t]),new M([0,1],[t,0],[-t,0])];function n(t,e,n){var i=u.getNamed(n),r=new z(i&&!1===i.insert&&C.NO_INSERT);return r._add(t),r._closed=e,r.set(i)}function i(t,i,r){for(var s=new Array(4),o=0;o<4;o++){var a=e[o];s[o]=new M(a._point.multiply(i).add(t),a._handleIn.multiply(i),a._handleOut.multiply(i))}return n(s,!0,r)}return{Line:function(){return n([new M(m.readNamed(arguments,"from")),new M(m.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=m.readNamed(arguments,"center"),e=u.readNamed(arguments,"radius");return i(t,new y(e),arguments)},Rectangle:function(){var e,i=w.readNamed(arguments,"rectangle"),r=y.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new M(s),new M(o),new M(a),new M(l)];else{var h=(r=y.min(r,i.getSize(!0).divide(2))).width,u=r.height,c=h*t,d=u*t;e=[new M(s.add(h,0),null,[-c,0]),new M(s.subtract(0,u),[0,d]),new M(o.add(0,u),null,[0,-d]),new M(o.add(h,0),[-c,0],null),new M(a.subtract(h,0),null,[c,0]),new M(a.add(0,u),[0,-d],null),new M(l.subtract(0,u),null,[0,d]),new M(l.subtract(h,0),[c,0])]}return n(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=E._readEllipse(arguments);return i(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=m.readNamed(arguments,"from"),e=m.readNamed(arguments,"through"),n=m.readNamed(arguments,"to"),i=u.getNamed(arguments),r=new z(i&&!1===i.insert&&C.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var t=m.readNamed(arguments,"center"),e=u.readNamed(arguments,"sides"),i=u.readNamed(arguments,"radius"),r=360/e,s=e%3==0,o=new m(0,s?-i:i),a=s?-1:.5,l=new Array(e),h=0;h<e;h++)l[h]=new M(t.add(o.rotate((h+a)*r)));return n(l,!0,arguments)},Star:function(){for(var t=m.readNamed(arguments,"center"),e=2*u.readNamed(arguments,"points"),i=u.readNamed(arguments,"radius1"),r=u.readNamed(arguments,"radius2"),s=360/e,o=new m(0,-1),a=new Array(e),l=0;l<e;l++)a[l]=new M(t.add(o.rotate(s*l).multiply(l%2?r:i)));return n(a,!0,arguments)}}}});var q=F.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n,i){for(var r=n.length-1;r>=0;r--){(o=n[r])instanceof q&&((n=n.slice()).splice.apply(n,[r,1].concat(o.removeChildren())),o.remove())}n=t.base.call(this,e,n,i,z);r=0;for(var s=!i&&n&&n.length;r<s;r++){var o;(o=n[r])._clockwise===a&&o.setClockwise(0===o._index)}return n},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return 0===n.length?((r=new z(C.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r):t.base.call(this)},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()^!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e}},{beans:!0,getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var o=n[r],a=o._matrix;i.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return i.join(" ")}},{_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===z||"path"===n.type?n:u.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(0!==r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,o=r.length;s<o;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var o=i[r],a=o._matrix;n[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var n=t._children;if(e&&0===n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return u.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new z(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=m.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},u.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}}),{}));F.inject(new function(){var t={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};function e(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings():n}function n(t,e,n,i,r){var s=new t(C.NO_INSERT);return s.addChildren(e,!0),n&&(s=s.reduce({simplify:!0})),s.insertAbove(r&&i.isSibling(r)&&i.getIndex()<r.getIndex()?r:i),s.copyAttributes(i,!0),s}function i(i,r,o){var h=t[o];if(h[o]=!0,!i._children&&!i._closed)return function(t,i,r){if(!i||!i._children&&!i._closed||!r.subtract&&!r.intersect)return null;var s=e(t,!1),o=e(i,!1),a=s.getCrossings(o),l=r.subtract,h=[];function u(t){if(o.contains(t.getPointAt(t.getLength()/2))^l)return h.unshift(t),!0}for(var c=a.length-1;c>=0;c--){var d=a[c].split();d&&(u(d)&&d.getFirstSegment().setHandleIn(0,0),s.getLastSegment().setHandleOut(0,0))}return u(s),n(k,h,!1,t,i)}(i,r,h);var u=e(i,!0),c=r&&i!==r&&e(r,!0);c&&(h.subtract||h.exclude)^c.isClockwise()^u.isClockwise()&&c.reverse();var d=s(N.expand(u.getCrossings(c))),f=[],p=[];function g(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];f.push.apply(f,i._segments),p.push.apply(p,i._getMonoCurves()),i._overlapsOnly=i._validOverlapsOnly=!0}}g(u._children||[u]),c&&g(c._children||[c]);for(var v=0,m=d.length;v<m;v++)a(d[v]._segment,u,c,p,h);for(v=0,m=f.length;v<m;v++){var _=f[v],y=_._intersection;if(null==_._winding&&a(_,u,c,p,h),!y||!y._overlap){var b=_._path;b._overlapsOnly=!1,h[_._winding]&&(b._validOverlapsOnly=!1)}}return n(q,l(f,h),!0,i,r)}function r(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function s(t,e){for(var n,i,s=e&&[],o=!1,a=[],l=t.length-1;l>=0;l--){var h=t[l];if(e){if(!e(h))continue;s.unshift(h)}var u,c=h._curve,d=h._time,f=d;if(c!==n?o=!c.hasHandles():i>=4e-7&&i<=1-4e-7&&(d/=i),d<4e-7)u=c._segment1;else if(d>1-4e-7)u=c._segment2;else{var p=c.divideAtTime(d,!0);o&&a.push(c,p),u=p._segment1}h._setSegment(u);var g=u._intersection,v=h._intersection;if(g){r(g,v);for(var m=g;m;)r(m._intersection,g),m=m._next}else u._intersection=v;n=c,i=f}l=0;for(var _=a.length;l<_;l++)a[l].clearHandles();return s||t}function o(t,e,n){var i=t.x,r=t.y,s=0,a=0,l=e.length,h=[],u=Math.abs;if(n){for(var c=-1/0,d=1/0,f=r-2e-7,p=r+2e-7,g=0;g<l;g++)for(var v=e[g].values,_=D.solveCubic(v,0,i,h,0,1)-1;_>=0;_--){var y=D.getPoint(v,h[_]).y;y<f&&y>c?c=y:y>p&&y<d&&(d=y)}d=(d+r)/2,(c=(c+r)/2)>-1/0&&(s=o(new m(i,c),e).winding),d<1/0&&(a=o(new m(i,d),e).winding)}else{var b,w,x=i-2e-7,S=i+2e-7,A=0,P=0,C=!1;for(g=0;g<l;g++){var k=e[g],T=k.winding,E=(v=k.values)[1],I=v[7];if(k.last&&(b=k.last.winding,w=k.last.values[6],C=!1),r>=E&&r<=I||r>=I&&r<=E)if(T){var R=r===E?v[0]:r===I?v[6]:1===D.solveCubic(v,1,r,h,0,1)?D.getPoint(v,h[0]).x:null;null!=R&&(R>=x&&R<=S?C=!0:r===E&&T===b||r===E&&(i-R)*(i-w)<0||(R<x?s+=T:R>S&&(a+=T))),b=T,w=v[6]}else(i-v[0])*(i-v[6])<=0&&(C=!0);C&&(g>=l-1||e[g+1].last)&&(A+=1,P-=1)}0===s&&0===a&&(s=A,a=P)}return{winding:Math.max(u(s),u(a)),contour:!s^!a}}function a(t,e,n,i,r){var s,a=[],l=t,h=0;do{var u=(g=t.getCurve()).getLength();a.push({segment:t,curve:g,length:u}),h+=u,t=t.getNext()}while(t&&!t._intersection&&t!==l);u=h/2;for(var c=0,d=a.length;c<d;c++){var f=a[c],p=f.length;if(u<=p){var g,v=(g=f.curve)._path,m=v._parent,_=g.getTimeAt(u),y=g.getPointAtTime(_),b=Math.abs(g.getTangentAtTime(_).y)<1e-7;m instanceof q&&(v=m),s=r.subtract&&n&&(v===e&&n._getWinding(y,b)||v===n&&!e._getWinding(y,b))?{winding:0}:o(y,i,b);break}u-=p}for(c=a.length-1;c>=0;c--){var w=a[c].segment;w._winding=s.winding,w._contour=s.contour}}function l(t,e){var n,i,r=[];function s(t,n){return!(!t||t._visited||!(!e||e[t._winding]||!n&&e.unite&&t._contour))}function o(t){return t===n||t===i}function a(t,n){if(!t._next)return t;for(;t;){var i=t._segment,r=i.getNext(),a=r&&r._intersection;if(i!==n&&(o(i)||o(r)||!i._visited&&!r._visited&&(!e||s(i)&&(s(r)||a&&s(a._segment)))))return t;t=t._next}return null}for(var l=0,h=t.length;l<h;l++){var c,d=null,f=!1,p=t[l],v=p._intersection;if(!p._visited&&p._path._overlapsOnly){var m=p._path,_=v._segment._path,y=m._segments,b=_._segments;if(u.equals(y,b)){(e.unite||e.intersect)&&m.getArea()&&r.push(m.clone(!1));for(var w=0,x=y.length;w<x;w++)y[w]._visited=b[w]._visited=!0}}if(s(p,!0)&&(p._path._validOverlapsOnly||!v||!v._overlap)){for(n=i=null;;){var S=(v=v&&a(v,p)||v)&&v._segment;if(o(p)?f=!0:S&&(o(S)?(f=!0,p=S):s(S,s(p,!0))&&(e&&(e.intersect||e.subtract)&&(p._visited=!0),p=S)),f||p._visited){p._visited=!0;break}if(p._path._validOverlapsOnly&&!s(p))break;d||(d=new z(C.NO_INSERT),n=p,i=S);var A=p.getNext();d.add(new M(p._point,c,A&&p._handleOut)),p._visited=!0,p=A||p._path.getFirstSegment(),c=A&&A._handleIn,v=p._intersection}if(f)d.firstSegment.setHandleIn(c),d.setClosed(!0);else if(d){var P=d.getArea(!0);Math.abs(P)>=2e-7&&console.error("Boolean operation resulted in open path","segments =",d._segments.length,"length =",d.getLength(),"area=",P),d=null}d&&(d._segments.length>8||!g.isZero(d.getArea()))&&(r.push(d),d=null)}}return r}return{_getWinding:function(t,e){return o(t,this._getMonoCurves(),e).winding},unite:function(t){return i(this,t,"unite")},intersect:function(t){return i(this,t,"intersect")},subtract:function(t){return i(this,t,"subtract")},exclude:function(t){return i(this,t,"exclude")},divide:function(t){return n(k,[this.subtract(t),this.intersect(t)],!0,this,t)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t){var e=t&&t._intersection;return e&&e._overlap}var i=!1,r=!1,o=this.getIntersections(null,(function(t){return t._overlap&&(i=!0)||t.isCrossing()&&(r=!0)}));if(o=N.expand(o),i)for(var a=s(o,(function(t){return t._overlap})),h=a.length-1;h>=0;h--){var c=a[h]._segment,d=c.getPrevious(),f=c.getNext();if(c._path&&n(d)&&n(f)){c.remove(),d._handleOut.set(0,0),f._handleIn.set(0,0);var p=d.getCurve();p.isStraight()&&0===p.getLength()&&d.remove()}}r&&(s(o,i&&function(t){var e=t.getCurve(),n=t._intersection._curve,i=t._segment;if(e&&n&&e._path&&n._path)return!0;i&&(i._intersection=null)}),e=l(u.each(e,(function(t){this.push.apply(this,t._segments)}),[])));var g,v=e.length;if(v>1){var m=(e=e.slice().sort((function(t,e){return e.getBounds().getArea()-t.getBounds().getArea()})))[0],_=[m],y={},b="nonzero"===this.getFillRule(),w=b&&u.each(e,(function(t){this.push(t.isClockwise()?1:-1)}),[]);for(h=1;h<v;h++){for(var x=e[h],S=x.getInteriorPoint(),A=!1,P=null,k=!1,T=h-1;T>=0&&!P;T--)if(e[T].contains(S)){if(b&&!A&&(w[h]+=w[T],w[h]&&w[T])){k=y[h]=!0;break}A=!0,P=!y[T]&&e[T]}k||(x.setClockwise(P?!P.isClockwise():m.isClockwise()),_.push(x))}e=_,v=_.length}return v>1&&t?(e!==t&&this.setChildren(e,!0),g=this):1!==v||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),g=this),g||((g=new q(C.NO_INSERT)).addChildren(e,!0),(g=g.reduce()).copyAttributes(this),this.replaceWith(g)),g}}}),z.inject({_getMonoCurves:function(){var t,e=this._monoCurves;function n(n){var i=n[1],r=n[7],s=Math.abs((i-r)/(n[0]-n[6]))<2e-7?0:i>r?-1:1,o={values:n,winding:s};e.push(o),s&&(t=o)}function i(t){if(0!==D.getLength(t)){var e=t[1],i=t[3],r=t[5],s=t[7];if(D.isStraight(t)||e>=i==i>=r&&i>=r==r>=s)n(t);else{var o=3*(i-r)-e+s,a=2*(e+r)-4*i,l=i-e,h=[],u=g.solveQuadratic(o,a,l,h,4e-7,1-4e-7);if(u<1)n(t);else{h.sort();var c=h[0],d=D.subdivide(t,c);n(d[0]),u>1&&(c=(h[1]-c)/(1-c),n((d=D.subdivide(d[1],c))[0])),n(d[1])}}}}if(!e){e=this._monoCurves=[];for(var r=this.getCurves(),s=this._segments,o=0,a=r.length;o<a;o++)i(r[o].getValues());if(!this._closed&&s.length>1){var l=s[s.length-1]._point,h=s[0]._point,u=l._x,c=l._y,d=h._x,f=h._y;i([u,c,u,c,d,f,d,f])}e.length>0&&(e[0].last=t)}return e},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this._getMonoCurves(),n=[],i=t.y,r=[],s=0,o=e.length;s<o;s++){var a=e[s].values;if(1===e[s].winding&&i>a[1]&&i<=a[7]||i>=a[7]&&i<a[1])for(var l=D.solveCubic(a,1,i,n,0,1)-1;l>=0;l--)r.push(D.getPoint(a,n[l]).x)}r.sort((function(t,e){return t-e})),t.x=(r[0]+r[1])/2}return t}}),q.inject({_getMonoCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n]._getMonoCurves());return e}});var B=u.extend({_class:"PathIterator",initialize:function(t,e,n,i,r){var s,o=[],a=[],l=0,h=1/(n||32),u=t._segments,c=u[0];function d(t,n){var s=D.getValues(t,n,r);o.push(s),function t(n,r,s,o){if(!(o-s>h)||i&&D.isStraight(n)||D.isFlatEnough(n,e||.25)){var u=n[6]-n[0],c=n[7]-n[1],d=Math.sqrt(u*u+c*c);d>0&&(l+=d,a.push({offset:l,curve:n,index:r,time:o}))}else{var f=D.subdivide(n,.5),p=(s+o)/2;t(f[0],r,s,p),t(f[1],r,p,o)}}(s,t._index,0,1)}for(var f=1,p=u.length;f<p;f++)d(c,s=u[f]),c=s;t._closed&&d(s,u[0]),this.curves=o,this.parts=a,this.length=l,this.index=0},_get:function(t){for(var e,n=this.index;e=n,!(0===n||this.parts[--n].offset<t););for(var i=this.parts.length;e<i;e++){if((a=this.parts[e]).offset>=t){this.index=e;var r=this.parts[e-1],s=r&&r.index===a.index?r.time:0,o=r?r.offset:0;return{index:a.index,time:s+(a.time-s)*(t-o)/(a.offset-o)}}}var a;return{index:(a=this.parts[this.parts.length-1]).index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,o=r.index;s<=o;s++){var a=D.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},u.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return D[t](this.curves[n.index],n.time)}}),{})),U=u.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,o=i.length;s<o;s++){var a=i[s].point;e&&e.equals(a)||n.push(e=a.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new M(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var o=this.points;if(i-n!=1){for(var a,l=this.chordLengthParameterize(n,i),h=Math.max(e,e*e),u=!0,c=0;c<=4;c++){var d=this.generateBezier(n,i,l,r,s),f=this.findMaxError(n,i,d,l);if(f.error<e&&u)return void this.addCurve(t,d);if(a=f.index,f.error>=h)break;u=this.reparameterize(n,i,l,d),h=f.error}var p=o[a-1].subtract(o[a+1]);this.fitCubic(t,e,n,a,r,p),this.fitCubic(t,e,a,i,p.negate(),s)}else{var g=o[n],v=o[i],m=g.getDistance(v)/3;this.addCurve(t,[g,g.add(r.normalize(m)),v.add(s.normalize(m)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new M(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=Math.abs,o=this.points,a=o[t],l=o[e],h=[[0,0],[0,0]],u=[0,0],c=0,d=e-t+1;c<d;c++){var f=n[c],p=1-f,g=3*f*p,v=p*p*p,m=g*p,_=g*f,y=f*f*f,b=i.normalize(m),w=r.normalize(_),x=o[t+c].subtract(a.multiply(v+m)).subtract(l.multiply(_+y));h[0][0]+=b.dot(b),h[0][1]+=b.dot(w),h[1][0]=h[0][1],h[1][1]+=w.dot(w),u[0]+=b.dot(x),u[1]+=w.dot(x)}var S,A,P=h[0][0]*h[1][1]-h[1][0]*h[0][1];if(s(P)>1e-12){var C=h[0][0]*u[1]-h[1][0]*u[0];S=(u[0]*h[1][1]-u[1]*h[0][1])/P,A=C/P}else{var k=h[0][0]+h[0][1],T=h[1][0]+h[1][1];S=A=s(k)>1e-12?u[0]/k:s(T)>1e-12?u[1]/T:0}var E,I,R=l.getDistance(a),O=1e-12*R;if(S<O||A<O)S=A=R/3;else{var j=l.subtract(a);E=i.normalize(S),I=r.normalize(A),E.dot(j)-I.dot(j)>R*R&&(S=A=R/3,E=I=null)}return[a,a.add(E||i.normalize(S)),l.add(I||r.normalize(A)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),l=this.evaluate(1,r,n),h=o.subtract(e),u=a.dot(a)+h.dot(l);return Math.abs(u)<1e-6?n:n-h.dot(a)/u},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),l=a.x*a.x+a.y*a.y;l>=s&&(s=l,r=o)}return{error:s,index:r}}}),W=C.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&u.isPlainObject(t)&&t.x===a&&t.y===a;this._initialize(e&&t,!e&&m.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),V=W.extend({_class:"PointText",initialize:function(){W.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),o=r.hasStroke(),a=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var h=0,u=i.length;h<u;h++){t.shadowColor=l;var c=i[h];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),o=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==s&&(l-=a/("center"===s?2:1));var h=new w(l,r?-.75*o:0,a,r*o);return t?t._transformBounds(h,h):h}}),H=u.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={};function r(e){var n,r=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){n=[0,0,0];for(var s=0;s<3;s++){var o=r[s+1];n[s]=parseInt(1==o.length?o+o:o,16)/255}}else if(r=e.match(/^rgba?\((.*)\)$/)){s=0;for(var a=(n=r[1].split(",")).length;s<a;s++){o=+n[s];n[s]=s<3?o/255:o}}else if(l){var h=i[e];if(!h){t||((t=ot.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var u=t.getImageData(0,0,1,1).data;h=i[e]=[u[0]/255,u[1]/255,u[2]/255]}n=h.slice()}else n=[0,0,0];return n}var s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),o=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[o[(i=s[i])[0]],o[i[1]],o[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=(i+r)/2;return[o?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),o?0:a<.5?s/(i+r):s/(2-i-r),a]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;a<3;a++){var l=i[a];l<0&&(l+=1),l>1&&(l-=1),o[a]=6*l<1?s+6*(r-s)*l:2*l<1?r:3*l<2?s+(r-s)*(2/3-l)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return u.each(e,(function(t,i){n[i]=[],u.each(t,(function(t,r){var s=u.capitalize(t),o=/^(hue|saturation)$/.test(t),a=n[i][r]="gradient"===t?function(t){var e=this._components[0];return e!==(t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===i?function(){return m.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+s]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=a.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(i){var s,o,a,l,h=Array.prototype.slice,u=arguments,c=this.__read,d=0;Array.isArray(i)&&(i=(u=i)[0]);var f=null!=i&&typeof i;if("string"===f&&i in e&&(s=i,i=u[1],Array.isArray(i)?(o=i,a=u[2]):(c&&(d=1),u=h.call(u,1),f=typeof i)),!o){if(l="number"===f?u:"object"===f&&null!=i.length?i:null){s||(s=l.length>=3?"rgb":"gray");var p=e[s].length;a=l[p],c&&(d+=l===arguments?p+(null!=a?1:0):1),l.length>p&&(l=h.call(l,0,p))}else if("string"===f)s="rgb",4===(o=r(i)).length&&(a=o[3],o.length--);else if("object"===f)if(i.constructor===t){if(s=i._type,o=i._components.slice(),a=i._alpha,"gradient"===s)for(var g=1,v=o.length;g<v;g++){var m=o[g];m&&(o[g]=m.clone())}}else if(i.constructor===X)s="gradient",l=u;else{var _=e[s="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],y=n[s];this._components=o=[];for(g=0,v=_.length;g<v;g++){null==(b=i[_[g]])&&0===g&&"gradient"===s&&"stops"in i&&(b={stops:i.stops,radial:i.radial}),null!=(b=y[g].call(this,b))&&(o[g]=b)}a=i.alpha}c&&s&&(d=1)}if(this._type=s||"rgb",!o){this._components=o=[];for(g=0,v=(y=n[this._type]).length;g<v;g++){var b;null!=(b=y[g].call(this,l&&l[g]))&&(o[g]=b)}}this._components=o,this._properties=e[this._type],this._alpha=a,c&&(this.__read=d)},_set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return u.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new H(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=u.isPlainValue(t,!0)?H.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this._alpha===e._alpha&&u.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=p.instance,r=0,s=t.length;r<s;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,s=n[1],o=n[2];if(i._radial){var a=o.getDistance(s),l=n[3];if(l){var h=l.subtract(s);h.getLength()>a&&(l=s.add(h.normalize(a-.1)))}var u=l||s;e=t.createRadialGradient(u.x,u.y,0,s.x,s.y,a)}else e=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var c=0,d=r.length;c<d;c++){var f=r[c];e.addColorStop(f._offset||c/(d-1),f._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new H(t(),t(),t())}}})},new function(){return u.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=H.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,o=i.length;s<o;s++)r[s]=t(i[s],r[s]);return new H(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),X=u.extend({_class:"Gradient",initialize:function(t,e){this._id=v.get(),t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return u.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&(this._owners=a))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=a;for(n=0,i=(e=this._stops=G.readAll(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),G=u.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===a&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return u.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=H.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=u.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new m,selectedColor:null},e=u.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=u.set({},e,{fillColor:new H}),i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},o={_class:"Style",beans:!0,initialize:function(i,r,o){this._values={},this._owner=r,this._project=r&&r._project||o||s.project,this._defaults=!r||r instanceof k?e:r instanceof W?n:t,i&&this.set(i)}};return u.each(e,(function(t,e){var n=/Color$/.test(e),s="shadowOffset"===e,l=u.capitalize(e),h=i[e],c="set"+l,d="get"+l;o[c]=function(t){var i=this._owner,r=i&&i._children;if(r&&r.length>0&&!(i instanceof q))for(var s=0,o=r.length;s<o;s++)r[s]._style[c](t);else if(e in this._defaults){var l=this._values[e];l!==t&&(n&&(l&&l._owner!==a&&(l._owner=a),t&&t.constructor===H&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[e]=t,i&&i._changed(h||65))}},o[d]=function(t){var i,r=this._owner,o=r&&r._children;if(e in this._defaults&&(!o||0===o.length||t||r instanceof q))if((i=this._values[e])===a)(i=this._defaults[e])&&i.clone&&(i=i.clone());else{var l=n?H:s?m:null;!l||i&&i.constructor===l||(this._values[e]=i=l.read([i],0,{readNull:!0,clone:!0}),i&&n&&(i._owner=r))}else if(o)for(var h=0,c=o.length;h<c;h++){var f=o[h]._style[d]();if(0===h)i=f;else if(!u.equals(i,f))return a}return i},r[d]=function(t){return this._style[d](t)},r[c]=function(t){this._style[c](t)}})),u.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,i="set"+e;o[n]=r[n]="#get"+t,o[i]=r[i]="#set"+t})),C.inject(r),o},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){return t===this||t&&this._class===t._class&&u.equals(this._values,t._values)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),J=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=r[o],l=a?a+s:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(s.clientLeft||r.clientLeft||0),a=n.top-(s.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;o+=l.pageXOffset||s.scrollLeft||r.scrollLeft,a+=l.pageYOffset||s.scrollTop||r.scrollTop}return new w(o,a,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new w(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return J.getBounds(t,e).getPoint()},getSize:function(t){return J.getBounds(t,!0).getSize()},isInvisible:function(t){return J.getSize(t).equals(new y(0,0))},isInView:function(t){return!J.isInvisible(t)&&J.getViewportBounds(t).intersects(J.getBounds(t,!0))},isInserted:function(t){return h.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},Z={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.addEventListener(r[s],i,!1)},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new m(e.pageX||e.clientX+h.documentElement.scrollLeft,e.pageY||e.clientY+h.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(J.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){var t,e=J.getPrefixed(l,"requestAnimationFrame"),n=!1,i=[];function r(){var t=i;i=[];for(var s=0,o=t.length;s<o;s++)t[s]();(n=e&&i.length)&&e(r)}return function(s){i.push(s),e?n||(e(r),n=!0):t||(t=setInterval(r,1e3/60))}};var Q=u.extend(c,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=J.getSize(n);return t.isNaN()||t.isZero()?new y(i("width"),i("height")):t}var o;if(l&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),Z.add(n,this._viewEvents);if(J.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(n,"resize")){var a=this;Z.add(l,this._windowEvents={resize:function(){a.setViewSize(r())}})}if(o=r(),d.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var u=this._stats.domElement,c=u.style,f=J.getOffset(n);c.position="absolute",c.left=f.x+"px",c.top=f.y+"px",h.body.appendChild(u)}}else o=new y(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,this._zoom=1,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!s.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Q._focused===this&&(Q._focused=null),Q._views.splice(Q._views.indexOf(this),1),delete Q._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:u.each(C._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;J.getPrefixed(h,"hidden")&&"true"!==d.getAttribute(e,"keepalive")||!J.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){s=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new u({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new u(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=null},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new b(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=y.read(arguments),e=t.width,n=t.height,i=t.subtract(this._viewSize);i.isZero()||(this._setElementSize(e,n),this._viewSize.set(e,n),this.emit("resize",{size:t,delta:i}),this._changed(),this._autoUpdate&&this.requestUpdate())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new m,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=m.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){return this._zoom},setZoom:function(t){this.transform((new S).scale(t/this._zoom,this.getCenter())),this._zoom=t},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},isVisible:function(){return J.isInView(this._element)},isInserted:function(){return J.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=h.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(J.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},u.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?u:m).read(arguments),i=m.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getCenter(!0)))}}),{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(m.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(m.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(m.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return h&&"string"==typeof e&&(e=h.getElementById(e)),new(l?K:Q)(t,e)}}},new function(){if(l){var t,e,n,i,r,o=!1,a=!1,u=l.navigator;u.pointerEnabled||u.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in l&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var c={},d={mouseout:function(t){var e=Q._focused,n=Z.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=Z.getOffset(t,e._element),r=i.x,s=Math.abs,o=s(r),a=o-(1<<25);i.x=s(a)<o?a*(r<0?-1:1):r,T(e,t,e.viewToProject(i))}},scroll:k};c[n]=function(t){var e=Q._focused=C(t);o||(o=!0,e._handleMouseEvent("mousedown",t))},d[i]=function(n){var i=Q._focused;if(!a){var r=C(n);r?i!==r&&(i&&T(i,n),t||(t=i),i=Q._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=Q._focused=t,t=null,k())}i&&T(i,n)},d[n]=function(){a=!0},d[r]=function(t){var e=Q._focused;e&&o&&e._handleMouseEvent("mouseup",t),a=o=!1},Z.add(h,d),Z.add(l,{load:k});var f,p,g,v,m,_,y,b,w=!1,x=!1,S={doubleclick:"click",mousedrag:"mousemove"},A=!1,P={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],s="mousemove"===t,a=this._scope.tool,l=this;function h(t){return i.virtual[t]||l.responds(t)||a&&a.responds(t)}s&&o&&h("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var u=this.getBounds().contains(n),c=r&&u&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),d=c&&c.item||null,S=!1,P={};P[t.substr(5)]=!0,r&&d!==v&&(v&&E(v,null,"mouseleave",e,n),d&&E(d,null,"mouseenter",e,n),v=d),A^u&&(E(this,null,u?"mouseenter":"mouseleave",e,n),u?this:null,S=!0),!u&&!P.drag||n.equals(p)||(I(this,d,s?t:"mousemove",e,n,p),S=!0),A=u,(P.down&&u||P.up&&f)&&(I(this,d,t,e,n,f),P.down?(b=d===_&&Date.now()-y<300,g=_=d,m=!x&&d,f=n):P.up&&(x||d!==g||(y=Date.now(),I(this,d,b?"doubleclick":"click",e,n,f),b=!1),g=m=null),A=!1,S=!0),p=n,S&&a&&(w=a._handleMouseEvent(t,e,n,P)||w),(w&&!P.move||P.down&&h("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,o=this._scope,a=o.tool;function l(a){a.responds(t)&&(s=o,a.emit(t,r=r||new tt(t,e,n,i)))}this.isVisible()&&(l(this),a&&a.responds(t)&&l(a))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in P)i[s]=(i[s]||0)+(P[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:k}}}function C(t){var e=Z.getTarget(t);return e.getAttribute&&Q._viewsById[e.getAttribute("id")]}function k(){var t=Q._focused;if(!t||!t.isVisible())for(var n=0,i=Q._views.length;n<i;n++)if((t=Q._views[n]).isVisible()){Q._focused=e=t;break}}function T(t,e,n){t._handleMouseEvent("mousemove",e,n)}function E(t,e,n,i,r,s,o){var a,l=!1;function h(t,n){if(t.responds(n)){if(a||(a=new nt(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,a)&&(w=!0,a.prevented&&(x=!0),a.stopped))return l=!0}else{var o=S[n];if(o)return h(t,o)}}for(;t&&t!==o&&!h(t,n);)t=t._parent;return l}function I(t,e,n,i,r,s){return t._project.removeOn(n),x=w=!1,m&&E(m,null,n,i,r,s)||e&&e!==m&&!e.isDescendant(m)&&E(e,null,S[n]||n,i,r,s,m)||E(t,m||e||t,n,i,r,s)}}),K=Q.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof l.HTMLCanvasElement)){var n=y.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));e=ot.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(d.getAttribute(e,"hidpi"))){var r=l.devicePixelRatio||1,s=J.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/s}Q.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!d.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getPixelSize:function t(e){var n,i=s.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,o=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=o}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,o=e.length;s<o;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=u.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=$.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),et=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},o={},a=new u({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=s&&s.agent;return t&&t.mac?this.meta:this.control}}});function c(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?u.hyphenate(e):e.toLowerCase())}function d(e,n,i,l){var h,c=Q._focused;if(r[n]=e,e?o[n]=i:delete o[n],n.length>1&&(h=u.camelize(n))in a){a[h]=e;var f=s&&s.agent;if("meta"===h&&f&&f.mac)if(e)t={};else{for(var p in t)p in o&&d(!1,p,t[p],l);t=null}}else e&&t&&(t[n]=i);c&&c._handleKeyEvent(e?"keydown":"keyup",l,n,i)}return Z.add(h,{keydown:function(t){var n=c(t),r=s&&s.agent;n.length>1||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?d(!0,n,i[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=c(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),d(!0,n,r,t),e=null}},keyup:function(t){var e=c(t);e in o&&d(!1,e,o[e],t)}}),Z.add(l,{blur:function(t){for(var e in o)d(!1,e,o[e],t)}}),{modifiers:a,isDown:function(t){return!!r[t]}}},nt=$.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),it=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),rt=f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){f.call(this),this._moveCount=-1,this._downCount=-1,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){s=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,o=this.responds(t),a=this.minDistance,l=this.maxDistance,h=!1,u=this;function c(t,e){var s=n,o=r?u._point:u._downPoint||s;if(r){if(u._moveCount&&s.equals(o))return!1;if(o&&(null!=t||null!=e)){var a=s.subtract(o),l=a.getLength();if(l<(t||0))return!1;e&&(s=o.add(a.normalize(Math.min(l,e))))}u._moveCount++}return u._point=s,u._lastPoint=o||s,i.down&&(u._moveCount=-1,u._downPoint=s,u._downCount++),!0}function d(){o&&(h=u.emit(t,new it(u,t,e))||h)}if(i.down)c(),d();else if(i.up)c(null,l),d();else if(o)for(;c(a,l);)d();return h}}),st=function(t){var e=new l.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,u.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)},ot={canvases:[],getCanvas:function(t,e){if(!l)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=h.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable toprovide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},at=new function(){var t,e,n,i,r,s,o,a,l,h,c,d=Math.min,f=Math.max,p=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function v(t,e,n,i){var r=i-g(t,e,n),s=(i=g(l=t+r,h=e+r,c=n+r),d(l,h,c)),o=f(l,h,c);if(s<0){var a=i-s;l=i+(l-i)*i/a,h=i+(h-i)*i/a,c=i+(c-i)*i/a}if(o>255){var u=255-i,p=o-i;l=i+(l-i)*u/p,h=i+(h-i)*u/p,c=i+(c-i)*u/p}}function m(t,e,n){return f(t,e,n)-d(t,e,n)}function _(t,e,n,i){var r,s=[t,e,n],o=f(t,e,n),a=d(t,e,n);r=0===d(a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2)?1===f(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,l=s[0],h=s[1],c=s[2]}var y={multiply:function(){l=r*t/255,h=s*e/255,c=o*n/255},screen:function(){l=r+t-r*t/255,h=s+e-s*e/255,c=o+n-o*n/255},overlay:function(){l=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,h=s<128?2*s*e/255:255-2*(255-s)*(255-e)/255,c=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var i=t*r/255;l=i+r*(255-(255-r)*(255-t)/255-i)/255,h=(i=e*s/255)+s*(255-(255-s)*(255-e)/255-i)/255,c=(i=n*o/255)+o*(255-(255-o)*(255-n)/255-i)/255},"hard-light":function(){l=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,h=e<128?2*e*s/255:255-2*(255-e)*(255-s)/255,c=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){l=0===r?0:255===t?255:d(255,255*r/(255-t)),h=0===s?0:255===e?255:d(255,255*s/(255-e)),c=0===o?0:255===n?255:d(255,255*o/(255-n))},"color-burn":function(){l=255===r?255:0===t?0:f(0,255-255*(255-r)/t),h=255===s?255:0===e?0:f(0,255-255*(255-s)/e),c=255===o?255:0===n?0:f(0,255-255*(255-o)/n)},darken:function(){l=r<t?r:t,h=s<e?s:e,c=o<n?o:n},lighten:function(){l=r>t?r:t,h=s>e?s:e,c=o>n?o:n},difference:function(){(l=r-t)<0&&(l=-l),(h=s-e)<0&&(h=-h),(c=o-n)<0&&(c=-c)},exclusion:function(){l=r+t*(255-r-r)/255,h=s+e*(255-s-s)/255,c=o+n*(255-o-o)/255},hue:function(){_(t,e,n,m(r,s,o)),v(l,h,c,g(r,s,o))},saturation:function(){_(r,s,o,m(t,e,n)),v(l,h,c,g(r,s,o))},luminosity:function(){v(r,s,o,g(t,e,n))},color:function(){v(t,e,n,g(r,s,o))},add:function(){l=d(r+t,255),h=d(s+e,255),c=d(o+n,255)},subtract:function(){l=f(r-t,0),h=f(s-e,0),c=f(o-n,0)},average:function(){l=(r+t)/2,h=(s+e)/2,c=(o+n)/2},negation:function(){l=255-p(255-t-r),h=255-p(255-e-s),c=255-p(255-n-o)}},b=this.nativeModes=u.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),w=ot.getContext(1,1);w&&(u.each(y,(function(t,e){var n="darken"===e,i=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),i=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}w.restore(),b[e]=i})),ot.release(w)),this.process=function(u,d,f,p,g){var v=d.canvas,m="normal"===u;if(m||b[u])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,m||(f.globalCompositeOperation=u),f.drawImage(v,g.x,g.y),f.restore();else{var _=y[u];if(!_)return;for(var w=f.getImageData(g.x,g.y,v.width,v.height),x=w.data,S=d.getImageData(0,0,v.width,v.height).data,A=0,P=x.length;A<P;A+=4){t=S[A],r=x[A],e=S[A+1],s=x[A+1],n=S[A+2],o=x[A+2],i=S[A+3],a=x[A+3],_();var C=i*p/255,k=1-C;x[A]=C*l+k*r,x[A+1]=C*h+k*s,x[A+2]=C*c+k*o,x[A+3]=i*p+k*a}f.putImageData(w,g.x,g.y)}}},lt=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,n){for(var r in e){var s=e[r],o=i[r];"number"==typeof s&&n&&(s=n.number(s)),o?t.setAttributeNS(o,r,s):t.setAttribute(r,s)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(h.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:r}},ht=u.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof F||t instanceof E||t instanceof W)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=u.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&u.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});return new function(){var t;function e(e,n,i){var r=new u,s=e.getTranslation();if(n){var o=(e=e._shiftless())._inverseTransform(s);r[i?"cx":"x"]=o.x,r[i?"cy":"y"]=o.y,s=null}if(!e.isIdentity()){var a=e.decompose();if(a){var l=[],h=a.rotation,c=a.scaling,d=a.skewing;s&&!s.isZero()&&l.push("translate("+t.point(s)+")"),h&&l.push("rotate("+t.number(h)+")"),g.isZero(c.x-1)&&g.isZero(c.y-1)||l.push("scale("+t.point(c)+")"),d&&d.x&&l.push("skewX("+t.number(d.x)+")"),d&&d.y&&l.push("skewY("+t.number(d.y)+")"),r.transform=l.join(" ")}else r.transform="matrix("+e.getValues().join(",")+")"}return r}function n(n,i){for(var r=e(n._matrix),s=n._children,o=lt.create("g",r,t),a=0,l=s.length;a<l;a++){var u=s[a],c=d(u,i);if(c)if(u.isClipMask()){var f=lt.create("clipPath");f.appendChild(c),h(u,f,"clip"),lt.set(o,{"clip-path":"url(#"+f.id+")"})}else o.appendChild(c)}return o}function i(n){var i=n._type,r=n._radius,s=e(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var o=n._size,a=o.width,l=o.height;s.x-=a/2,s.y-=l/2,s.width=a,s.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?s.r=r:(s.rx=r.width,s.ry=r.height)),lt.create(i,s,t)}var r,s={Group:n,Layer:n,Raster:function(n,i){var r=e(n._matrix,!0),s=n.getSize(),o=n.getImage();return r.x-=s.width/2,r.y-=s.height/2,r.width=s.width,r.height=s.height,r.href=!1===i.embedImages&&o&&o.src||n.toDataURL(),lt.create("image",r,t)},Path:function(n,r){var s=r.matchShapes;if(s){var o=n.toShape(!1);if(o)return i(o)}var a,l=n._segments,h=l.length,u=e(n._matrix);if(s&&h>=2&&!n.hasHandles())if(h>2){a=n._closed?"polygon":"polyline";for(var c=[],d=0;d<h;d++)c.push(t.point(l[d]._point));u.points=c.join(" ")}else{a="line";var f=l[0]._point,p=l[1]._point;u.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else a="path",u.d=n.getPathData(null,r.precision);return lt.create(a,u,t)},Shape:i,CompoundPath:function(n,i){var r=e(n._matrix),s=n.getPathData(null,i.precision);return s&&(r.d=s),lt.create("path",r,t)},SymbolItem:function(n,i){var r=e(n._matrix,!0),s=n._definition,o=a(s,"symbol"),l=s._item,u=l.getBounds();return o||((o=lt.create("symbol",{viewBox:t.rectangle(u)})).appendChild(d(l,i)),h(s,o,"symbol")),r.href="#"+o.id,r.x+=u.x,r.y+=u.y,r.width=u.width,r.height=u.height,r.overflow="visible",lt.create("use",r,t)},PointText:function(n){var i=lt.create("text",e(n._matrix,!0),t);return i.textContent=n._content,i}};function o(e,n,i){var r={},s=!i&&e.getParent(),o=[];return null!=e._name&&(r.id=e._name),u.each(ht,(function(n){var i=n.get,l=n.type,c=e[i]();if(n.exportFilter?n.exportFilter(e,c):!s||!u.equals(s[i](),c)){if("color"===l&&null!=c){var d=c.getAlpha();d<1&&(r[n.attribute+"-opacity"]=d)}"style"===l?o.push(n.attribute+": "+c):r[n.attribute]=null==c?"none":"color"===l?c.gradient?function(e){var n=a(e,"color");if(!n){var i,r=e.getGradient(),s=r._radial,o=e.getOrigin(),l=e.getDestination();if(s){i={cx:o.x,cy:o.y,r:o.getDistance(l)};var u=e.getHighlight();u&&(i.fx=u.x,i.fy=u.y)}else i={x1:o.x,y1:o.y,x2:l.x,y2:l.y};i.gradientUnits="userSpaceOnUse",n=lt.create((s?"radial":"linear")+"Gradient",i,t);for(var c=r._stops,d=0,f=c.length;d<f;d++){var p=c[d],g=p._color,v=g.getAlpha();i={offset:p._offset||d/(f-1)},g&&(i["stop-color"]=g.toCSS(!0)),v<1&&(i["stop-opacity"]=v),n.appendChild(lt.create("stop",i,t))}h(e,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===l?c.join(","):"lookup"===l?n.toSVG[c]:c}})),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),lt.set(n,r,t)}function a(t,e){r||(r={ids:{},svgs:{}});var n=t._id||t.__id||(t.__id=v.get("svg"));return t&&r.svgs[e+"-"+n]}function h(t,e,n){r||a();var i=r.ids[n]=(r.ids[n]||0)+1;e.id=n+"-"+i,r.svgs[n+"-"+(t._id||t.__id)]=e}function c(t,e){var n=t,i=null;if(r){for(var s in n="svg"===t.nodeName.toLowerCase()&&t,r.svgs)i||(n||(n=lt.create("svg")).appendChild(t),i=n.insertBefore(lt.create("defs"),n.firstChild)),i.appendChild(r.svgs[s]);r=null}return e.asString?(new l.XMLSerializer).serializeToString(n):n}function d(t,e,n){var i=s[t._class],r=i&&i(t,e);if(r){var a=e.onExport;a&&(r=a(t,r,e)||r);var l=JSON.stringify(t._data);l&&"{}"!==l&&"null"!==l&&r.setAttribute("data-paper-data",l)}return r&&o(t,r,n)}function f(e){return e||(e={}),t=new p(e.precision),e}C.inject({exportSVG:function(t){return c(d(this,t=f(t),!0),t)}}),P.inject({exportSVG:function(n){n=f(n);var i=this._children,r=this.getView(),s=u.pick(n.bounds,"view"),o=n.matrix||"view"===s&&r._matrix,a=o&&S.read([o]),l="view"===s?new w([0,0],r.getViewSize()):"content"===s?C._getBounds(i,a,{stroke:!0}):w.read([s],0,{readNull:!0}),h={version:"1.1",xmlns:lt.svg,"xmlns:xlink":lt.xlink};l&&(h.width=l.width,h.height=l.height,(l.x||l.y)&&(h.viewBox=t.rectangle(l)));var p=lt.create("svg",h,t),g=p;a&&!a.isIdentity()&&(g=p.appendChild(lt.create("g",e(a),t)));for(var v=0,m=i.length;v<m;v++)g.appendChild(d(i[v],n,!0));return c(p,n)}})},new function(){var t,e={};function n(e,n,i,r,s){var o=lt.get(e,n),a=null==o?r?null:i?"":0:i?o:parseFloat(o);return/%\s*$/.test(o)?a/100*(s?1:t[/x|^width/.test(n)?"width":"height"]):a}function i(t,e,i,r,s){return e=n(t,e||"x",!1,r,s),i=n(t,i||"y",!1,r,s),!r||null!=e&&null!=i?new m(e,i):null}function r(t,e,i,r,s){return e=n(t,e||"width",!1,r,s),i=n(t,i||"height",!1,r,s),!r||null!=e&&null!=i?new y(e,i):null}function o(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?A(t)||t:"lookup"===e?n[t]:t}function c(t,e,n,i){var r=t.childNodes,s="clippath"===e,o="defs"===e,a=new k,l=a._project,h=l._currentStyle,u=[];if(s||o||(a=x(a,t,i),l._currentStyle=a._style.clone()),i)for(var c=t.querySelectorAll("defs"),d=0,f=c.length;d<f;d++)T(c[d],n,!1);for(d=0,f=r.length;d<f;d++){var p,g=r[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=T(g,n,!1))||p instanceof O||u.push(p)}return a.addChildren(u),s&&(a=x(a.reduce(),t,i)),l._currentStyle=h,(s||o)&&(a.remove(),a=null),a}function d(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new m(parseFloat(n[r]),parseFloat(n[r+1])));var o=new z(i);return"polygon"===e&&o.closePath(),o}function f(t,r){var s,o=(n(t,"href",!0)||"").substring(1),a="radialgradient"===r;if(o)(s=e[o].getGradient())._radial^a&&((s=s.clone())._radial=a);else{for(var l=t.childNodes,h=[],u=0,c=l.length;u<c;u++){var d=l[u];1===d.nodeType&&h.push(x(new G,d))}s=new X(h,a)}var f,p,g,v="userSpaceOnUse"!==n(t,"gradientUnits",!0);return a?(p=(f=i(t,"cx","cy",!1,v)).add(n(t,"r",!1,!1,v),0),g=i(t,"fx","fy",!0,v)):(f=i(t,"x1","y1",!1,v),p=i(t,"x2","y2",!1,v)),x(new H(s,f,p,g),t)._scaleToBounds=v,null}var p={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,o=r.length;s<o;s++){var a=r[s];if(1===a.nodeType)return T(a,n,i)}},g:c,svg:c,clippath:c,polygon:d,polyline:d,path:function(t){return F.create(t.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(t){var e=new I(n(t,"href",!0));return e.on("load",(function(){var e=r(t);this.setSize(e);var n=this._matrix._transformPoint(i(t).add(e.divide(2)));this.translate(n)})),e},symbol:function(t,e,n,i){return new O(c(t,e,n,i),!0)},defs:c,use:function(t){var r=(n(t,"href",!0)||"").substring(1),s=e[r],o=i(t);return s?s instanceof O?s.place(o):s.clone().translate(o):null},circle:function(t){return new E.Circle(i(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new E.Ellipse({center:i(t,"cx","cy"),radius:r(t,"rx","ry")})},rect:function(t){return new E.Rectangle(new w(i(t),r(t)),r(t,"rx","ry"))},line:function(t){return new z.Line(i(t,"x1","y1"),i(t,"x2","y2"))},text:function(t){var e=new V(i(t).add(i(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}};function g(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new S,o=0,a=r.length;o<a;o++){var l=r[o];if(!l)break;for(var h=l.split(/\(\s*/),u=h[0],c=h[1].split(/[\s,]+/g),d=0,f=c.length;d<f;d++)c[d]=parseFloat(c[d]);switch(u){case"matrix":s.append(new S(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function v(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var _=u.set(u.each(ht,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](o(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i){if(i._scaleToBounds){var r=e.getBounds();i.transform((new S).translate(r.getPoint()).scale(r.getSize()))}e instanceof E&&i.transform((new S).translate(e.getPosition(!0).negate()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,e){var n=A(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof k))return new k(n,t);t.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,s){var a,l=new w(o(e,"array")),h=r(i,null,null,!0);if(t instanceof k){var u=h?h.divide(l.getSize()):1,c=(new S).scale(u).translate(l.getPoint().negate());a=t}else t instanceof O&&(h&&l.setSize(h),a=t._item);if(a){if("visible"!==b(i,"overflow",s)){var d=new E.Rectangle(l);d.setClipMask(!0),a.addChild(d)}c&&a.transform(c)}}});function b(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r){var s=u.camelize(e);(r=t.style[s])||n.node[s]===n.parent[s]||(r=n.node[s])}return r?"none"===r?null:r:a}function x(t,e,n){var i=e.parentNode,r={node:J.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&J.getStyles(i)||{}};return u.each(_,(function(n,i){var s=b(e,i,r);t=s!==a&&n(t,s,i,e,r)||t})),t}function A(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=n&&e[n[1].replace(l.location.href.split("#")[0]+"#","")];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function T(n,i,o){var a,l,c,d=n.nodeName.toLowerCase(),f="#document"!==d,g=h.body;o&&f&&(t=r(n,null,null,!0)||s.getView().getSize(),a=lt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=n.parentNode,c=n.nextSibling,a.appendChild(n),g.appendChild(a));var v=s.settings,m=v.applyMatrix,_=v.insertItems;v.applyMatrix=!1,v.insertItems=!1;var y=p[d],b=y&&y(n,d,i,o)||null;if(v.insertItems=_,v.applyMatrix=m,b){!f||b instanceof k||(b=x(b,n,o));var w=i.onImport,S=f&&n.getAttribute("data-paper-data");w&&(b=w(n,b,i)||b),i.expandShapes&&b instanceof E&&(b.remove(),b=b.toPath()),S&&(b._data=JSON.parse(S))}return a&&(g.removeChild(a),l&&(c?l.insertBefore(n,c):l.appendChild(n))),o&&(e={},b&&u.pick(i.applyMatrix,m)&&b.matrix.apply(!0,!0)),b}function R(t,e,n){if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var i=s,r=null;function o(o){try{var h="object"==typeof o?o:(new l.DOMParser).parseFromString(o,"image/svg+xml");if(!h.nodeName)throw h=null,new Error("Unsupported SVG source: "+t);s=i,r=T(h,e,!0),e&&!1===e.insert||n._insertItem(a,r);var c=e.onLoad;c&&c(r,o)}catch(t){u(t)}}function u(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){o(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}o(t)}else{var d=h.getElementById(t);d?o(d):st({url:t,async:!0,onLoad:o,onError:u})}return r}C.inject({importSVG:function(t,e){return R(t,e,this)}}),P.inject({importSVG:function(t,e){return this.activate(),R(t,e,this)}})},u.exports.PaperScript=function(){var t=this;!function(t,e){e(t.acorn||(t.acorn={}))}(this,(function(t){"use strict";function e(t){for(var e in J=t||{},$)Object.prototype.hasOwnProperty.call(J,e)||(J[e]=$[e]);K=J.sourceFile||null}function n(t,e){var n=tt(Z,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=et,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort((function(t,e){return e.length-t.length})),n+="switch(str.length){";for(r=0;r<i.length;++r){var o=i[r];n+="case "+o[0].length+":",e(o)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=ht,this.column=et-ut}function s(){ht=1,et=ut=0,lt=!0,h()}function o(t,e){it=et,J.locations&&(st=new r),ot=t,h(),at=e,lt=t.beforeExpr}function a(){var t=J.onComment&&J.locations&&new r,e=et,i=Z.indexOf("*/",et+=2);if(-1===i&&n(et-2,"Unterminated comment"),et=i+2,J.locations){je.lastIndex=e;for(var s;(s=je.exec(Z))&&s.index<et;)++ht,ut=s.index+s[0].length}J.onComment&&J.onComment(!0,Z.slice(e+2,i),e,et,t,J.locations&&new r)}function l(){for(var t=et,e=J.onComment&&J.locations&&new r,n=Z.charCodeAt(et+=2);Q>et&&10!==n&&13!==n&&8232!==n&&8233!==n;)++et,n=Z.charCodeAt(et);J.onComment&&J.onComment(!1,Z.slice(t+2,et),t,et,e,J.locations&&new r)}function h(){for(;Q>et;){var t=Z.charCodeAt(et);if(32===t)++et;else if(13===t){++et,10===(e=Z.charCodeAt(et))&&++et,J.locations&&(++ht,ut=et)}else if(10===t||8232===t||8233===t)++et,J.locations&&(++ht,ut=et);else if(t>8&&14>t)++et;else if(47===t){var e;if(42===(e=Z.charCodeAt(et+1)))a();else{if(47!==e)break;l()}}else if(160===t)++et;else{if(!(t>=5760&&Te.test(String.fromCharCode(t))))break;++et}}}function u(t){switch(t){case 46:return function(){var t=Z.charCodeAt(et+1);return t>=48&&57>=t?g(!0):(++et,o(re))}();case 40:return++et,o($t);case 41:return++et,o(te);case 59:return++et,o(ne);case 44:return++et,o(ee);case 91:return++et,o(Jt);case 93:return++et,o(Zt);case 123:return++et,o(Qt);case 125:return++et,o(Kt);case 58:return++et,o(ie);case 63:return++et,o(se);case 48:var e=Z.charCodeAt(et+1);if(120===e||88===e)return function(){et+=2;var t=p(16);return null==t&&n(nt+2,"Expected hexadecimal number"),Me(Z.charCodeAt(et))&&n(et,"Identifier directly after number"),o(_t,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return g(!1);case 34:case 39:return function(t){et++;for(var e="";;){et>=Q&&n(nt,"Unterminated string constant");var i=Z.charCodeAt(et);if(i===t)return++et,o(bt,e);if(92===i){i=Z.charCodeAt(++et);var r=/^[0-7]+/.exec(Z.slice(et,et+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++et,r)vt&&n(et-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),et+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(v(2));break;case 117:e+=String.fromCharCode(v(4));break;case 85:e+=String.fromCharCode(v(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===Z.charCodeAt(et)&&++et;case 10:J.locations&&(ut=et,++ht);break;default:e+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||n(nt,"Unterminated string constant"),e+=String.fromCharCode(i),++et}}(t);case 47:return function(){var t=Z.charCodeAt(et+1);return lt?(++et,f()):61===t?d(le,2):d(oe,1)}();case 37:case 42:return 61===Z.charCodeAt(et+1)?d(le,2):d(be,1);case 124:case 38:return function(t){var e=Z.charCodeAt(et+1);return e===t?d(124===t?ce:de,2):61===e?d(le,2):d(124===t?fe:ge,1)}(t);case 94:return 61===Z.charCodeAt(et+1)?d(le,2):d(pe,1);case 43:case 45:return function(t){var e=Z.charCodeAt(et+1);return e===t?45==e&&62==Z.charCodeAt(et+2)&&Oe.test(Z.slice(dt,et))?(et+=3,l(),h(),c()):d(he,2):61===e?d(le,2):d(ye,1)}(t);case 60:case 62:return function(t){var e=Z.charCodeAt(et+1),n=1;return e===t?(n=62===t&&62===Z.charCodeAt(et+2)?3:2,61===Z.charCodeAt(et+n)?d(le,n+1):d(_e,n)):33==e&&60==t&&45==Z.charCodeAt(et+2)&&45==Z.charCodeAt(et+3)?(et+=4,l(),h(),c()):(61===e&&(n=61===Z.charCodeAt(et+2)?3:2),d(me,n))}(t);case 61:case 33:return function(t){return 61===Z.charCodeAt(et+1)?d(ve,61===Z.charCodeAt(et+2)?3:2):d(61===t?ae:ue,1)}(t);case 126:return d(ue,1)}return!1}function c(t){if(t?et=nt+1:nt=et,J.locations&&(rt=new r),t)return f();if(et>=Q)return o(xt);var e=Z.charCodeAt(et);if(Me(e)||92===e)return _();var i=u(e);if(!1===i){var s=String.fromCharCode(e);if("\\"===s||Ie.test(s))return _();n(et,"Unexpected character '"+s+"'")}return i}function d(t,e){var n=Z.slice(et,et+e);et+=e,o(t,n)}function f(){for(var t,e,i=et;;){et>=Q&&n(i,"Unterminated regular expression");var r=Z.charAt(et);if(Oe.test(r)&&n(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++et}var s=Z.slice(i,et);++et;var a=m();a&&!/^[gmsiy]*$/.test(a)&&n(i,"Invalid regexp flag");try{var l=new RegExp(s,a)}catch(t){t instanceof SyntaxError&&n(i,t.message),n(t)}return o(yt,l)}function p(t,e){for(var n=et,i=0,r=0,s=null==e?1/0:e;s>r;++r){var o,a=Z.charCodeAt(et);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0)>=t)break;++et,i=i*t+o}return et===n||null!=e&&et-n!==e?null:i}function g(t){var e=et,i=!1,r=48===Z.charCodeAt(et);t||null!==p(10)||n(e,"Invalid number"),46===Z.charCodeAt(et)&&(++et,p(10),i=!0);var s=Z.charCodeAt(et);69!==s&&101!==s||(43!==(s=Z.charCodeAt(++et))&&45!==s||++et,null===p(10)&&n(e,"Invalid number"),i=!0),Me(Z.charCodeAt(et))&&n(et,"Identifier directly after number");var a,l=Z.slice(e,et);return i?a=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||vt?n(e,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),o(_t,a)}function v(t){var e=p(16,t);return null===e&&n(nt,"Bad character escape sequence"),e}function m(){xe=!1;for(var t,e=!0,i=et;;){var r=Z.charCodeAt(et);if(Le(r))xe&&(t+=Z.charAt(et)),++et;else{if(92!==r)break;xe||(t=Z.slice(i,et)),xe=!0,117!=Z.charCodeAt(++et)&&n(et,"Expecting Unicode escape sequence \\uXXXX"),++et;var s=v(4),o=String.fromCharCode(s);o||n(et-1,"Invalid Unicode escape"),(e?Me(s):Le(s))||n(et-4,"Invalid Unicode escape"),t+=o}e=!1}return xe?t:Z.slice(i,et)}function _(){var t=m(),e=wt;return!xe&&ke(t)&&(e=Yt[t]),o(e,t)}function y(){ct=nt,dt=it,ft=st,c()}function b(t){if(vt=t,et=nt,J.locations)for(;ut>et;)ut=Z.lastIndexOf("\n",ut-2)+1,--ht;h(),c()}function w(){this.type=null,this.start=nt,this.end=null}function x(){this.start=rt,this.end=null,null!==K&&(this.source=K)}function S(){var t=new w;return J.locations&&(t.loc=new x),J.directSourceFile&&(t.sourceFile=J.directSourceFile),J.ranges&&(t.range=[nt,0]),t}function A(t){var e=new w;return e.start=t.start,J.locations&&(e.loc=new x,e.loc.start=t.loc.start),J.ranges&&(e.range=[t.range[0],0]),e}function P(t,e){return t.type=e,t.end=dt,J.locations&&(t.loc.end=ft),J.ranges&&(t.range[1]=dt),t}function C(t){return J.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function k(t){return ot===t?(y(),!0):void 0}function T(){return!J.strictSemicolons&&(ot===xt||ot===Kt||Oe.test(Z.slice(dt,nt)))}function E(){k(ne)||T()||R()}function I(t){ot===t?y():R()}function R(){n(nt,"Unexpected token")}function O(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),vt&&"Identifier"===t.type&&Ce(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function j(){(ot===oe||ot===le&&"/="==at)&&c(!0);var t=ot,e=S();switch(t){case St:case Ct:y();var i=t===St;k(ne)||T()?e.label=null:ot!==wt?R():(e.label=Y(),E());for(var r=0;r<gt.length;++r){var s=gt[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===gt.length&&n(e.start,"Unsyntactic "+t.keyword),P(e,i?"BreakStatement":"ContinueStatement");case kt:return y(),E(),P(e,"DebuggerStatement");case Et:return y(),gt.push(De),e.body=j(),gt.pop(),I(qt),e.test=M(),E(),P(e,"DoWhileStatement");case Ot:if(y(),gt.push(De),I($t),ot===ne)return D(e,null);if(ot===zt){var o=S();return y(),F(o,!0),P(o,"VariableDeclaration"),1===o.declarations.length&&k(Gt)?N(e,o):D(e,o)}o=z(!1,!0);return k(Gt)?(O(o),N(e,o)):D(e,o);case jt:return y(),X(e,!0);case Mt:return y(),e.test=M(),e.consequent=j(),e.alternate=k(It)?j():null,P(e,"IfStatement");case Lt:return pt||J.allowReturnOutsideFunction||n(nt,"'return' outside of function"),y(),k(ne)||T()?e.argument=null:(e.argument=z(),E()),P(e,"ReturnStatement");case Dt:y(),e.discriminant=M(),e.cases=[],I(Qt),gt.push(Ne);for(var a,l;ot!=Kt;)if(ot===At||ot===Tt){var h=ot===At;a&&P(a,"SwitchCase"),e.cases.push(a=S()),a.consequent=[],y(),h?a.test=z():(l&&n(ct,"Multiple default clauses"),l=!0,a.test=null),I(ie)}else a||R(),a.consequent.push(j());return a&&P(a,"SwitchCase"),y(),gt.pop(),P(e,"SwitchStatement");case Nt:return y(),Oe.test(Z.slice(dt,nt))&&n(dt,"Illegal newline after throw"),e.argument=z(),E(),P(e,"ThrowStatement");case Ft:if(y(),e.block=L(),e.handler=null,ot===Pt){var u=S();y(),I($t),u.param=Y(),vt&&Ce(u.param.name)&&n(u.param.start,"Binding "+u.param.name+" in strict mode"),I(te),u.guard=null,u.body=L(),e.handler=P(u,"CatchClause")}return e.guardedHandlers=mt,e.finalizer=k(Rt)?L():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),P(e,"TryStatement");case zt:return y(),F(e),E(),P(e,"VariableDeclaration");case qt:return y(),e.test=M(),gt.push(De),e.body=j(),gt.pop(),P(e,"WhileStatement");case Bt:return vt&&n(nt,"'with' in strict mode"),y(),e.object=M(),e.body=j(),P(e,"WithStatement");case Qt:return L();case ne:return y(),P(e,"EmptyStatement");default:var d=at,f=z();if(t===wt&&"Identifier"===f.type&&k(ie)){for(r=0;r<gt.length;++r)gt[r].name===d&&n(f.start,"Label '"+d+"' is already declared");var p=ot.isLoop?"loop":ot===Dt?"switch":null;return gt.push({name:d,kind:p}),e.body=j(),gt.pop(),e.label=f,P(e,"LabeledStatement")}return e.expression=f,E(),P(e,"ExpressionStatement")}}function M(){I($t);var t=z();return I(te),t}function L(t){var e,n=S(),i=!0,r=!1;for(n.body=[],I(Qt);!k(Kt);){var s=j();n.body.push(s),i&&t&&C(s)&&(e=r,b(r=!0)),i=!1}return r&&!e&&b(!1),P(n,"BlockStatement")}function D(t,e){return t.init=e,I(ne),t.test=ot===ne?null:z(),I(ne),t.update=ot===te?null:z(),I(te),t.body=j(),gt.pop(),P(t,"ForStatement")}function N(t,e){return t.left=e,t.right=z(),I(te),t.body=j(),gt.pop(),P(t,"ForInStatement")}function F(t,e){for(t.declarations=[],t.kind="var";;){var i=S();if(i.id=Y(),vt&&Ce(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=k(ae)?z(!0,e):null,t.declarations.push(P(i,"VariableDeclarator")),!k(ee))break}return t}function z(t,e){var n=q(e);if(!t&&ot===ee){var i=A(n);for(i.expressions=[n];k(ee);)i.expressions.push(q(e));return P(i,"SequenceExpression")}return n}function q(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=ot.binop;if(null!=r&&(!i||ot!==Gt)&&r>n){var s=A(e);s.left=e,s.operator=at;var o=ot;y(),s.right=t(B(),r,i);var a=P(s,o===ce||o===de?"LogicalExpression":"BinaryExpression");return t(a,n,i)}return e}(B(),-1,t)}(t);if(k(se)){var n=A(e);return n.test=e,n.consequent=z(!0),I(ie),n.alternate=z(!0,t),P(n,"ConditionalExpression")}return e}(t);if(ot.isAssign){var n=A(e);return n.operator=at,n.left=e,y(),n.right=q(t),O(e),P(n,"AssignmentExpression")}return e}function B(){if(ot.prefix){var t=S(),e=ot.isUpdate;return t.operator=at,t.prefix=!0,lt=!0,y(),t.argument=B(),e?O(t.argument):vt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),P(t,e?"UpdateExpression":"UnaryExpression")}for(var i=U(W());ot.postfix&&!T();){(t=A(i)).operator=at,t.prefix=!1,t.argument=i,O(i),y(),i=P(t,"UpdateExpression")}return i}function U(t,e){var n;return k(re)?((n=A(t)).object=t,n.property=Y(!0),n.computed=!1,U(P(n,"MemberExpression"),e)):k(Jt)?((n=A(t)).object=t,n.property=z(),n.computed=!0,I(Zt),U(P(n,"MemberExpression"),e)):!e&&k($t)?((n=A(t)).callee=t,n.arguments=G(te,!1),U(P(n,"CallExpression"),e)):t}function W(){switch(ot){case Wt:var t=S();return y(),P(t,"ThisExpression");case wt:return Y();case _t:case bt:case yt:return(t=S()).value=at,t.raw=Z.slice(nt,it),y(),P(t,"Literal");case Vt:case Ht:case Xt:return(t=S()).value=ot.atomValue,t.raw=ot.keyword,y(),P(t,"Literal");case $t:var e=rt,n=nt;y();var i=z();return i.start=n,i.end=it,J.locations&&(i.loc.start=e,i.loc.end=st),J.ranges&&(i.range=[n,it]),I(te),i;case Jt:t=S();return y(),t.elements=G(Zt,!0,!0),P(t,"ArrayExpression");case Qt:return V();case jt:t=S();return y(),X(t,!1);case Ut:return function(){var t=S();return y(),t.callee=U(W(),!0),k($t)?t.arguments=G(te,!1):t.arguments=mt,P(t,"NewExpression")}();default:R()}}function V(){var t=S(),e=!0,i=!1;for(t.properties=[],y();!k(Kt);){if(e)e=!1;else if(I(ee),J.allowTrailingCommas&&k(Kt))break;var r,s={key:H()},o=!1;if(k(ie)?(s.value=z(!0),r=s.kind="init"):J.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=H(),ot!==$t&&R(),s.value=X(S(),!1)):R(),"Identifier"===s.key.type&&(vt||i))for(var a=0;a<t.properties.length;++a){var l=t.properties[a];if(l.key.name===s.key.name){var h=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);h&&!vt&&"init"===r&&"init"===l.kind&&(h=!1),h&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return P(t,"ObjectExpression")}function H(){return ot===_t||ot===bt?W():Y(!0)}function X(t,e){ot===wt?t.id=Y():e?R():t.id=null,t.params=[];var i=!0;for(I($t);!k(te);)i?i=!1:I(ee),t.params.push(Y());var r=pt,s=gt;if(pt=!0,gt=[],t.body=L(!0),pt=r,gt=s,vt||t.body.body.length&&C(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=0>o?t.id:t.params[o];if((Pe(a.name)||Ce(a.name))&&n(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var l=0;o>l;++l)a.name===t.params[l].name&&n(a.start,"Argument name clash in strict mode")}return P(t,e?"FunctionDeclaration":"FunctionExpression")}function G(t,e,n){for(var i=[],r=!0;!k(t);){if(r)r=!1;else if(I(ee),e&&J.allowTrailingCommas&&k(t))break;n&&ot===ee?i.push(null):i.push(z(!0))}return i}function Y(t){var e=S();return t&&"everywhere"==J.forbidReserved&&(t=!1),ot===wt?(!t&&(J.forbidReserved&&(3===J.ecmaVersion?Se:Ae)(at)||vt&&Pe(at))&&-1==Z.slice(nt,it).indexOf("\\")&&n(nt,"The keyword '"+at+"' is reserved"),e.name=at):t&&ot.keyword?e.name=ot.keyword:R(),lt=!1,y(),P(e,"Identifier")}var J,Z,Q,K;t.version="0.5.0",t.parse=function(t,n){return Z=String(t),Q=Z.length,e(n),s(),function(t){ct=dt=et,J.locations&&(ft=new r),pt=vt=null,gt=[],c();var e=t||S(),n=!0;for(t||(e.body=[]);ot!==xt;){var i=j();e.body.push(i),n&&C(i)&&b(!0),n=!1}return P(e,"Program")}(J.program)};var $=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},tt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){je.lastIndex=i;var r=je.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return dt=it,c(t),r.start=nt,r.end=it,r.startLoc=rt,r.endLoc=st,r.type=ot,r.value=at,r}Z=String(t),Q=Z.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(et=t,J.locations){ht=1,ut=je.lastIndex=0;for(var n;(n=je.exec(Z))&&n.index<t;)++ht,ut=n.index+n[0].length}lt=e,h()},i};var et,nt,it,rt,st,ot,at,lt,ht,ut,ct,dt,ft,pt,gt,vt,mt=[],_t={type:"num"},yt={type:"regexp"},bt={type:"string"},wt={type:"name"},xt={type:"eof"},St={keyword:"break"},At={keyword:"case",beforeExpr:!0},Pt={keyword:"catch"},Ct={keyword:"continue"},kt={keyword:"debugger"},Tt={keyword:"default"},Et={keyword:"do",isLoop:!0},It={keyword:"else",beforeExpr:!0},Rt={keyword:"finally"},Ot={keyword:"for",isLoop:!0},jt={keyword:"function"},Mt={keyword:"if"},Lt={keyword:"return",beforeExpr:!0},Dt={keyword:"switch"},Nt={keyword:"throw",beforeExpr:!0},Ft={keyword:"try"},zt={keyword:"var"},qt={keyword:"while",isLoop:!0},Bt={keyword:"with"},Ut={keyword:"new",beforeExpr:!0},Wt={keyword:"this"},Vt={keyword:"null",atomValue:null},Ht={keyword:"true",atomValue:!0},Xt={keyword:"false",atomValue:!1},Gt={keyword:"in",binop:7,beforeExpr:!0},Yt={break:St,case:At,catch:Pt,continue:Ct,debugger:kt,default:Tt,do:Et,else:It,finally:Rt,for:Ot,function:jt,if:Mt,return:Lt,switch:Dt,throw:Nt,try:Ft,var:zt,while:qt,with:Bt,null:Vt,true:Ht,false:Xt,new:Ut,in:Gt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Wt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Jt={type:"[",beforeExpr:!0},Zt={type:"]"},Qt={type:"{",beforeExpr:!0},Kt={type:"}"},$t={type:"(",beforeExpr:!0},te={type:")"},ee={type:",",beforeExpr:!0},ne={type:";",beforeExpr:!0},ie={type:":",beforeExpr:!0},re={type:"."},se={type:"?",beforeExpr:!0},oe={binop:10,beforeExpr:!0},ae={isAssign:!0,beforeExpr:!0},le={isAssign:!0,beforeExpr:!0},he={postfix:!0,prefix:!0,isUpdate:!0},ue={prefix:!0,beforeExpr:!0},ce={binop:1,beforeExpr:!0},de={binop:2,beforeExpr:!0},fe={binop:3,beforeExpr:!0},pe={binop:4,beforeExpr:!0},ge={binop:5,beforeExpr:!0},ve={binop:6,beforeExpr:!0},me={binop:7,beforeExpr:!0},_e={binop:8,beforeExpr:!0},ye={binop:9,prefix:!0,beforeExpr:!0},be={binop:10,beforeExpr:!0};for(var we in t.tokTypes={bracketL:Jt,bracketR:Zt,braceL:Qt,braceR:Kt,parenL:$t,parenR:te,comma:ee,semi:ne,colon:ie,dot:re,question:se,slash:oe,eq:ae,name:wt,eof:xt,num:_t,regexp:yt,string:bt},Yt)t.tokTypes["_"+we]=Yt[we];var xe,Se=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ae=i("class enum extends super const export import"),Pe=i("implements interface let package private protected public static yield"),Ce=i("eval arguments"),ke=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Te=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ee="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ie=new RegExp("["+Ee+"]"),Re=new RegExp("["+Ee+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Oe=/[\n\r\u2028\u2029]/,je=/\r\n|[\n\r\u2028\u2029]/g,Me=t.isIdentifierStart=function(t){return 65>t?36===t:91>t||(97>t?95===t:123>t||t>=170&&Ie.test(String.fromCharCode(t)))},Le=t.isIdentifierChar=function(t){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||t>=170&&Re.test(String.fromCharCode(t))))},De={kind:"loop"},Ne={kind:"switch"}}));var e={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},n={"-":"__negate","+":null},i=u.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{});function r(t,n,i){var r=e[n];if(t&&t[r]){var s=t[r](i);return"!="===n?!s:s}switch(n){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function o(t,e){var i=n[t];if(i&&e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function a(e,n){return t.acorn.parse(e,n)}function c(t,i){if(!t)return"";var r=[];function o(t){for(var e=0,n=r.length;e<n;e++){var i=r[e];if(i[0]>=t)break;t+=i[1]}return t}function u(e){return t.substring(o(e.range[0]),o(e.range[1]))}function c(e,n){for(var i=o(e.range[0]),s=o(e.range[1]),a=0,l=r.length-1;l>=0;l--)if(i>r[l][0]){a=l+1;break}r.splice(a,0,[i,n.length-s+i]),t=t.substring(0,i)+n+t.substring(s)}var d,f=(i=i||{}).url||"",p=s.agent,g=p.versionNumber,v=!1,m=i.sourceMaps,_=i.source||t,y=/\r\n|\n|\r/gm,b=i.offset||0;if(m&&(p.chrome&&g>=30||p.webkit&&g>=537.76||p.firefox&&g>=23||p.node)){if(p.node)b-=2;else if(l&&f&&!l.location.href.indexOf(f)){var w=h.getElementsByTagName("html")[0].innerHTML;b=w.substr(0,w.indexOf(t)+1).match(y).length+1}var x=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((v=b>0&&!(p.chrome&&g>=36||p.safari&&g>=600||p.firefox&&g>=40||p.node))?0:b)+"A"];x.length=(t.match(y)||[]).length+1+(v?b:0),d={version:3,file:f,names:[],mappings:x.join(";AACA"),sourceRoot:"",sources:[f],sourcesContent:[_]}}return function i(r,s){if(r){for(var a in r)if("range"!==a&&"loc"!==a){var l=r[a];if(Array.isArray(l))for(var h=0,d=l.length;h<d;h++)i(l[h],r);else l&&"object"==typeof l&&i(l,r)}switch(r.type){case"UnaryExpression":if(r.operator in n&&"Literal"!==r.argument.type){var f=u(r.argument);c(r,'$__("'+r.operator+'", '+f+")")}break;case"BinaryExpression":if(r.operator in e&&"Literal"!==r.left.type){var p=u(r.left),g=u(r.right),v=function(e,n){return t.substring(o(e.range[1]),o(n.range[0]))}(r.left,r.right),m=r.operator;c(r,"__$__("+p+","+v.replace(new RegExp("\\"+m),'"'+m+'"')+", "+g+")")}break;case"UpdateExpression":case"AssignmentExpression":var _=s&&s.type;if(!("ForStatement"===_||"BinaryExpression"===_&&/^[=!<>]/.test(s.operator)||"MemberExpression"===_&&s.computed))if("UpdateExpression"===r.type){var y="__$__("+(f=u(r.argument))+', "'+r.operator[0]+'", 1)',b=f+" = "+y;r.prefix||"AssignmentExpression"!==_&&"VariableDeclarator"!==_||(u(s.left||s.id)===f&&(b=y),b=f+"; "+b),c(r,b)}else if(/^.=$/.test(r.operator)&&"Literal"!==r.left.type){p=u(r.left),g=u(r.right);c(r,p+" = __$__("+p+', "'+r.operator[0]+'", '+g+")")}}}}(a(t,{ranges:!0})),d&&(v&&(t=new Array(b+1).join("\n")+t),/^(inline|both)$/.test(m)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+l.btoa(unescape(encodeURIComponent(JSON.stringify(d))))),t+="\n//# sourceURL="+(f||"paperscript")),{url:f,source:_,code:t,map:d}}function f(t,e,n){s=e;var i,a=e.getView(),l=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new rt:null,d=l?l._events:[],f=["onFrame","onResize"].concat(d),p=[],g=[],v="object"==typeof t?t:c(t,n);function _(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(p.push(i),g.push(e[i]))}t=v.code,_({__$__:r,$__:o,paper:e,view:a,tool:l},!0),_(e),(f=u.each(f,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(p.push(e),this.push(e+": "+e))}),[]).join(", "))&&(t+="\nreturn { "+f+" };");var y=s.agent;if(h&&(y.chrome||y.firefox&&y.versionNumber<40)){var b=h.createElement("script"),w=h.head||h.getElementsByTagName("head")[0];y.firefox&&(t="\n"+t),b.appendChild(h.createTextNode("paper._execute = function("+p+") {"+t+"\n}")),w.appendChild(b),i=s._execute,delete s._execute,w.removeChild(b)}else i=Function(p,t);var x=i.apply(e,g)||{};return u.each(d,(function(t){var e=x[t];e&&(l[t]=e)})),a&&(x.onResize&&a.setOnResize(x.onResize),a.emit("resize",{size:a.size,delta:new m}),x.onFrame&&a.setOnFrame(x.onFrame),a.requestUpdate()),v}function p(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==d.getAttribute(t,"ignore")){var e=d.getAttribute(t,"canvas"),n=h.getElementById(e),i=t.src||t.getAttribute("data-src"),r=d.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var s=d.get(n.getAttribute("data-paper-scope"))||(new d).setup(n);return n.setAttribute("data-paper-scope",s._id),i?st({url:i,async:r,mimeType:"text/plain",onLoad:function(t){f(t,s,i)}}):f(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function g(){u.each(h&&h.getElementsByTagName("script"),p)}return m.inject(i),y.inject(i),H.inject(i),l&&("complete"===h.readyState?setTimeout(g):Z.add(l,{load:g})),{compile:c,execute:f,load:function(t){return t?p(t):g()},parse:a}}.call(this),(s=new(d.inject(u.exports,{enumerable:!0,Base:u,Numerical:g,Key:et,DomEvent:Z,DomElement:J,document:h,window:l,Symbol:O,PlacedSymbol:R}))).agent.node&&n(15)(s),(r="function"==typeof(i=s)?i.call(e,n,e,t):i)===a||(t.exports=r),s}.call(this,"object"==typeof self?self:null);
/*!
 * Paper.js v0.10.2 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2016, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sat Jul 9 20:14:37 2016 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2016 Juerg Lehni
 * http://scratchdisk.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * http://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */},"../../../../home/node/node_modules/pdfjs-dist/build/pdf.js":function(t,e,n){(function(e,i,r){var s;"undefined"!=typeof self&&self,s=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=63)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unreachable=e.warn=e.utf8StringToString=e.stringToUTF8String=e.stringToPDFString=e.stringToBytes=e.string32=e.shadow=e.setVerbosityLevel=e.ReadableStream=e.removeNullCharacters=e.readUint32=e.readUint16=e.readInt8=e.log2=e.loadJpegStream=e.isEvalSupported=e.isLittleEndian=e.createValidAbsoluteUrl=e.isSameOrigin=e.isSpace=e.isString=e.isNum=e.isEmptyObj=e.isBool=e.isArrayBuffer=e.info=e.getVerbosityLevel=e.getLookupTableFactory=e.deprecated=e.createObjectURL=e.createPromiseCapability=e.createBlob=e.bytesToString=e.assert=e.arraysToBytes=e.arrayByteLength=e.FormatError=e.XRefParseException=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.PasswordResponses=e.PasswordException=e.PageViewport=e.NotImplementedException=e.NativeImageDecoding=e.MissingPDFException=e.MissingDataException=e.MessageHandler=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VERBOSITY_LEVELS=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(64);var r=n(113),s={errors:0,warnings:1,infos:5},o=s.warnings;function a(t){o>=s.warnings&&console.log("Warning: "+t)}function l(t){throw new Error(t)}function h(t,e){t||l(e)}var u=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}(),c=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}(),d=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),f=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),p=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}(),g=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t,t}(),v=function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}return t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t,t}(),m=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t,t}(),_=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="FormatError",t.constructor=t,t}(),y=function(){function t(t){this.name="AbortException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),b=/\x00/g;function w(t){h("string"==typeof t,"Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function x(t){return void 0!==t.length?t.length:(h(void 0!==t.byteLength),t.byteLength)}var S=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];t.makeCssRgb=function(t,n,i){return e[1]=t,e[3]=n,e[5]=i,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]},t.getAxialAlignedBoundingBox=function(e,n){var i=t.applyTransform(e,n),r=t.applyTransform(e.slice(2,4),n),s=t.applyTransform([e[0],e[3]],n),o=t.applyTransform([e[2],e[1]],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],o=(n+s)/2,a=Math.sqrt((n+s)*(n+s)-4*(n*s-r*i))/2,l=o+a||1,h=o-a||1;return[Math.sqrt(l),Math.sqrt(h)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,n){function i(t,e){return t-e}var r=[e[0],e[2],n[0],n[2]].sort(i),s=[e[1],e[3],n[1],n[3]].sort(i),o=[];return e=t.normalizeRect(e),n=t.normalizeRect(n),(r[0]===e[0]&&r[1]===n[0]||r[0]===n[0]&&r[1]===e[0])&&(o[0]=r[1],o[2]=r[2],(s[0]===e[1]&&s[1]===n[1]||s[0]===n[1]&&s[1]===e[1])&&(o[1]=s[1],o[3]=s[2],o))};var n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return t.toRoman=function(t,e){h(Number.isInteger(t)&&t>0,"The number should be a positive integer.");for(var i,r=[];t>=1e3;)t-=1e3,r.push("M");i=t/100|0,t%=100,r.push(n[i]),i=t/10|0,t%=10,r.push(n[10+i]),r.push(n[20+t]);var s=r.join("");return e?s.toLowerCase():s},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var n in e)t[n]=e[n]},t.getInheritableProperty=function(t,e,n){for(;t&&!t.has(e);)t=t.get("Parent");return t?n?t.getArray(e):t.get(e):null},t.inherit=function(t,e,n){for(var i in t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n)t.prototype[i]=n[i]},t.loadScript=function(t,e){var n=document.createElement("script"),i=!1;n.setAttribute("src",t),e&&(n.onload=function(){i||e(),i=!0}),document.getElementsByTagName("head")[0].appendChild(n)},t}(),A=function(){function t(t,e,n,i,r,s){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;var o,a,l,h,u,c,d,f,p=(t[2]+t[0])/2,g=(t[3]+t[1])/2;switch(n=(n%=360)<0?n+360:n){case 180:o=-1,a=0,l=0,h=1;break;case 90:o=0,a=1,l=1,h=0;break;case 270:o=0,a=-1,l=-1,h=0;break;default:o=1,a=0,l=0,h=-1}s&&(l=-l,h=-h),0===o?(u=Math.abs(g-t[1])*e+i,c=Math.abs(p-t[0])*e+r,d=Math.abs(t[3]-t[1])*e,f=Math.abs(t[2]-t[0])*e):(u=Math.abs(p-t[0])*e+i,c=Math.abs(g-t[1])*e+r,d=Math.abs(t[2]-t[0])*e,f=Math.abs(t[3]-t[1])*e),this.transform=[o*e,a*e,l*e,h*e,u-o*e*p-l*e*g,c-a*e*p-h*e*g],this.width=d,this.height=f,this.fontScale=e}return t.prototype={clone:function(e){var n="scale"in(e=e||{})?e.scale:this.scale,i="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),n,i,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function(t,e){return S.applyTransform([t,e],this.transform)},convertToViewportRectangle:function(t){var e=S.applyTransform([t[0],t[1]],this.transform),n=S.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]},convertToPdfPoint:function(t,e){return S.applyInverseTransform([t,e],this.transform)}},t}(),P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function C(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}var k,T=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});throw new Error('The "Blob" constructor is not supported.')},E=(k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n&&URL.createObjectURL){var i=T(t,e);return URL.createObjectURL(i)}for(var r="data:"+e+";base64,",s=0,o=t.length;s<o;s+=3){var a=255&t[s],l=255&t[s+1],h=255&t[s+2],u=a>>2,c=(3&a)<<4|l>>4,d=s+1<o?(15&l)<<2|h>>6:64,f=s+2<o?63&h:64;r+=k[u]+k[c]+k[d]+k[f]}return r});function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?new Promise((function(i,r){i(t.apply(n,e))})):Promise.resolve(void 0)}function R(t){if("object"!==(void 0===t?"undefined":i(t)))return t;switch(t.name){case"AbortException":return new y(t.message);case"MissingPDFException":return new f(t.message);case"UnexpectedResponseException":return new p(t.message,t.status);default:return new c(t.message,t.details)}}function O(t){return!(t instanceof Error)||t instanceof y||t instanceof f||t instanceof p||t instanceof c?t:new c(t.message,t.toString())}function j(t,e,n){e?t.resolve():t.reject(n)}function M(t,e,n){var i=this;this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var r=this.callbacksCapabilities=Object.create(null),s=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===i.sourceName)if(e.stream)i._processStreamMessage(e);else if(e.isReply){var o=e.callbackId;if(!(e.callbackId in r))throw new Error("Cannot resolve callback "+o);var a=r[o];delete r[o],"error"in e?a.reject(R(e.error)):a.resolve(e.data)}else{if(!(e.action in s))throw new Error("Unknown action from worker: "+e.action);var l=s[e.action];if(e.callbackId){var h=i.sourceName,u=e.sourceName;Promise.resolve().then((function(){return l[0].call(l[1],e.data)})).then((function(t){n.postMessage({sourceName:h,targetName:u,isReply:!0,callbackId:e.callbackId,data:t})}),(function(t){n.postMessage({sourceName:h,targetName:u,isReply:!0,callbackId:e.callbackId,error:O(t)})}))}else e.streamId?i._createStreamSink(e):l[0].call(l[1],e.data)}},n.addEventListener("message",this._onComObjOnMessage)}M.prototype={on:function(t,e,n){var i=this.actionHandler;if(i[t])throw new Error('There is already an actionName called "'+t+'"');i[t]=[e,n]},send:function(t,e,n){var i={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e};this.postMessage(i,n)},sendWithPromise:function(t,e,n){var i=this.callbackId++,r={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e,callbackId:i},s=C();this.callbacksCapabilities[i]=s;try{this.postMessage(r,n)}catch(t){s.reject(t)}return s.promise},sendWithStream:function(t,e,n,i){var s=this,o=this.streamId++,a=this.sourceName,l=this.targetName;return new r.ReadableStream({start:function(n){var i=C();return s.streamControllers[o]={controller:n,startCall:i,isClosed:!1},s.postMessage({sourceName:a,targetName:l,action:t,streamId:o,data:e,desiredSize:n.desiredSize}),i.promise},pull:function(t){var e=C();return s.streamControllers[o].pullCall=e,s.postMessage({sourceName:a,targetName:l,stream:"pull",streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:function(t){var e=C();return s.streamControllers[o].cancelCall=e,s.streamControllers[o].isClosed=!0,s.postMessage({sourceName:a,targetName:l,stream:"cancel",reason:t,streamId:o}),e.promise}},n)},_createStreamSink:function(t){var e=this,n=this,i=this.actionHandler[t.action],r=t.streamId,s=t.desiredSize,o=this.sourceName,a=t.sourceName,l=C(),h=function(t){var n=t.stream,i=t.chunk,s=t.transfers,l=t.success,h=t.reason;e.postMessage({sourceName:o,targetName:a,stream:n,streamId:r,chunk:i,success:l,reason:h},s)},u={enqueue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];if(!this.isCancelled){var i=this.desiredSize;this.desiredSize-=e,i>0&&this.desiredSize<=0&&(this.sinkCapability=C(),this.ready=this.sinkCapability.promise),h({stream:"enqueue",chunk:t,transfers:n})}},close:function(){this.isCancelled||(this.isCancelled=!0,h({stream:"close"}),delete n.streamSinks[r])},error:function(t){this.isCancelled||(this.isCancelled=!0,h({stream:"error",reason:t}))},sinkCapability:l,onPull:null,onCancel:null,isCancelled:!1,desiredSize:s,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[r]=u,I(i[0],[t.data,u],i[1]).then((function(){h({stream:"start_complete",success:!0})}),(function(t){h({stream:"start_complete",success:!1,reason:t})}))},_processStreamMessage:function(t){var e=this,n=this.sourceName,i=t.sourceName,r=t.streamId,s=function(t){var s=t.stream,o=t.success,a=t.reason;e.comObj.postMessage({sourceName:n,targetName:i,stream:s,success:o,streamId:r,reason:a})},o=function(){Promise.all([e.streamControllers[t.streamId].startCall,e.streamControllers[t.streamId].pullCall,e.streamControllers[t.streamId].cancelCall].map((function(t){return t&&(e=t.promise,Promise.resolve(e).catch((function(){})));var e}))).then((function(){delete e.streamControllers[t.streamId]}))};switch(t.stream){case"start_complete":j(this.streamControllers[t.streamId].startCall,t.success,R(t.reason));break;case"pull_complete":j(this.streamControllers[t.streamId].pullCall,t.success,R(t.reason));break;case"pull":if(!this.streamSinks[t.streamId]){s({stream:"pull_complete",success:!0});break}this.streamSinks[t.streamId].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[t.streamId].sinkCapability.resolve(),this.streamSinks[t.streamId].desiredSize=t.desiredSize,I(this.streamSinks[t.streamId].onPull).then((function(){s({stream:"pull_complete",success:!0})}),(function(t){s({stream:"pull_complete",success:!1,reason:t})}));break;case"enqueue":h(this.streamControllers[t.streamId],"enqueue should have stream controller"),this.streamControllers[t.streamId].isClosed||this.streamControllers[t.streamId].controller.enqueue(t.chunk);break;case"close":if(h(this.streamControllers[t.streamId],"close should have stream controller"),this.streamControllers[t.streamId].isClosed)break;this.streamControllers[t.streamId].isClosed=!0,this.streamControllers[t.streamId].controller.close(),o();break;case"error":h(this.streamControllers[t.streamId],"error should have stream controller"),this.streamControllers[t.streamId].controller.error(R(t.reason)),o();break;case"cancel_complete":j(this.streamControllers[t.streamId].cancelCall,t.success,R(t.reason)),o();break;case"cancel":if(!this.streamSinks[t.streamId])break;I(this.streamSinks[t.streamId].onCancel,[R(t.reason)]).then((function(){s({stream:"cancel_complete",success:!0})}),(function(t){s({stream:"cancel_complete",success:!1,reason:t})})),this.streamSinks[t.streamId].sinkCapability.reject(R(t.reason)),this.streamSinks[t.streamId].isCancelled=!0,delete this.streamSinks[t.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.VERBOSITY_LEVELS=s,e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.AbortException=y,e.InvalidPDFException=d,e.MessageHandler=M,e.MissingDataException=v,e.MissingPDFException=f,e.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},e.NotImplementedException=g,e.PageViewport=A,e.PasswordException=u,e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},e.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.UnexpectedResponseException=p,e.UnknownErrorException=c,e.Util=S,e.XRefParseException=m,e.FormatError=_,e.arrayByteLength=x,e.arraysToBytes=function(t){if(1===t.length&&t[0]instanceof Uint8Array)return t[0];var e,n,i,r=0,s=t.length;for(e=0;e<s;e++)r+=i=x(n=t[e]);var o=0,a=new Uint8Array(r);for(e=0;e<s;e++)(n=t[e])instanceof Uint8Array||(n="string"==typeof n?w(n):new Uint8Array(n)),i=n.byteLength,a.set(n,o),o+=i;return a},e.assert=h,e.bytesToString=function(t){h(null!==t&&"object"===(void 0===t?"undefined":i(t))&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var n=[],r=0;r<e;r+=8192){var s=Math.min(r+8192,e),o=t.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")},e.createBlob=T,e.createPromiseCapability=C,e.createObjectURL=E,e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getLookupTableFactory=function(t){var e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},e.getVerbosityLevel=function(){return o},e.info=function(t){o>=s.infos&&console.log("Info: "+t)},e.isArrayBuffer=function(t){return"object"===(void 0===t?"undefined":i(t))&&null!==t&&void 0!==t.byteLength},e.isBool=function(t){return"boolean"==typeof t},e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.isNum=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSpace=function(t){return 32===t||9===t||13===t||10===t},e.isSameOrigin=function(t,e){try{var n=new URL(t);if(!n.origin||"null"===n.origin)return!1}catch(t){return!1}var i=new URL(e,n);return n.origin===i.origin},e.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{var n=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(t){}return null},e.isLittleEndian=function(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]},e.isEvalSupported=function(){try{return new Function(""),!0}catch(t){return!1}},e.loadJpegStream=function(t,e,n){var i=new Image;i.onload=function(){n.resolve(t,i)},i.onerror=function(){n.resolve(t,null),a("Error during JPEG image loading")},i.src=e},e.log2=function(t){return t<=0?0:Math.ceil(Math.log2(t))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.removeNullCharacters=function(t){return"string"!=typeof t?(a("The argument for removeNullCharacters must be a string."),t):t.replace(b,"")},e.ReadableStream=r.ReadableStream,e.setVerbosityLevel=function(t){o=t},e.shadow=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n},e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=w,e.stringToPDFString=function(t){var e,n=t.length,i=[];if("þ"===t[0]&&"ÿ"===t[1])for(e=2;e<n;e+=2)i.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<n;++e){var r=P[t.charCodeAt(e)];i.push(r?String.fromCharCode(r):t.charAt(e))}return i.join("")},e.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=a,e.unreachable=l},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":i(t))?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var i=n(44)("wks"),r=n(20),s=n(3).Symbol,o="function"==typeof s;(t.exports=function(t){return i[t]||(i[t]=o&&s[t]||(o?s:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,n){"use strict";var i=n(3),r=n(5),s=n(11),o=n(8),a=n(9),l=function t(e,n,l){var h,u,c,d,f=e&t.F,p=e&t.G,g=e&t.P,v=e&t.B,m=p?i:e&t.S?i[n]||(i[n]={}):(i[n]||{}).prototype,_=p?r:r[n]||(r[n]={}),y=_.prototype||(_.prototype={});for(h in p&&(l=n),l)c=((u=!f&&m&&void 0!==m[h])?m:l)[h],d=v&&u?a(c,i):g&&"function"==typeof c?a(Function.call,c):c,m&&o(m,h,c,e&t.U),_[h]!=c&&s(_,h,d),g&&y[h]!=c&&(y[h]=c)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){"use strict";var i=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=i)},function(t,e,n){"use strict";var i=n(1);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,n){"use strict";var i=n(3),r=n(11),s=n(7),o=n(20)("src"),a=Function.toString,l=(""+a).split("toString");n(5).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var h="function"==typeof n;h&&(s(n,"name")||r(n,"name",e)),t[e]!==n&&(h&&(s(n,o)||r(n,o,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||a.call(this)}))},function(t,e,n){"use strict";var i=n(16);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DummyStatTimer=e.StatTimer=e.SimpleXMLParser=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.getDefaultSetting=e.LinkTarget=e.getFilenameFromUrl=e.isExternalLinkTargetSet=e.addLinkAttributes=e.RenderingCancelledException=void 0;var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),o=n(14),a=(i=o)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h="http://www.w3.org/2000/svg",u=function(){function t(){l(this,t)}return r(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("invalid canvas size");var n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t,n.height=e,{canvas:n,context:i}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("canvas is not specified");if(e<=0||n<=0)throw new Error("invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}]),t}(),c=function(){function t(e){var n=e.baseUrl,i=void 0===n?null:n,r=e.isCompressed,s=void 0!==r&&r;l(this,t),this.baseUrl=i,this.isCompressed=s}return r(t,[{key:"fetch",value:function(t){var e=this,n=t.name;return this.baseUrl?n?new Promise((function(t,i){var r=e.baseUrl+n+(e.isCompressed?".bcmap":""),o=new XMLHttpRequest;o.open("GET",r,!0),e.isCompressed&&(o.responseType="arraybuffer"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){var n=void 0;if(e.isCompressed&&o.response?n=new Uint8Array(o.response):!e.isCompressed&&o.responseText&&(n=(0,s.stringToBytes)(o.responseText)),n)return void t({cMapData:n,compressionType:e.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE})}i(new Error("Unable to load "+(e.isCompressed?"binary ":"")+"CMap at: "+r))}},o.send(null)})):Promise.reject(new Error("CMap name must be specified.")):Promise.reject(new Error('CMap baseUrl must be specified, see "PDFJS.cMapUrl" (and also "PDFJS.cMapPacked").'))}}]),t}(),d=function(){function t(){l(this,t)}return r(t,[{key:"create",value:function(t,e){(0,s.assert)(t>0&&e>0,"Invalid SVG dimensions");var n=document.createElementNS(h,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+t+" "+e),n}},{key:"createElement",value:function(t){return(0,s.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(h,t)}}]),t}(),f=function(){function t(e,n){l(this,t),this.nodeName=e,this.nodeValue=n,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return r(t,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes[0]}},{key:"nextSibling",get:function(){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}}]),t}(),p=function(){function t(){l(this,t)}return r(t,[{key:"parseFromString",value:function(t){var e=this,n=[];t=(t=(t=(t=t.replace(/<\?[\s\S]*?\?>|<!--[\s\S]*?-->/g,"").trim()).replace(/<!DOCTYPE[^>\[]+(\[[^\]]+)?[^>]+>/g,"").trim()).replace(/>([^<][\s\S]*?)</g,(function(t,i){var r=n.length,s=new f("#text",e._decodeXML(i));return n.push(s),0===s.textContent.trim().length?"><":">"+r+",<"}))).replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,(function(t,e){var i=n.length,r=new f("#text",e);return n.push(r),i+","}));var i=/<([\w\:]+)((?:[\s\w:=]|'[^']*'|"[^"]*")*)(?:\/>|>([\d,]*)<\/[^>]+>)/g,r=void 0;do{r=n.length,t=t.replace(i,(function(t,e,i,r){var s=n.length,o=new f(e),a=[];return r&&((r=r.split(",")).pop(),r.forEach((function(t){var e=n[+t];e.parentNode=o,a.push(e)}))),o.childNodes=a,n.push(o),s+","}))}while(r<n.length);return{documentElement:n.pop()}}},{key:"_decodeXML",value:function(t){return t.indexOf("&")<0?t:t.replace(/&(#(x[0-9a-f]+|\d+)|\w+);/gi,(function(t,e,n){if(n)return n="x"===n[0]?parseInt(n.substring(1),16):+n,String.fromCharCode(n);switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';case"apos":return"'"}return"&"+e+";"}))}}]),t}(),g=function(){function t(t,e){this.message=t,this.type=e}return t.prototype=new Error,t.prototype.name="RenderingCancelledException",t.constructor=t,t}(),v={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},m=["","_self","_blank","_parent","_top"];function _(t){var e=a.default.PDFJS;switch(t){case"pdfBug":return!!e&&e.pdfBug;case"disableAutoFetch":return!!e&&e.disableAutoFetch;case"disableStream":return!!e&&e.disableStream;case"disableRange":return!!e&&e.disableRange;case"disableFontFace":return!!e&&e.disableFontFace;case"disableCreateObjectURL":return!!e&&e.disableCreateObjectURL;case"disableWebGL":return!e||e.disableWebGL;case"cMapUrl":return e?e.cMapUrl:null;case"cMapPacked":return!!e&&e.cMapPacked;case"postMessageTransfers":return!e||e.postMessageTransfers;case"workerPort":return e?e.workerPort:null;case"workerSrc":return e?e.workerSrc:null;case"disableWorker":return!!e&&e.disableWorker;case"maxImageSize":return e?e.maxImageSize:-1;case"imageResourcesPath":return e?e.imageResourcesPath:"";case"isEvalSupported":return!e||e.isEvalSupported;case"externalLinkTarget":if(!e)return v.NONE;switch(e.externalLinkTarget){case v.NONE:case v.SELF:case v.BLANK:case v.PARENT:case v.TOP:return e.externalLinkTarget}return(0,s.warn)("PDFJS.externalLinkTarget is invalid: "+e.externalLinkTarget),e.externalLinkTarget=v.NONE,v.NONE;case"externalLinkRel":return e?e.externalLinkRel:"noopener noreferrer nofollow";case"enableStats":return!(!e||!e.enableStats);default:throw new Error("Unknown default setting: "+t)}}var y=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l(this,t),this.enabled=!!e,this.started=Object.create(null),this.times=[]}return r(t,[{key:"time",value:function(t){this.enabled&&(t in this.started&&(0,s.warn)("Timer is already running for "+t),this.started[t]=Date.now())}},{key:"timeEnd",value:function(t){this.enabled&&(t in this.started||(0,s.warn)("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])}},{key:"toString",value:function(){for(var t=this.times,e="",n=0,i=0,r=t.length;i<r;++i){var s=t[i].name;s.length>n&&(n=s.length)}for(var o=0,a=t.length;o<a;++o){var l=t[o],h=l.end-l.start;e+=l.name.padEnd(n)+" "+h+"ms\n"}return e}}]),t}(),b=function(){function t(){l(this,t),(0,s.unreachable)("Cannot initialize DummyStatTimer.")}return r(t,null,[{key:"time",value:function(t){}},{key:"timeEnd",value:function(t){}},{key:"toString",value:function(){return""}}]),t}();e.RenderingCancelledException=g,e.addLinkAttributes=function(t,e){var n=e&&e.url;if(t.href=t.title=n?(0,s.removeNullCharacters)(n):"",n){var i=e.target;void 0===i&&(i=_("externalLinkTarget")),t.target=m[i];var r=e.rel;void 0===r&&(r=_("externalLinkRel")),t.rel=r}},e.isExternalLinkTargetSet=function(){switch(_("externalLinkTarget")){case v.NONE:return!1;case v.SELF:case v.BLANK:case v.PARENT:case v.TOP:return!0}},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),n=t.indexOf("?"),i=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)},e.LinkTarget=v,e.getDefaultSetting=_,e.DEFAULT_LINK_REL="noopener noreferrer nofollow",e.DOMCanvasFactory=u,e.DOMCMapReaderFactory=c,e.DOMSVGFactory=d,e.SimpleXMLParser=p,e.StatTimer=y,e.DummyStatTimer=b},function(t,e,n){"use strict";var i=n(15),r=n(26);t.exports=n(12)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";t.exports=!n(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,i){"use strict";t.exports="undefined"!=typeof window&&window.Math===Math?window:void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:{}},function(t,e,n){"use strict";var i=n(6),r=n(40),s=n(41),o=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(i(t),e=s(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var i=n(27),r=n(28);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var i=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+r).toString(36))}},function(t,e,n){"use strict";var i=n(81),r=n(48);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(15).f,r=n(7),s=n(2)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,s)&&i(t,s,{configurable:!0,value:e})}},function(t,e,n){"use strict";var i=n(9),r=n(86),s=n(87),o=n(6),a=n(29),l=n(88),h={},u={},c=t.exports=function(t,e,n,c,d){var f,p,g,v,m=d?function(){return t}:l(t),_=i(n,c,e?2:1),y=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(s(m)){for(f=a(t.length);f>y;y++)if((v=e?_(o(p=t[y])[0],p[1]):_(t[y]))===h||v===u)return v}else for(g=m.call(t);!(p=g.next()).done;)if((v=r(g,_,p.value,e))===h||v===u)return v};c.BREAK=h,c.RETURN=u},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){return"object"===(void 0===i?"undefined":r(i))&&i+""=="[object process]"}},function(t,e,n){"use strict";var i=n(1),r=n(3).document,s=i(r)&&i(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,n){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var i=n(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(30),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e,n){"use strict";var i=n(18),r=n(2)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:s?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){"use strict";var i=n(44)("keys"),r=n(20);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){"use strict";var i=n(28);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var i=n(16);function r(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)}t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";var i=n(8);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(20)("meta"),s=n(1),o=n(7),a=n(15).f,l=0,h=Object.isExtensible||function(){return!0},u=!n(13)((function(){return h(Object.preventExtensions({}))})),c=function(t){a(t,r,{value:{i:"O"+ ++l,w:{}}})},d=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!s(t))return"symbol"==(void 0===t?"undefined":i(t))?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!h(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!h(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return u&&d.NEED&&h(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){"use strict";e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateResponseStatus=e.validateRangeRequestCapabilities=e.extractFilenameFromHeader=e.createResponseStatusError=void 0;var i=n(0),r=n(122);e.createResponseStatusError=function(t,e){return 404===t||0===t&&/^file:/.test(e)?new i.MissingPDFException('Missing PDF "'+e+'".'):new i.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+e+'".',t)},e.extractFilenameFromHeader=function(t){var e=t("Content-Disposition");if(e){var n=(0,r.getFilenameFromContentDispositionHeader)(e);if(/\.pdf$/i.test(n))return n}return null},e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,n=t.isHttp,r=t.rangeChunkSize,s=t.disableRange;(0,i.assert)(r>0,"Range chunk size must be larger than zero");var o={allowRangeRequests:!1,suggestedLength:void 0};if(s||!n)return o;if("bytes"!==e("Accept-Ranges"))return o;if("identity"!==(e("Content-Encoding")||"identity"))return o;var a=parseInt(e("Content-Length"),10);return Number.isInteger(a)?(o.suggestedLength=a,a<=2*r||(o.allowRangeRequests=!0),o):o},e.validateResponseStatus=function(t){return 200===t||206===t}},function(t,e,n){"use strict";t.exports=!n(12)&&!n(13)((function(){return 7!=Object.defineProperty(n(25)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var i=n(1);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var i=n(17),r=n(29),s=n(67);t.exports=function(t){return function(e,n,o){var a,l=i(e),h=r(l.length),u=s(o,h);if(t&&n!=n){for(;h>u;)if((a=l[u++])!=a)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(2)("unscopables"),r=Array.prototype;null==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){"use strict";var i=n(3),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,n){"use strict";var i=n(31),r={};r[n(2)("toStringTag")]="z",r+""!="[object z]"&&n(8)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},function(t,e,n){"use strict";var i=n(47),r=n(4),s=n(8),o=n(11),a=n(7),l=n(19),h=n(78),u=n(22),c=n(82),d=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,g,v,m,_){h(n,e,g);var y,b,w,x=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",A="values"==v,P=!1,C=t.prototype,k=C[d]||C["@@iterator"]||v&&C[v],T=!f&&k||x(v),E=v?A?x("entries"):T:void 0,I="Array"==e&&C.entries||k;if(I&&(w=c(I.call(new t)))!==Object.prototype&&w.next&&(u(w,S,!0),i||a(w,d)||o(w,d,p)),A&&k&&"values"!==k.name&&(P=!0,T=function(){return k.call(this)}),i&&!_||!f&&!P&&C[d]||o(C,d,T),l[e]=T,l[S]=p,v)if(y={values:A?T:x("values"),keys:m?T:x("keys"),entries:E},_)for(b in y)b in C||s(C,b,y[b]);else r(r.P+r.F*(f||P),e,y);return y}},function(t,e,n){"use strict";t.exports=!1},function(t,e,n){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var i=n(3).document;t.exports=i&&i.documentElement},function(t,e,n){"use strict";for(var i=n(83),r=n(21),s=n(8),o=n(3),a=n(11),l=n(19),h=n(2),u=h("iterator"),c=h("toStringTag"),d=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(f),g=0;g<p.length;g++){var v,m=p[g],_=f[m],y=o[m],b=y&&y.prototype;if(b&&(b[u]||a(b,u,d),b[c]||a(b,c,m),l[m]=d,_))for(v in i)b[v]||s(b,v,i[v],!0)}},function(t,e,n){"use strict";var i=n(6),r=n(16),s=n(2)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||null==(n=i(o)[s])?e:r(n)}},function(t,e,n){"use strict";var i,r,s,o=n(9),a=n(89),l=n(49),h=n(25),u=n(3),c=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=u.Dispatch,v=0,m={},_=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},y=function(t){_.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){a("function"==typeof t?t:Function(t),e)},i(v),v},f=function(t){delete m[t]},"process"==n(18)(c)?i=function(t){c.nextTick(o(_,t,1))}:g&&g.now?i=function(t){g.now(o(_,t,1))}:p?(s=(r=new p).port2,r.port1.onmessage=y,i=o(s.postMessage,s,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):i="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(o(_,t,1),0)}),t.exports={set:d,clear:f}},function(t,e,n){"use strict";t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var i=n(6),r=n(1),s=n(35);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=s.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var i=n(2)("iterator"),r=!1;try{var s=[7][i]();s.return=function(){r=!0},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}},s[i]=function(){return o},t(s)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(9),r=n(27),s=n(33),o=n(29),a=n(96);t.exports=function(t,e){var n=1==t,l=2==t,h=3==t,u=4==t,c=6==t,d=5==t||c,f=e||a;return function(e,a,p){for(var g,v,m=s(e),_=r(m),y=i(a,p,3),b=o(_.length),w=0,x=n?f(e,b):l?f(e,0):void 0;b>w;w++)if((d||w in _)&&(v=y(g=_[w],w,m),t))if(n)x[w]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(u)return!1;return c?-1:h||u?u:x}}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.build=e.version=e.setPDFNetworkStreamFactory=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=e.getDocument=void 0;var r,s,o,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=i(0),u=i(10),c=i(116),d=i(117),f=i(14),p=(r=f)&&r.__esModule?r:{default:r},g=i(59),v=i(119),m=i(120),_=!1,y=!1,b="undefined"!=typeof document&&document.currentScript?document.currentScript.src:null,w=!1;"undefined"==typeof window?(_=!0,w=!0):w=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(s=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var x,S="undefined"!=typeof requirejs&&requirejs.load;o=w?function(t){Promise.resolve().then(function(){var e;e=n(!function(){var t=new Error("Cannot find module './pdf.worker.js'");throw t.code="MODULE_NOT_FOUND",t}()),t(e.WorkerMessageHandler)}.bind(null,n)).catch(n.oe)}:S?function(t){requirejs(["pdfjs-dist/build/pdf.worker"],(function(e){t(e.WorkerMessageHandler)}))}:null;var A=function(){var t=0;function e(){this._capability=(0,h.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return e.prototype={get promise(){return this._capability.promise},destroy:function(){var t=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){t._transport=null,t._worker&&(t._worker.destroy(),t._worker=null)}))},then:function(t,e){return this.promise.then.apply(this.promise,arguments)}},e}(),P=function(){function t(t,e){this.length=t,this.initialData=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,h.createPromiseCapability)()}return t.prototype={addRangeListener:function(t){this._rangeListeners.push(t)},addProgressListener:function(t){this._progressListeners.push(t)},addProgressiveReadListener:function(t){this._progressiveReadListeners.push(t)},onDataRange:function(t,e){for(var n=this._rangeListeners,i=0,r=n.length;i<r;++i)n[i](t,e)},onDataProgress:function(t){var e=this;this._readyCapability.promise.then((function(){for(var n=e._progressListeners,i=0,r=n.length;i<r;++i)n[i](t)}))},onDataProgressiveRead:function(t){var e=this;this._readyCapability.promise.then((function(){for(var n=e._progressiveReadListeners,i=0,r=n.length;i<r;++i)n[i](t)}))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(t,e){(0,h.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function(){}},t}(),C=function(){function t(t,e,n){this.pdfInfo=t,this.transport=e,this.loadingTask=n}return t.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(t){return this.transport.getPage(t)},getPageIndex:function(t){return this.transport.getPageIndex(t)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(t){return this.transport.getDestination(t)},getPageLabels:function(){return this.transport.getPageLabels()},getPageMode:function(){return this.transport.getPageMode()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}},t}(),k=function(){function t(t,e,n){this.pageIndex=t,this.pageInfo=e,this.transport=n,this._stats=(0,u.getDefaultSetting)("enableStats")?new u.StatTimer:u.DummyStatTimer,this.commonObjs=n.commonObjs,this.objs=new R,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return t.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get userUnit(){return this.pageInfo.userUnit},get view(){return this.pageInfo.view},getViewport:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new h.PageViewport(this.view,t,e,0,0,n)},getAnnotations:function(t){var e=t&&t.intent||null;return this.annotationsPromise&&this.annotationsIntent===e||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,e),this.annotationsIntent=e),this.annotationsPromise},render:function(t){var e=this,n=this._stats;n.time("Overall"),this.pendingCleanup=!1;var i="print"===t.intent?"print":"display",r=t.canvasFactory||new u.DOMCanvasFactory,s=new m.WebGLContext({enable:!(0,u.getDefaultSetting)("disableWebGL")});this.intentStates[i]||(this.intentStates[i]=Object.create(null));var o=this.intentStates[i];o.displayReadyCapability||(o.receivingOperatorList=!0,o.displayReadyCapability=(0,h.createPromiseCapability)(),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1},n.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:i,renderInteractiveForms:!0===t.renderInteractiveForms}));var a=function(t){var i=o.renderTasks.indexOf(l);i>=0&&o.renderTasks.splice(i,1),e.cleanupAfterRender&&(e.pendingCleanup=!0),e._tryCleanup(),t?l.capability.reject(t):l.capability.resolve(),n.timeEnd("Rendering"),n.timeEnd("Overall")},l=new j(a,t,this.objs,this.commonObjs,o.operatorList,this.pageNumber,r,s);l.useRequestAnimationFrame="print"!==i,o.renderTasks||(o.renderTasks=[]),o.renderTasks.push(l);var c=l.task;return o.displayReadyCapability.promise.then((function(t){e.pendingCleanup?a():(n.time("Rendering"),l.initializeGraphics(t),l.operatorListChanged())})).catch(a),c},getOperatorList:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var t,e=this.intentStates.oplist;return e.opListReadCapability||((t={}).operatorListChanged=function(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);var n=e.renderTasks.indexOf(t);n>=0&&e.renderTasks.splice(n,1)}},e.receivingOperatorList=!0,e.opListReadCapability=(0,h.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(t),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),e.opListReadCapability.promise},streamTextContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=100;return this.transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===t.normalizeWhitespace,combineTextItems:!0!==t.disableCombineTextItems},{highWaterMark:e,size:function(t){return t.items.length}})},getTextContent:function(t){t=t||{};var e=this.streamTextContent(t);return new Promise((function(t,n){var i=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){i.read().then((function(n){var i=n.value;n.done?t(r):(h.Util.extendObj(r.styles,i.styles),h.Util.appendToArray(r.items,i.items),e())}),n)}()}))},_destroy:function(){this.destroyed=!0,this.transport.pageCache[this.pageIndex]=null;var t=[];return Object.keys(this.intentStates).forEach((function(e){"oplist"!==e&&this.intentStates[e].renderTasks.forEach((function(e){var n=e.capability.promise.catch((function(){}));t.push(n),e.cancel()}))}),this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)},cleanup:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0,this._tryCleanup(t)},_tryCleanup:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup&&!Object.keys(this.intentStates).some((function(t){var e=this.intentStates[t];return 0!==e.renderTasks.length||e.receivingOperatorList}),this)&&(Object.keys(this.intentStates).forEach((function(t){delete this.intentStates[t]}),this),this.objs.clear(),this.annotationsPromise=null,t&&this._stats instanceof u.StatTimer&&(this._stats=new u.StatTimer),this.pendingCleanup=!1)},_startRenderPage:function(t,e){var n=this.intentStates[e];n.displayReadyCapability&&n.displayReadyCapability.resolve(t)},_renderPageChunk:function(t,e){var n,i,r=this.intentStates[e];for(n=0,i=t.length;n<i;n++)r.operatorList.fnArray.push(t.fnArray[n]),r.operatorList.argsArray.push(t.argsArray[n]);for(r.operatorList.lastChunk=t.lastChunk,n=0;n<r.renderTasks.length;n++)r.renderTasks[n].operatorListChanged();t.lastChunk&&(r.receivingOperatorList=!1,this._tryCleanup())},get stats(){return this._stats instanceof u.StatTimer?this._stats:null}},t}(),T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}return a(t,[{key:"postMessage",value:function(t,e){var n=this;if(this._defer){var i=new WeakMap,r={data:function t(n){if("object"!==(void 0===n?"undefined":l(n))||null===n)return n;if(i.has(n))return i.get(n);var r,s;if((s=n.buffer)&&(0,h.isArrayBuffer)(s)){var o=e&&e.indexOf(s)>=0;return r=n===s?n:o?new n.constructor(s,n.byteOffset,n.byteLength):new n.constructor(n),i.set(n,r),r}for(var a in r=Array.isArray(n)?[]:{},i.set(n,r),n){for(var u,c=n;!(u=Object.getOwnPropertyDescriptor(c,a));)c=Object.getPrototypeOf(c);void 0!==u.value&&"function"!=typeof u.value&&(r[a]=t(u.value))}return r}(t)};this._deferred.then((function(){n._listeners.forEach((function(t){t.call(this,r)}),n)}))}else this._listeners.forEach((function(e){e.call(this,{data:t})}),this)}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var n=this._listeners.indexOf(e);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners=[]}}]),t}(),E=function(){var t=0;function e(){if(void 0!==s)return s;if((0,u.getDefaultSetting)("workerSrc"))return(0,u.getDefaultSetting)("workerSrc");if(b)return b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2");throw new Error("No PDFJS.workerSrc specified")}var n=void 0,i=new WeakMap;function r(t,e){if(e&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this._readyCapability=(0,h.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return i.set(e,this),void this._initializeFromPort(e);this._initialize()}return r.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initializeFromPort:function(t){this._port=t,this._messageHandler=new h.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()},_initialize:function(){var t,n,i=this;if(!_&&!(0,u.getDefaultSetting)("disableWorker")&&"undefined"!=typeof Worker){var r=e();try{(0,h.isSameOrigin)(window.location.href,r)||(t=new URL(r,window.location).href,n="importScripts('"+t+"');",r=URL.createObjectURL(new Blob([n])));var s=new Worker(r),o=new h.MessageHandler("main","worker",s),a=function(){s.removeEventListener("error",l),o.destroy(),s.terminate(),i.destroyed?i._readyCapability.reject(new Error("Worker was destroyed")):i._setupFakeWorker()},l=function(){i._webWorker||a()};s.addEventListener("error",l),o.on("test",(function(t){s.removeEventListener("error",l),i.destroyed?a():t&&t.supportTypedArray?(i._messageHandler=o,i._port=s,i._webWorker=s,t.supportTransfers||(i.postMessageTransfers=!1,y=!0),i._readyCapability.resolve(),o.send("configure",{verbosity:(0,h.getVerbosityLevel)()})):(i._setupFakeWorker(),o.destroy(),s.terminate())})),o.on("ready",(function(t){if(s.removeEventListener("error",l),i.destroyed)a();else try{c()}catch(t){i._setupFakeWorker()}}));var c=function(){var t=(0,u.getDefaultSetting)("postMessageTransfers")&&!y,e=new Uint8Array([t?255:0]);try{o.send("test",e,[e.buffer])}catch(t){(0,h.info)("Cannot use postMessage transfers"),e[0]=0,o.send("test",e)}};return void c()}catch(t){(0,h.info)("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){var i=this;_||(0,u.getDefaultSetting)("disableWorker")||((0,h.warn)("Setting up fake worker."),_=!0),(n||(n=(0,h.createPromiseCapability)(),(o||function(t){h.Util.loadScript(e(),(function(){t(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)}))})(n.resolve)),n.promise).then((function(e){if(i.destroyed)i._readyCapability.reject(new Error("Worker was destroyed"));else{var n=Uint8Array!==Float32Array,r=new T(n);i._port=r;var s="fake"+t++,o=new h.MessageHandler(s+"_worker",s,r);e.setup(o,r);var a=new h.MessageHandler(s,s+"_worker",r);i._messageHandler=a,i._readyCapability.resolve()}}))},destroy:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),i.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},r.fromPort=function(t){return i.has(t)?i.get(t):new r(null,t)},r}(),I=function(){function t(t,e,n,i){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new R,this.fontLoader=new c.FontLoader(e.docId),this.CMapReaderFactory=new i({baseUrl:(0,u.getDefaultSetting)("cMapUrl"),isCompressed:(0,u.getDefaultSetting)("cMapPacked")}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,h.createPromiseCapability)(),this.setupMessageHandler()}return t.prototype={destroy:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,h.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e=[];this.pageCache.forEach((function(t){t&&e.push(t._destroy())})),this.pageCache=[],this.pagePromises=[];var n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then((function(){t.fontLoader.clear(),t._networkStream&&t._networkStream.cancelAllRequests(),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise},setupMessageHandler:function(){var t=this.messageHandler,e=this.loadingTask;t.on("GetReader",(function(t,e){var n=this;(0,h.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(t){n._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=function(){n._fullReader.read().then((function(t){var n=t.value;t.done?e.close():((0,h.assert)((0,h.isArrayBuffer)(n)),e.enqueue(new Uint8Array(n),1,[n]))})).catch((function(t){e.error(t)}))},e.onCancel=function(t){n._fullReader.cancel(t)}}),this),t.on("ReaderHeadersReady",(function(t){var e=this,n=(0,h.createPromiseCapability)(),i=this._fullReader;return i.headersReady.then((function(){if(!i.isStreamingSupported||!i.isRangeSupported){if(e._lastProgress){var t=e.loadingTask;t.onProgress&&t.onProgress(e._lastProgress)}i.onProgress=function(t){var n=e.loadingTask;n.onProgress&&n.onProgress({loaded:t.loaded,total:t.total})}}n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise}),this),t.on("GetRangeReader",(function(t,e){(0,h.assert)(this._networkStream);var n=this._networkStream.getRangeReader(t.begin,t.end);e.onPull=function(){n.read().then((function(t){var n=t.value;t.done?e.close():((0,h.assert)((0,h.isArrayBuffer)(n)),e.enqueue(new Uint8Array(n),1,[n]))})).catch((function(t){e.error(t)}))},e.onCancel=function(t){n.cancel(t)}}),this),t.on("GetDoc",(function(t){var e=t.pdfInfo;this.numPages=e.numPages;var n=this.loadingTask,i=new C(e,this,n);this.pdfDocument=i,n._capability.resolve(i)}),this),t.on("PasswordRequest",(function(t){var n=this;return this._passwordCapability=(0,h.createPromiseCapability)(),e.onPassword?e.onPassword((function(t){n._passwordCapability.resolve({password:t})}),t.code):this._passwordCapability.reject(new h.PasswordException(t.message,t.code)),this._passwordCapability.promise}),this),t.on("PasswordException",(function(t){e._capability.reject(new h.PasswordException(t.message,t.code))}),this),t.on("InvalidPDF",(function(t){this.loadingTask._capability.reject(new h.InvalidPDFException(t.message))}),this),t.on("MissingPDF",(function(t){this.loadingTask._capability.reject(new h.MissingPDFException(t.message))}),this),t.on("UnexpectedResponse",(function(t){this.loadingTask._capability.reject(new h.UnexpectedResponseException(t.message,t.status))}),this),t.on("UnknownError",(function(t){this.loadingTask._capability.reject(new h.UnknownErrorException(t.message,t.details))}),this),t.on("DataLoaded",(function(t){this.downloadInfoCapability.resolve(t)}),this),t.on("PDFManagerReady",(function(t){}),this),t.on("StartRenderPage",(function(t){if(!this.destroyed){var e=this.pageCache[t.pageIndex];e._stats.timeEnd("Page Request"),e._startRenderPage(t.transparency,t.intent)}}),this),t.on("RenderPageChunk",(function(t){this.destroyed||this.pageCache[t.pageIndex]._renderPageChunk(t.operatorList,t.intent)}),this),t.on("commonobj",(function(t){var e=this;if(!this.destroyed){var n=t[0],i=t[1];if(!this.commonObjs.hasData(n))switch(i){case"Font":var r=t[2];if("error"in r){var s=r.error;(0,h.warn)("Error during font loading: "+s),this.commonObjs.resolve(n,s);break}var o=null;(0,u.getDefaultSetting)("pdfBug")&&p.default.FontInspector&&p.default.FontInspector.enabled&&(o={registerFont:function(t,e){p.default.FontInspector.fontAdded(t,e)}});var a=new c.FontFaceObject(r,{isEvalSupported:(0,u.getDefaultSetting)("isEvalSupported"),disableFontFace:(0,u.getDefaultSetting)("disableFontFace"),fontRegistry:o});this.fontLoader.bind([a],(function(t){e.commonObjs.resolve(n,a)}));break;case"FontPath":this.commonObjs.resolve(n,t[2]);break;default:throw new Error("Got unknown common object type "+i)}}}),this),t.on("obj",(function(t){if(!this.destroyed){var e,n=t[0],i=t[1],r=t[2],s=this.pageCache[i];if(!s.objs.hasData(n))switch(r){case"JpegStream":e=t[3],(0,h.loadJpegStream)(n,e,s.objs);break;case"Image":e=t[3],s.objs.resolve(n,e),e&&"data"in e&&e.data.length>8e6&&(s.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type "+r)}}}),this),t.on("DocProgress",(function(t){if(!this.destroyed){var e=this.loadingTask;e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}),this),t.on("PageError",(function(t){if(!this.destroyed){var e=this.pageCache[t.pageNum-1].intentStates[t.intent];if(!e.displayReadyCapability)throw new Error(t.error);if(e.displayReadyCapability.reject(t.error),e.operatorList){e.operatorList.lastChunk=!0;for(var n=0;n<e.renderTasks.length;n++)e.renderTasks[n].operatorListChanged()}}}),this),t.on("UnsupportedFeature",(function(t){if(!this.destroyed){var e=this.loadingTask;e.onUnsupportedFeature&&e.onUnsupportedFeature(t.featureId)}}),this),t.on("JpegDecode",(function(t){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var e=t[0],n=t[1];return 3!==n&&1!==n?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise((function(t,i){var r=new Image;r.onload=function(){var e=r.width,i=r.height,s=e*i,o=4*s,a=new Uint8Array(s*n),l=document.createElement("canvas");l.width=e,l.height=i;var h=l.getContext("2d");h.drawImage(r,0,0);var u,c,d=h.getImageData(0,0,e,i).data;if(3===n)for(u=0,c=0;u<o;u+=4,c+=3)a[c]=d[u],a[c+1]=d[u+1],a[c+2]=d[u+2];else if(1===n)for(u=0,c=0;u<o;u+=4,c++)a[c]=d[u];t({data:a,width:e,height:i})},r.onerror=function(){i(new Error("JpegDecode failed to load image"))},r.src=e}))}),this),t.on("FetchBuiltInCMap",(function(t){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:t.name})}),this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this.numPages)return Promise.reject(new Error("Invalid page request"));var n=t-1;if(n in this.pagePromises)return this.pagePromises[n];var i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(t){if(e.destroyed)throw new Error("Transport destroyed");var i=new k(n,t,e);return e.pageCache[n]=i,i}));return this.pagePromises[n]=i,i},getPageIndex:function(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))},getAnnotations:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(t){return this.messageHandler.sendWithPromise("GetDestination",{id:t})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getPageMode:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(e){return{info:e[0],metadata:e[1]?new g.Metadata(e[1]):null,contentDispositionFilename:t._fullReader?t._fullReader.filename:null}}))},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){var t=this;this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var e=0,n=t.pageCache.length;e<n;e++){var i=t.pageCache[e];i&&i.cleanup()}t.commonObjs.clear(),t.fontLoader.clear()}))}},t}(),R=function(){function t(){this.objs=Object.create(null)}return t.prototype={ensureObj:function(t){if(this.objs[t])return this.objs[t];var e={capability:(0,h.createPromiseCapability)(),data:null,resolved:!1};return this.objs[t]=e,e},get:function(t,e){if(e)return this.ensureObj(t).capability.promise.then(e),null;var n=this.objs[t];if(!n||!n.resolved)throw new Error("Requesting object that isn't resolved yet "+t);return n.data},resolve:function(t,e){var n=this.ensureObj(t);n.resolved=!0,n.data=e,n.capability.resolve(e)},isResolved:function(t){var e=this.objs;return!!e[t]&&e[t].resolved},hasData:function(t){return this.isResolved(t)},getData:function(t){var e=this.objs;return e[t]&&e[t].resolved?e[t].data:null},clear:function(){this.objs=Object.create(null)}},t}(),O=function(){function t(t){this._internalRenderTask=t,this.onContinue=null}return t.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(t,e){return this.promise.then.apply(this.promise,arguments)}},t}(),j=function(){var t=new WeakMap;function e(t,e,n,i,r,s,o,a){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.operatorListIdx=null,this.operatorList=r,this.pageNumber=s,this.canvasFactory=o,this.webGLContext=a,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.useRequestAnimationFrame=!1,this.cancelled=!1,this.capability=(0,h.createPromiseCapability)(),this.task=new O(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}return e.prototype={initializeGraphics:function(e){if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.set(this._canvas,this)}if(!this.cancelled){(0,u.getDefaultSetting)("pdfBug")&&p.default.StepperManager&&p.default.StepperManager.enabled&&(this.stepper=p.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var n=this.params;this.gfx=new d.CanvasGraphics(n.canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,n.imageLayer),this.gfx.beginDrawing({transform:n.transform,viewport:n.viewport,transparency:e,background:n.background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1,this.cancelled=!0,this._canvas&&t.delete(this._canvas),this.callback(new u.RenderingCancelledException("Rendering cancelled, page "+this.pageNumber,"canvas"))},operatorListChanged:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!=typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback())))}},e}();e.version="2.0.303",e.build="55e3f97a",e.getDocument=function(t){var e,n=new A;if("string"==typeof t)e={url:t};else if((0,h.isArrayBuffer)(t))e={data:t};else if(t instanceof P)e={range:t};else{if("object"!==(void 0===t?"undefined":l(t)))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=t}var i={},r=null,s=null,o=u.DOMCMapReaderFactory;for(var a in e)if("url"!==a||"undefined"==typeof window)if("range"!==a)if("worker"!==a)if("data"!==a||e[a]instanceof Uint8Array)"CMapReaderFactory"!==a?i[a]=e[a]:o=e[a];else{var c=e[a];if("string"==typeof c)i[a]=(0,h.stringToBytes)(c);else if("object"!==(void 0===c?"undefined":l(c))||null===c||isNaN(c.length)){if(!(0,h.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");i[a]=new Uint8Array(c)}else i[a]=new Uint8Array(c)}else s=e[a];else r=e[a];else i[a]=new URL(e[a],window.location).href;i.rangeChunkSize=i.rangeChunkSize||65536,i.ignoreErrors=!0!==i.stopAtErrors;var d=Object.values(h.NativeImageDecoding);if(void 0!==i.nativeImageDecoderSupport&&d.includes(i.nativeImageDecoderSupport)||(i.nativeImageDecoderSupport=h.NativeImageDecoding.DECODE),!s){var f=(0,u.getDefaultSetting)("workerPort");s=f?E.fromPort(f):new E,n._worker=s}var p=n.docId;return s.promise.then((function(){if(n.destroyed)throw new Error("Loading aborted");return function(t,e,n,i){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(e.disableRange=(0,u.getDefaultSetting)("disableRange"),e.disableAutoFetch=(0,u.getDefaultSetting)("disableAutoFetch"),e.disableStream=(0,u.getDefaultSetting)("disableStream"),n&&(e.length=n.length,e.initialData=n.initialData),t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.0.303",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:(0,u.getDefaultSetting)("maxImageSize"),disableFontFace:(0,u.getDefaultSetting)("disableFontFace"),disableCreateObjectURL:(0,u.getDefaultSetting)("disableCreateObjectURL"),postMessageTransfers:(0,u.getDefaultSetting)("postMessageTransfers")&&!y,docBaseUrl:e.docBaseUrl,nativeImageDecoderSupport:e.nativeImageDecoderSupport,ignoreErrors:e.ignoreErrors,isEvalSupported:(0,u.getDefaultSetting)("isEvalSupported")}).then((function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e})))}(s,i,r,p).then((function(t){if(n.destroyed)throw new Error("Loading aborted");var e=void 0;r?e=new v.PDFDataTransportStream(i,r):i.data||(e=x(i));var a=new h.MessageHandler(p,t,s.port);a.postMessageTransfers=s.postMessageTransfers;var l=new I(a,n,e,o);n._transport=l,a.send("Ready",null)}))})).catch(n._capability.reject),n},e.LoopbackPort=T,e.PDFDataRangeTransport=P,e.PDFWorker=E,e.PDFDocumentProxy=C,e.PDFPageProxy=k,e.setPDFNetworkStreamFactory=function(t){x=t},e.version="2.0.303",e.build="55e3f97a"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=n(10),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,r.assert)("string"==typeof e,"Metadata: input is not a string"),e=this._repair(e),e=(new s.SimpleXMLParser).parseFromString(e),this._metadata=Object.create(null),this._parse(e)}return i(t,[{key:"_repair",value:function(t){return t.replace(/>\\376\\377([^<]+)/g,(function(t,e){for(var n=e.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,e,n,i){return String.fromCharCode(64*e+8*n+1*i)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: "+e+" isn't defined.")})),i="",r=0,s=n.length;r<s;r+=2){var o=256*n.charCodeAt(r)+n.charCodeAt(r+1);i+=o>=32&&o<127&&60!==o&&62!==o&&38!==o?String.fromCharCode(o):"&#x"+(65536+o).toString(16).substring(1)+";"}return">"+i}))}},{key:"_parse",value:function(t){var e=t.documentElement;if("rdf:rdf"!==e.nodeName.toLowerCase())for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName.toLowerCase();)e=e.nextSibling;var n=e?e.nodeName.toLowerCase():null;if(e&&"rdf:rdf"===n&&e.hasChildNodes())for(var i=e.childNodes,r=0,s=i.length;r<s;r++){var o=i[r];if("rdf:description"===o.nodeName.toLowerCase())for(var a=0,l=o.childNodes.length;a<l;a++)if("#text"!==o.childNodes[a].nodeName.toLowerCase()){var h=o.childNodes[a],u=h.nodeName.toLowerCase();this._metadata[u]=h.textContent.trim()}}}},{key:"get",value:function(t){return this._metadata[t]||null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(t){return void 0!==this._metadata[t]}}]),t}();e.Metadata=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(10),s=n(0);function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function(){function t(){l(this,t)}return i(t,null,[{key:"create",value:function(t){switch(t.data.annotationType){case s.AnnotationType.LINK:return new c(t);case s.AnnotationType.TEXT:return new d(t);case s.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new p(t);case"Btn":return t.data.radioButton?new v(t):t.data.checkBox?new g(t):new m(t);case"Ch":return new _(t)}return new f(t);case s.AnnotationType.POPUP:return new y(t);case s.AnnotationType.LINE:return new w(t);case s.AnnotationType.SQUARE:return new x(t);case s.AnnotationType.CIRCLE:return new S(t);case s.AnnotationType.POLYLINE:return new A(t);case s.AnnotationType.POLYGON:return new P(t);case s.AnnotationType.HIGHLIGHT:return new C(t);case s.AnnotationType.UNDERLINE:return new k(t);case s.AnnotationType.SQUIGGLY:return new T(t);case s.AnnotationType.STRIKEOUT:return new E(t);case s.AnnotationType.STAMP:return new I(t);case s.AnnotationType.FILEATTACHMENT:return new R(t);default:return new u(t)}}}]),t}(),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,t),this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,n&&(this.container=this._createContainer(i))}return i(t,[{key:"_createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data,n=this.page,i=this.viewport,r=document.createElement("section"),o=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1];r.setAttribute("data-annotation-id",e.id);var l=s.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(r.style.transform="matrix("+i.transform.join(",")+")",r.style.transformOrigin=-l[0]+"px "+-l[1]+"px",!t&&e.borderStyle.width>0){r.style.borderWidth=e.borderStyle.width+"px",e.borderStyle.style!==s.AnnotationBorderStyleType.UNDERLINE&&(o-=2*e.borderStyle.width,a-=2*e.borderStyle.width);var h=e.borderStyle.horizontalCornerRadius,u=e.borderStyle.verticalCornerRadius;if(h>0||u>0){var c=h+"px / "+u+"px";r.style.borderRadius=c}switch(e.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:r.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:r.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:r.style.borderBottomStyle="solid"}e.color?r.style.borderColor=s.Util.makeCssRgb(0|e.color[0],0|e.color[1],0|e.color[2]):r.style.borderWidth=0}return r.style.left=l[0]+"px",r.style.top=l[1]+"px",r.style.width=o+"px",r.style.height=a+"px",r}},{key:"_createPopup",value:function(t,e,n){e||((e=document.createElement("div")).style.height=t.style.height,e.style.width=t.style.width,t.appendChild(e));var i=new b({container:t,trigger:e,color:n.color,title:n.title,contents:n.contents,hideWrapper:!0}).render();i.style.left=t.style.width,t.appendChild(i)}},{key:"render",value:function(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}}]),t}(),c=function(t){function e(t){l(this,e);var n=!!(t.data.url||t.data.dest||t.data.action);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="linkAnnotation";var t=document.createElement("a");return(0,r.addLinkAttributes)(t,{url:this.data.url,target:this.data.newWindow?r.LinkTarget.BLANK:void 0}),this.data.url||(this.data.action?this._bindNamedAction(t,this.data.action):this._bindLink(t,this.data.dest)),this.container.appendChild(t),this.container}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.navigateTo(e),!1},e&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},t.className="internalLink"}}]),e}(u),d=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}]),e}(u),f=function(t){function e(){return l(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),i(e,[{key:"render",value:function(){return this.container}}]),e}(u),p=function(t){function e(t){l(this,e);var n=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="textWidgetAnnotation";var t=null;if(this.renderInteractiveForms){if(this.data.multiLine?(t=document.createElement("textarea")).textContent=this.data.fieldValue:((t=document.createElement("input")).type="text",t.setAttribute("value",this.data.fieldValue)),t.disabled=this.data.readOnly,null!==this.data.maxLen&&(t.maxLength=this.data.maxLen),this.data.comb){var e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;t.classList.add("comb"),t.style.letterSpacing="calc("+e+"px - 1ch)"}}else{(t=document.createElement("div")).textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell";var n=null;this.data.fontRefName&&(n=this.page.commonObjs.getData(this.data.fontRefName)),this._setTextStyle(t,n)}return null!==this.data.textAlignment&&(t.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(t),this.container}},{key:"_setTextStyle",value:function(t,e){var n=t.style;if(n.fontSize=this.data.fontSize+"px",n.direction=this.data.fontDirection<0?"rtl":"ltr",e){n.fontWeight=e.black?e.bold?"900":"bold":e.bold?"bold":"normal",n.fontStyle=e.italic?"italic":"normal";var i=e.loadedName?'"'+e.loadedName+'", ':"",r=e.fallbackName||"Helvetica, sans-serif";n.fontFamily=i+r}}}]),e}(f),g=function(t){function e(t){return l(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.renderInteractiveForms))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(f),v=function(t){function e(t){return l(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.renderInteractiveForms))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(f),m=function(t){function e(){return l(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),i(e,[{key:"render",value:function(){var t=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this);return t.className="buttonWidgetAnnotation pushButton",t}}]),e}(c),_=function(t){function e(t){return l(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.renderInteractiveForms))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var t=document.createElement("select");t.disabled=this.data.readOnly,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));for(var e=0,n=this.data.options.length;e<n;e++){var i=this.data.options[e],r=document.createElement("option");r.textContent=i.displayValue,r.value=i.exportValue,this.data.fieldValue.indexOf(i.displayValue)>=0&&r.setAttribute("selected",!0),t.appendChild(r)}return this.container.appendChild(t),this.container}}]),e}(f),y=function(t){function e(t){l(this,e);var n=!(!t.data.title&&!t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),i(e,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon"].indexOf(this.data.parentType)>=0)return this.container;var t='[data-annotation-id="'+this.data.parentId+'"]',e=this.layer.querySelector(t);if(!e)return this.container;var n=new b({container:this.container,trigger:e,color:this.data.color,title:this.data.title,contents:this.data.contents}),i=parseFloat(e.style.left),r=parseFloat(e.style.width);return this.container.style.transformOrigin=-(i+r)+"px -"+e.style.top,this.container.style.left=i+r+"px",this.container.appendChild(n.render()),this.container}}]),e}(u),b=function(){function t(e){l(this,t),this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}return i(t,[{key:"render",value:function(){var t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var e=document.createElement("div");e.className="popup";var n=this.color;if(n){var i=.7*(255-n[0])+n[0],r=.7*(255-n[1])+n[1],o=.7*(255-n[2])+n[2];e.style.backgroundColor=s.Util.makeCssRgb(0|i,0|r,0|o)}var a=this._formatContents(this.contents),l=document.createElement("h1");return l.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),e.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(l),e.appendChild(a),t.appendChild(e),t}},{key:"_formatContents",value:function(t){for(var e=document.createElement("p"),n=t.split(/(?:\r\n?|\n)/),i=0,r=n.length;i<r;++i){var s=n[i];e.appendChild(document.createTextNode(s)),i<r-1&&e.appendChild(document.createElement("br"))}return e}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),t}(),w=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width),r.setAttribute("stroke","transparent"),i.appendChild(r),this.container.append(i),this._createPopup(this.container,r,t),this.container}}]),e}(u),x=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="squareAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=t.borderStyle.width,s=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r),s.setAttribute("stroke","transparent"),s.setAttribute("fill","none"),i.appendChild(s),this.container.append(i),this._createPopup(this.container,s,t),this.container}}]),e}(u),S=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="circleAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=t.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",n/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r),s.setAttribute("stroke","transparent"),s.setAttribute("fill","none"),i.appendChild(s),this.container.append(i),this._createPopup(this.container,s,t),this.container}}]),e}(u),A=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0));return i.containerClassName="polylineAnnotation",i.svgElementName="svg:polyline",i}return a(e,t),i(e,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=t.vertices,s=[],o=0,a=r.length;o<a;o++){var l=r[o].x-t.rect[0],h=t.rect[3]-r[o].y;s.push(l+","+h)}s=s.join(" ");var u=t.borderStyle.width,c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",s),c.setAttribute("stroke-width",u),c.setAttribute("stroke","transparent"),c.setAttribute("fill","none"),i.appendChild(c),this.container.append(i),this._createPopup(this.container,c,t),this.container}}]),e}(u),P=function(t){function e(t){l(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return a(e,t),e}(A),C=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(u),k=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(u),T=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(u),E=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(u),I=function(t){function e(t){l(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,!0))}return a(e,t),i(e,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(u),R=function(t){function e(t){l(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,!0)),i=n.data.file;return n.filename=(0,r.getFilenameFromUrl)(i.filename),n.content=i.content,n.linkService.onFileAttachmentAnnotation({id:(0,s.stringToPDFString)(i.filename),filename:i.filename,content:i.content}),n}return a(e,t),i(e,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,s.warn)("Download cannot be started due to unavailable download manager")}}]),e}(u),O=function(){function t(){l(this,t)}return i(t,null,[{key:"render",value:function(t){for(var e=0,n=t.annotations.length;e<n;e++){var i=t.annotations[e];if(i){var s=h.create({data:i,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||(0,r.getDefaultSetting)("imageResourcesPath"),renderInteractiveForms:t.renderInteractiveForms||!1,svgFactory:new r.DOMSVGFactory});s.isRenderable&&t.div.appendChild(s.render())}}}},{key:"update",value:function(t){for(var e=0,n=t.annotations.length;e<n;e++){var i=t.annotations[e],r=t.div.querySelector('[data-annotation-id="'+i.id+'"]');r&&(r.style.transform="matrix("+t.viewport.transform.join(",")+")")}t.div.removeAttribute("hidden")}}]),t}();e.AnnotationLayer=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var i=n(0),r=n(10),s=function(){var t=/\S/,e=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function n(n,s,o){var a,l=document.createElement("div"),h={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(n._textDivs.push(l),a=s.str,!t.test(a))return h.isWhitespace=!0,void n._textDivProperties.set(l,h);var u=i.Util.transform(n._viewport.transform,s.transform),c=Math.atan2(u[1],u[0]),d=o[s.fontName];d.vertical&&(c+=Math.PI/2);var f,p,g=Math.sqrt(u[2]*u[2]+u[3]*u[3]),v=g;if(d.ascent?v=d.ascent*v:d.descent&&(v=(1+d.descent)*v),0===c?(f=u[4],p=u[5]-v):(f=u[4]+v*Math.sin(c),p=u[5]-v*Math.cos(c)),e[1]=f,e[3]=p,e[5]=g,e[7]=d.fontFamily,h.style=e.join(""),l.setAttribute("style",h.style),l.textContent=s.str,(0,r.getDefaultSetting)("pdfBug")&&(l.dataset.fontName=s.fontName),0!==c&&(h.angle=c*(180/Math.PI)),s.str.length>1&&(d.vertical?h.canvasWidth=s.height*n._viewport.scale:h.canvasWidth=s.width*n._viewport.scale),n._textDivProperties.set(l,h),n._textContentStream&&n._layoutText(l),n._enhanceTextSelection){var m=1,_=0;0!==c&&(m=Math.cos(c),_=Math.sin(c));var y,b,w=(d.vertical?s.height:s.width)*n._viewport.scale,x=g;0!==c?(y=[m,_,-_,m,f,p],b=i.Util.getAxialAlignedBoundingBox([0,0,w,x],y)):b=[f,p,f+w,p+x],n._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:l,size:[w,x],m:y})}}function s(t){if(!t._canceled){var e=t._textDivs,n=t._capability,i=e.length;if(i>1e5)return t._renderingDone=!0,void n.resolve();if(!t._textContentStream)for(var r=0;r<i;r++)t._layoutText(e[r]);t._renderingDone=!0,n.resolve()}}function o(t){for(var e=t._bounds,n=t._viewport,r=function(t,e,n){var i=n.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));a(t,i);var r=new Array(n.length);return i.forEach((function(t){var e=t.index;r[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}})),n.map((function(e,n){var s=r[n],o=i[n];o.x1=e.top,o.y1=t-s.right,o.x2=e.bottom,o.y2=t-s.left,o.index=n,o.x1New=void 0,o.x2New=void 0})),a(e,i),i.forEach((function(t){var e=t.index;r[e].top=t.x1New,r[e].bottom=t.x2New})),r}(n.width,n.height,e),s=0;s<r.length;s++){var o=e[s].div,l=t._textDivProperties.get(o);if(0!==l.angle){var h=r[s],u=e[s],c=u.m,d=c[0],f=c[1],p=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],g=new Float64Array(64);p.forEach((function(t,e){var n=i.Util.applyTransform(t,c);g[e+0]=d&&(h.left-n[0])/d,g[e+4]=f&&(h.top-n[1])/f,g[e+8]=d&&(h.right-n[0])/d,g[e+12]=f&&(h.bottom-n[1])/f,g[e+16]=f&&(h.left-n[0])/-f,g[e+20]=d&&(h.top-n[1])/d,g[e+24]=f&&(h.right-n[0])/-f,g[e+28]=d&&(h.bottom-n[1])/d,g[e+32]=d&&(h.left-n[0])/-d,g[e+36]=f&&(h.top-n[1])/-f,g[e+40]=d&&(h.right-n[0])/-d,g[e+44]=f&&(h.bottom-n[1])/-f,g[e+48]=f&&(h.left-n[0])/f,g[e+52]=d&&(h.top-n[1])/-d,g[e+56]=f&&(h.right-n[0])/f,g[e+60]=d&&(h.bottom-n[1])/-d}));var v=function(t,e,n){for(var i=0,r=0;r<n;r++){var s=t[e++];s>0&&(i=i?Math.min(s,i):s)}return i},m=1+Math.min(Math.abs(d),Math.abs(f));l.paddingLeft=v(g,32,16)/m,l.paddingTop=v(g,48,16)/m,l.paddingRight=v(g,0,16)/m,l.paddingBottom=v(g,16,16)/m,t._textDivProperties.set(o,l)}else l.paddingLeft=e[s].left-r[s].left,l.paddingTop=e[s].top-r[s].top,l.paddingRight=r[s].right-e[s].right,l.paddingBottom=r[s].bottom-e[s].bottom,t._textDivProperties.set(o,l)}}function a(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));var n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach((function(t){for(var e=0;e<n.length&&n[e].end<=t.y1;)e++;for(var i,r,s=n.length-1;s>=0&&n[s].start>=t.y2;)s--;var o,a,l=-1/0;for(o=e;o<=s;o++){var h;(h=(r=(i=n[o]).boundary).x2>t.x1?r.index>t.index?r.x1New:t.x1:void 0===r.x2New?(r.x2+t.x1)/2:r.x2New)>l&&(l=h)}for(t.x1New=l,o=e;o<=s;o++)void 0===(r=(i=n[o]).boundary).x2New?r.x2>t.x1?r.index>t.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2));var u=[],c=null;for(o=e;o<=s;o++){var d=(r=(i=n[o]).boundary).x2>t.x2?r:t;c===d?u[u.length-1].end=i.end:(u.push({start:i.start,end:i.end,boundary:d}),c=d)}for(n[e].start<t.y1&&(u[0].start=t.y1,u.unshift({start:n[e].start,end:t.y1,boundary:n[e].boundary})),t.y2<n[s].end&&(u[u.length-1].end=t.y2,u.push({start:t.y2,end:n[s].end,boundary:n[s].boundary})),o=e;o<=s;o++)if(void 0===(r=(i=n[o]).boundary).x2New){var f=!1;for(a=e-1;!f&&a>=0&&n[a].start>=r.y1;a--)f=n[a].boundary===r;for(a=s+1;!f&&a<n.length&&n[a].end<=r.y2;a++)f=n[a].boundary===r;for(a=0;!f&&a<u.length;a++)f=u[a].boundary===r;f||(r.x2New=l)}Array.prototype.splice.apply(n,[e,s-e+1].concat(u))})),n.forEach((function(e){var n=e.boundary;void 0===n.x2New&&(n.x2New=Math.max(t,n.x2))}))}function l(t){var e=t.textContent,n=t.textContentStream,r=t.container,s=t.viewport,o=t.textDivs,a=t.textContentItemsStr,l=t.enhanceTextSelection;this._textContent=e,this._textContentStream=n,this._container=r,this._viewport=s,this._textDivs=o||[],this._textContentItemsStr=a||[],this._enhanceTextSelection=!!l,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}return l.prototype={get promise(){return this._capability.promise},cancel:function(){this._reader&&(this._reader.cancel(new i.AbortException("text layer task cancelled")),this._reader=null),this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function(t,e){for(var i=0,r=t.length;i<r;i++)this._textContentItemsStr.push(t[i].str),n(this,t[i],e)},_layoutText:function(t){var e=this._container,n=this._textDivProperties.get(t);if(!n.isWhitespace){var i=t.style.fontSize,r=t.style.fontFamily;i===this._layoutTextLastFontSize&&r===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=i+" "+r,this._lastFontSize=i,this._lastFontFamily=r);var s=this._layoutTextCtx.measureText(t.textContent).width,o="";0!==n.canvasWidth&&s>0&&(n.scale=n.canvasWidth/s,o="scaleX("+n.scale+")"),0!==n.angle&&(o="rotate("+n.angle+"deg) "+o),""!==o&&(n.originalTransform=o,t.style.transform=o),this._textDivProperties.set(t,n),e.appendChild(t)}},_render:function(t){var e=this,n=(0,i.createPromiseCapability)(),r=Object.create(null),o=document.createElement("canvas");if(o.mozOpaque=!0,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent){var a=this._textContent.items,l=this._textContent.styles;this._processItems(a,l),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function t(){e._reader.read().then((function(s){var o=s.value;s.done?n.resolve():(i.Util.extendObj(r,o.styles),e._processItems(o.items,r),t())}),n.reject)}()}n.promise.then((function(){r=null,t?e._renderTimer=setTimeout((function(){s(e),e._renderTimer=null}),t):s(e)}),this._capability.reject)},expandTextDivs:function(t){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(o(this),this._bounds=null);for(var e=0,n=this._textDivs.length;e<n;e++){var i=this._textDivs[e],r=this._textDivProperties.get(i);if(!r.isWhitespace)if(t){var s="",a="";1!==r.scale&&(s="scaleX("+r.scale+")"),0!==r.angle&&(s="rotate("+r.angle+"deg) "+s),0!==r.paddingLeft&&(a+=" padding-left: "+r.paddingLeft/r.scale+"px;",s+=" translateX("+-r.paddingLeft/r.scale+"px)"),0!==r.paddingTop&&(a+=" padding-top: "+r.paddingTop+"px;",s+=" translateY("+-r.paddingTop+"px)"),0!==r.paddingRight&&(a+=" padding-right: "+r.paddingRight/r.scale+"px;"),0!==r.paddingBottom&&(a+=" padding-bottom: "+r.paddingBottom+"px;"),""!==a&&i.setAttribute("style",r.style+a),""!==s&&(i.style.transform=s)}else i.style.padding=0,i.style.transform=r.originalTransform||""}}}},function(t){var e=new l({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}}();e.renderTextLayer=s},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var o,a,l=s(0),h=s(10),u=s(24),c=(o=u)&&o.__esModule?o:{default:o},d={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},f=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)o=1&o?3988292384^o>>1&2147483647:o>>1&2147483647;e[s]=o}function h(t,n,i,r){var s=r,o=n.length;i[s]=o>>24&255,i[s+1]=o>>16&255,i[s+2]=o>>8&255,i[s+3]=255&o,i[s+=4]=255&t.charCodeAt(0),i[s+1]=255&t.charCodeAt(1),i[s+2]=255&t.charCodeAt(2),i[s+3]=255&t.charCodeAt(3),s+=4,i.set(n,s);var a=function(t,n,i){for(var r=-1,s=n;s<i;s++){var o=255&(r^t[s]);r=r>>>8^e[o]}return-1^r}(i,r+4,s+=n.length);i[s]=a>>24&255,i[s+1]=a>>16&255,i[s+2]=a>>8&255,i[s+3]=255&a}function u(t){var e=t.length,n=Math.ceil(e/65535),i=new Uint8Array(2+e+5*n+4),r=0;i[r++]=120,i[r++]=156;for(var s=0;e>65535;)i[r++]=0,i[r++]=255,i[r++]=255,i[r++]=0,i[r++]=0,i.set(t.subarray(s,s+65535),r),r+=65535,s+=65535,e-=65535;i[r++]=1,i[r++]=255&e,i[r++]=e>>8&255,i[r++]=255&~e,i[r++]=(65535&~e)>>8&255,i.set(t.subarray(s),r),r+=t.length-s;var o=function(t,e,n){for(var i=1,r=0,s=e;s<n;++s)r=(r+(i=(i+(255&t[s]))%65521))%65521;return r<<16|i}(t,0,t.length);return i[r++]=o>>24&255,i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=255&o,i}function d(e,s,o,a){var d,f,p,g=e.width,v=e.height,m=e.data;switch(s){case l.ImageKind.GRAYSCALE_1BPP:f=0,d=1,p=g+7>>3;break;case l.ImageKind.RGB_24BPP:f=2,d=8,p=3*g;break;case l.ImageKind.RGBA_32BPP:f=6,d=8,p=4*g;break;default:throw new Error("invalid format")}var _,y,b=new Uint8Array((1+p)*v),w=0,x=0;for(_=0;_<v;++_)b[w++]=0,b.set(m.subarray(x,x+p),w),x+=p,w+=p;if(s===l.ImageKind.GRAYSCALE_1BPP&&a)for(w=0,_=0;_<v;_++)for(w++,y=0;y<p;y++)b[w++]^=255;var S=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,255&g,v>>24&255,v>>16&255,v>>8&255,255&v,d,f,0,0,0]),A=function(t){if(!(0,c.default)())return u(t);try{var e;e=parseInt(i.versions.node)>=8?t:new r(t);var s=n("../../../../home/node/node_modules/browserify-zlib/lib/index.js").deflateSync(e,{level:9});return s instanceof Uint8Array?s:new Uint8Array(s)}catch(t){(0,l.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return u(t)}(b),P=t.length+36+S.length+A.length,C=new Uint8Array(P),k=0;return C.set(t,k),h("IHDR",S,C,k+=t.length),h("IDATA",A,C,k+=12+S.length),k+=12+A.length,h("IEND",new Uint8Array(0),C,k),(0,l.createObjectURL)(C,"image/png",o)}return function(t,e,n){return d(t,void 0===t.kind?l.ImageKind.GRAYSCALE_1BPP:t.kind,e,n)}}(),p=function(){function t(){this.fontSizeScale=1,this.fontWeight=d.fontWeight,this.fontSize=0,this.textMatrix=l.IDENTITY_MATRIX,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=d.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}();e.SVGGraphics=a=function(){function t(t){if(Number.isInteger(t))return t.toString();var e=t.toFixed(10),n=e.length-1;if("0"!==e[n])return e;do{n--}while("0"===e[n]);return e.substr(0,"."===e[n]?n:n+1)}function e(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale("+t(e[0])+" "+t(e[3])+")";if(e[0]===e[3]&&e[1]===-e[2])return"rotate("+t(180*Math.acos(e[0])/Math.PI)+")"}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate("+t(e[4])+" "+t(e[5])+")";return"matrix("+t(e[0])+" "+t(e[1])+" "+t(e[2])+" "+t(e[3])+" "+t(e[4])+" "+t(e[5])+")"}function n(t,e,n){this.svgFactory=new h.DOMSVGFactory,this.current=new p,this.transformMatrix=l.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n}var i="http://www.w3.org/1999/xlink",r=["butt","round","square"],s=["miter","round","bevel"],o=0,a=0;return n.prototype={save:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function(t){this.save(),this.executeOpTree(t),this.restore()},loadDependencies:function(t){for(var e=this,n=t.fnArray,i=n.length,r=t.argsArray,s=0;s<i;s++)if(l.OPS.dependency===n[s])for(var o=r[s],a=0,h=o.length;a<h;a++){var u,c=o[a],d="g_"===c.substring(0,2);u=new Promise(d?function(t){e.commonObjs.get(c,t)}:function(t){e.objs.get(c,t)}),this.current.dependencies.push(u)}return Promise.all(this.current.dependencies)},transform:function(t,e,n,i,r,s){var o=[t,e,n,i,r,s];this.transformMatrix=l.Util.transform(this.transformMatrix,o),this.tgrp=null},getSVG:function(t,e){var n=this;this.viewport=e;var i=this._initialize(e);return this.loadDependencies(t).then((function(){n.transformMatrix=l.IDENTITY_MATRIX;var e=n.convertOpList(t);return n.executeOpTree(e),i}))},convertOpList:function(t){var e=t.argsArray,n=t.fnArray,i=n.length,r=[],s=[];for(var o in l.OPS)r[l.OPS[o]]=o;for(var a=0;a<i;a++){var h=n[a];s.push({fnId:h,fn:r[h],args:e[a]})}return function(t){for(var e=[],n=[],i=t.length,r=0;r<i;r++)"save"!==t[r].fn?"restore"===t[r].fn?e=n.pop():e.push(t[r]):(e.push({fnId:92,fn:"group",items:[]}),n.push(e),e=e[e.length-1].items);return e}(s)},executeOpTree:function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n].fn,r=t[n].fnId,s=t[n].args;switch(0|r){case l.OPS.beginText:this.beginText();break;case l.OPS.setLeading:this.setLeading(s);break;case l.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case l.OPS.setFont:this.setFont(s);break;case l.OPS.showText:case l.OPS.showSpacedText:this.showText(s[0]);break;case l.OPS.endText:this.endText();break;case l.OPS.moveText:this.moveText(s[0],s[1]);break;case l.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case l.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case l.OPS.setHScale:this.setHScale(s[0]);break;case l.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case l.OPS.setTextRise:this.setTextRise(s[0]);break;case l.OPS.setLineWidth:this.setLineWidth(s[0]);break;case l.OPS.setLineJoin:this.setLineJoin(s[0]);break;case l.OPS.setLineCap:this.setLineCap(s[0]);break;case l.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case l.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case l.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case l.OPS.setDash:this.setDash(s[0],s[1]);break;case l.OPS.setGState:this.setGState(s[0]);break;case l.OPS.fill:this.fill();break;case l.OPS.eoFill:this.eoFill();break;case l.OPS.stroke:this.stroke();break;case l.OPS.fillStroke:this.fillStroke();break;case l.OPS.eoFillStroke:this.eoFillStroke();break;case l.OPS.clip:this.clip("nonzero");break;case l.OPS.eoClip:this.clip("evenodd");break;case l.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case l.OPS.paintJpegXObject:this.paintJpegXObject(s[0],s[1],s[2]);break;case l.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case l.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case l.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case l.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case l.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case l.OPS.closePath:this.closePath();break;case l.OPS.closeStroke:this.closeStroke();break;case l.OPS.closeFillStroke:this.closeFillStroke();break;case l.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case l.OPS.nextLine:this.nextLine();break;case l.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case l.OPS.constructPath:this.constructPath(s[0],s[1]);break;case l.OPS.endPath:this.endPath();break;case 92:this.group(t[n].items);break;default:(0,l.warn)("Unimplemented operator "+i)}}},setWordSpacing:function(t){this.current.wordSpacing=t},setCharSpacing:function(t){this.current.charSpacing=t},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(e,n,i,r,s,o){var a=this.current;this.current.textMatrix=this.current.lineMatrix=[e,n,i,r,s,o],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,a.xcoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",t(a.fontSize)+"px"),a.tspan.setAttributeNS(null,"y",t(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.appendChild(a.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=l.IDENTITY_MATRIX,this.current.lineMatrix=l.IDENTITY_MATRIX,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.txtElement=this.svgFactory.createElement("svg:text"),this.current.txtgrp=this.svgFactory.createElement("svg:g"),this.current.xcoords=[]},moveText:function(e,n){var i=this.current;this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n,i.xcoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",t(i.fontSize)+"px"),i.tspan.setAttributeNS(null,"y",t(-i.y))},showText:function(n){var i=this.current,r=i.font,s=i.fontSize;if(0!==s){var o,a=i.charSpacing,h=i.wordSpacing,u=i.fontDirection,c=i.textHScale*u,f=n.length,p=r.vertical,g=s*i.fontMatrix[0],v=0;for(o=0;o<f;++o){var m=n[o];if(null!==m)if((0,l.isNum)(m))v+=-m*s*.001;else{var _=m.width,y=m.fontChar,b=_*g+((m.isSpace?h:0)+a)*u;m.isInFont||r.missingFile?(i.xcoords.push(i.x+v*c),i.tspan.textContent+=y,v+=b):v+=b}else v+=u*h}p?i.y-=v*c:i.x+=v*c,i.tspan.setAttributeNS(null,"x",i.xcoords.map(t).join(" ")),i.tspan.setAttributeNS(null,"y",t(-i.y)),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",t(i.fontSize)+"px"),i.fontStyle!==d.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==d.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight),i.fillColor!==d.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor);var w=i.textMatrix;0!==i.textRise&&((w=w.slice())[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",e(w)+" scale(1, -1)"),i.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},addFontStyle:function(t){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var e=(0,l.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+t.loadedName+'"; src: url('+e+"); }\n"},setFont:function(e){var n=this.current,i=this.commonObjs.get(e[0]),r=e[1];this.current.font=i,this.embedFonts&&i.data&&!this.embeddedFonts[i.loadedName]&&(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),n.fontMatrix=i.fontMatrix?i.fontMatrix:l.FONT_IDENTITY_MATRIX;var s=i.black?i.bold?"bolder":"bold":i.bold?"bold":"normal",o=i.italic?"italic":"normal";r<0?(r=-r,n.fontDirection=-1):n.fontDirection=1,n.fontSize=r,n.fontFamily=i.loadedName,n.fontWeight=s,n.fontStyle=o,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",t(-n.y)),n.xcoords=[]},endText:function(){},setLineWidth:function(t){this.current.lineWidth=t},setLineCap:function(t){this.current.lineCap=r[t]},setLineJoin:function(t){this.current.lineJoin=s[t]},setMiterLimit:function(t){this.current.miterLimit=t},setStrokeAlpha:function(t){this.current.strokeAlpha=t},setStrokeRGBColor:function(t,e,n){var i=l.Util.makeCssRgb(t,e,n);this.current.strokeColor=i},setFillAlpha:function(t){this.current.fillAlpha=t},setFillRGBColor:function(t,e,n){var i=l.Util.makeCssRgb(t,e,n);this.current.fillColor=i,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]},setDash:function(t,e){this.current.dashArray=t,this.current.dashPhase=e},constructPath:function(e,n){var i=this.current,r=i.x,s=i.y;i.path=this.svgFactory.createElement("svg:path");for(var o=[],a=e.length,h=0,u=0;h<a;h++)switch(0|e[h]){case l.OPS.rectangle:r=n[u++],s=n[u++];var c=r+n[u++],d=s+n[u++];o.push("M",t(r),t(s),"L",t(c),t(s),"L",t(c),t(d),"L",t(r),t(d),"Z");break;case l.OPS.moveTo:r=n[u++],s=n[u++],o.push("M",t(r),t(s));break;case l.OPS.lineTo:r=n[u++],s=n[u++],o.push("L",t(r),t(s));break;case l.OPS.curveTo:r=n[u+4],s=n[u+5],o.push("C",t(n[u]),t(n[u+1]),t(n[u+2]),t(n[u+3]),t(r),t(s)),u+=6;break;case l.OPS.curveTo2:r=n[u+2],s=n[u+3],o.push("C",t(r),t(s),t(n[u]),t(n[u+1]),t(n[u+2]),t(n[u+3])),u+=4;break;case l.OPS.curveTo3:r=n[u+2],s=n[u+3],o.push("C",t(n[u]),t(n[u+1]),t(r),t(s),t(r),t(s)),u+=4;break;case l.OPS.closePath:o.push("Z")}i.path.setAttributeNS(null,"d",o.join(" ")),i.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(i.path),i.element=i.path,i.setCurrentPoint(r,s)},endPath:function(){if(this.pendingClip){var t=this.current,n="clippath"+o;o++;var i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",n),i.setAttributeNS(null,"transform",e(this.transformMatrix));var r=t.element.cloneNode();"evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.appendChild(r),this.defs.appendChild(i),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach((function(t){t.clipGroup=null}))),t.activeClipUrl="url(#"+n+")",this.tgrp=null}},clip:function(t){this.pendingClip=t},closePath:function(){var t=this.current;if(t.path){var e=t.path.getAttributeNS(null,"d");e+="Z",t.path.setAttributeNS(null,"d",e)}},setLeading:function(t){this.current.leading=-t},setTextRise:function(t){this.current.textRise=t},setHScale:function(t){this.current.textHScale=t/100},setGState:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e],r=i[0],s=i[1];switch(r){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,l.warn)("Unimplemented graphic state "+r)}}},fill:function(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha))},stroke:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"stroke",e.strokeColor),e.element.setAttributeNS(null,"stroke-opacity",e.strokeAlpha),e.element.setAttributeNS(null,"stroke-miterlimit",t(e.miterLimit)),e.element.setAttributeNS(null,"stroke-linecap",e.lineCap),e.element.setAttributeNS(null,"stroke-linejoin",e.lineJoin),e.element.setAttributeNS(null,"stroke-width",t(e.lineWidth)+"px"),e.element.setAttributeNS(null,"stroke-dasharray",e.dashArray.map(t).join(" ")),e.element.setAttributeNS(null,"stroke-dashoffset",t(e.dashPhase)+"px"),e.element.setAttributeNS(null,"fill","none"))},eoFill:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.closePath(),this.eoFillStroke()},paintSolidColorImageMask:function(){var t=this.current,e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",t.fillColor),this._ensureTransformGroup().appendChild(e)},paintJpegXObject:function(e,n,r){var s=this.objs.get(e),o=this.svgFactory.createElement("svg:image");o.setAttributeNS(i,"xlink:href",s.src),o.setAttributeNS(null,"width",t(n)),o.setAttributeNS(null,"height",t(r)),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",t(-r)),o.setAttributeNS(null,"transform","scale("+t(1/n)+" "+t(-1/r)+")"),this._ensureTransformGroup().appendChild(o)},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,l.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(e,n){var r=e.width,s=e.height,o=f(e,this.forceDataSchema,!!n),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",t(r)),a.setAttributeNS(null,"height",t(s)),this.current.element=a,this.clip("nonzero");var l=this.svgFactory.createElement("svg:image");l.setAttributeNS(i,"xlink:href",o),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",t(-s)),l.setAttributeNS(null,"width",t(r)+"px"),l.setAttributeNS(null,"height",t(s)+"px"),l.setAttributeNS(null,"transform","scale("+t(1/r)+" "+t(-1/s)+")"),n?n.appendChild(l):this._ensureTransformGroup().appendChild(l)},paintImageMaskXObject:function(e){var n=this.current,i=e.width,r=e.height,s=n.fillColor;n.maskId="mask"+a++;var o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",n.maskId);var l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",t(i)),l.setAttributeNS(null,"height",t(r)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask","url(#"+n.maskId+")"),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(l),this.paintInlineImageXObject(e,o)},paintFormXObjectBegin:function(e,n){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),Array.isArray(n)&&4===n.length){var i=n[2]-n[0],r=n[3]-n[1],s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x",n[0]),s.setAttributeNS(null,"y",n[1]),s.setAttributeNS(null,"width",t(i)),s.setAttributeNS(null,"height",t(r)),this.current.element=s,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(t){var n=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");n.appendChild(i),this.defs=i;var r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",e(t.transform)),n.appendChild(r),this.svg=r,n},_ensureClipGroup:function(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},n}(),e.SVGGraphics=a},function(t,e,n){"use strict";var i=n(0),r=n(115),s=n(58),o=n(61),a=n(60),l=n(10),h=n(62);if(n(24)()){var u=n(121).PDFNodeStream;s.setPDFNetworkStreamFactory((function(t){return new u(t)}))}else if("undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream){var c=n(123).PDFFetchStream;s.setPDFNetworkStreamFactory((function(t){return new c(t)}))}else{var d=n(124).PDFNetworkStream;s.setPDFNetworkStreamFactory((function(t){return new d(t)}))}e.PDFJS=r.PDFJS,e.build=s.build,e.version=s.version,e.getDocument=s.getDocument,e.LoopbackPort=s.LoopbackPort,e.PDFDataRangeTransport=s.PDFDataRangeTransport,e.PDFWorker=s.PDFWorker,e.renderTextLayer=o.renderTextLayer,e.AnnotationLayer=a.AnnotationLayer,e.createPromiseCapability=i.createPromiseCapability,e.PasswordResponses=i.PasswordResponses,e.InvalidPDFException=i.InvalidPDFException,e.MissingPDFException=i.MissingPDFException,e.SVGGraphics=h.SVGGraphics,e.NativeImageDecoding=i.NativeImageDecoding,e.UnexpectedResponseException=i.UnexpectedResponseException,e.OPS=i.OPS,e.UNSUPPORTED_FEATURES=i.UNSUPPORTED_FEATURES,e.createValidAbsoluteUrl=i.createValidAbsoluteUrl,e.createObjectURL=i.createObjectURL,e.removeNullCharacters=i.removeNullCharacters,e.shadow=i.shadow,e.createBlob=i.createBlob,e.RenderingCancelledException=l.RenderingCancelledException,e.getFilenameFromUrl=l.getFilenameFromUrl,e.addLinkAttributes=l.addLinkAttributes},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof PDFJS||!PDFJS.compatibilityChecked){var s=n(14),o=n(24),a="undefined"!=typeof navigator&&navigator.userAgent||"",l=/Android/.test(a),h=a.indexOf("CriOS")>=0,u=a.indexOf("Trident")>=0,c=/\b(iPad|iPhone|iPod)(?=;)/.test(a),d=/Safari\//.test(a)&&!/(Chrome\/|Android\s)/.test(a),f="object"===("undefined"==typeof window?"undefined":i(window))&&"object"===("undefined"==typeof document?"undefined":i(document));"undefined"==typeof PDFJS&&(s.PDFJS={}),PDFJS.compatibilityChecked=!0,!s.btoa&&o()&&(s.btoa=function(t){return r.from(t,"binary").toString("base64")}),!s.atob&&o()&&(s.atob=function(t){return r.from(t,"base64").toString("binary")}),(u||h)&&(PDFJS.disableCreateObjectURL=!0),"undefined"!=typeof navigator&&("language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")),(d||c)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0),(c||l)&&(PDFJS.maxCanvasPixels=5242880),f&&u&&window.parent!==window&&(PDFJS.disableFullscreen=!0),f&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var t=document.getElementsByTagName("script");return t[t.length-1]},enumerable:!0,configurable:!0})),f&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Array.prototype.includes||(Array.prototype.includes=n(65)),Math.log2||(Math.log2=n(68)),Number.isNaN||(Number.isNaN=n(70)),Number.isInteger||(Number.isInteger=n(72)),s.Promise||(s.Promise=n(75)),s.WeakMap||(s.WeakMap=n(94)),function(){var t=!1;try{if("function"==typeof URL&&"object"===i(URL.prototype)&&"origin"in URL.prototype){var e=new URL("b","http://a");e.pathname="c%20d",t="http://a/c%20d"===e.href}}catch(t){}if(!t){var n=Object.create(null);n.ftp=21,n.file=0,n.gopher=70,n.http=80,n.https=443,n.ws=80,n.wss=443;var r=Object.create(null);r["%2e"]=".",r[".%2e"]="..",r["%2e."]="..",r["%2e%2e"]="..";var o,a=/[a-zA-Z]/,l=/[a-zA-Z0-9\+\-\.]/;m.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){v.call(this),g.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||g.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&g.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&g.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&g.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],g.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),g.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),g.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new m(this._schemeData).origin||"null"}catch(t){}return"null"}return(t=this.host)?this._scheme+"://"+t:""}};var h=s.URL;h&&(m.createObjectURL=function(t){return h.createObjectURL.apply(h,arguments)},m.revokeObjectURL=function(t){h.revokeObjectURL(t)}),s.URL=m}function u(t){return void 0!==n[t]}function c(){v.call(this),this._isInvalid=!0}function d(t){return""===t&&c.call(this),t.toLowerCase()}function f(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function p(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function g(t,e,i){function s(t){y.push(t)}var h=e||"scheme start",g=0,v="",m=!1,_=!1,y=[];t:for(;(t[g-1]!==o||0===g)&&!this._isInvalid;){var b=t[g];switch(h){case"scheme start":if(!b||!a.test(b)){if(e){s("Invalid scheme.");break t}v="",h="no scheme";continue}v+=b.toLowerCase(),h="scheme";break;case"scheme":if(b&&l.test(b))v+=b.toLowerCase();else{if(":"!==b){if(e){if(b===o)break t;s("Code point not allowed in scheme: "+b);break t}v="",g=0,h="no scheme";continue}if(this._scheme=v,v="",e)break t;u(this._scheme)&&(this._isRelative=!0),h="file"===this._scheme?"relative":this._isRelative&&i&&i._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===b?(this._query="?",h="query"):"#"===b?(this._fragment="#",h="fragment"):b!==o&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._schemeData+=f(b));break;case"no scheme":if(i&&u(i._scheme)){h="relative";continue}s("Missing scheme."),c.call(this);break;case"relative or authority":if("/"!==b||"/"!==t[g+1]){s("Expected /, got: "+b),h="relative";continue}h="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=i._scheme),b===o){this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query=i._query,this._username=i._username,this._password=i._password;break t}if("/"===b||"\\"===b)"\\"===b&&s("\\ is an invalid code point."),h="relative slash";else if("?"===b)this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query="?",this._username=i._username,this._password=i._password,h="query";else{if("#"!==b){var w=t[g+1],x=t[g+2];("file"!==this._scheme||!a.test(b)||":"!==w&&"|"!==w||x!==o&&"/"!==x&&"\\"!==x&&"?"!==x&&"#"!==x)&&(this._host=i._host,this._port=i._port,this._username=i._username,this._password=i._password,this._path=i._path.slice(),this._path.pop()),h="relative path";continue}this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query=i._query,this._fragment="#",this._username=i._username,this._password=i._password,h="fragment"}break;case"relative slash":if("/"!==b&&"\\"!==b){"file"!==this._scheme&&(this._host=i._host,this._port=i._port,this._username=i._username,this._password=i._password),h="relative path";continue}"\\"===b&&s("\\ is an invalid code point."),h="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==b){s("Expected '/', got: "+b),h="authority ignore slashes";continue}h="authority second slash";break;case"authority second slash":if(h="authority ignore slashes","/"!==b){s("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!==b&&"\\"!==b){h="authority";continue}s("Expected authority, got: "+b);break;case"authority":if("@"===b){m&&(s("@ already seen."),v+="%40"),m=!0;for(var S=0;S<v.length;S++){var A=v[S];if("\t"!==A&&"\n"!==A&&"\r"!==A)if(":"!==A||null!==this._password){var P=f(A);null!==this._password?this._password+=P:this._username+=P}else this._password="";else s("Invalid whitespace in authority.")}v=""}else{if(b===o||"/"===b||"\\"===b||"?"===b||"#"===b){g-=v.length,v="",h="host";continue}v+=b}break;case"file host":if(b===o||"/"===b||"\\"===b||"?"===b||"#"===b){2!==v.length||!a.test(v[0])||":"!==v[1]&&"|"!==v[1]?(0===v.length||(this._host=d.call(this,v),v=""),h="relative path start"):h="relative path";continue}"\t"===b||"\n"===b||"\r"===b?s("Invalid whitespace in file host."):v+=b;break;case"host":case"hostname":if(":"!==b||_){if(b===o||"/"===b||"\\"===b||"?"===b||"#"===b){if(this._host=d.call(this,v),v="",h="relative path start",e)break t;continue}"\t"!==b&&"\n"!==b&&"\r"!==b?("["===b?_=!0:"]"===b&&(_=!1),v+=b):s("Invalid code point in host/hostname: "+b)}else if(this._host=d.call(this,v),v="",h="port","hostname"===e)break t;break;case"port":if(/[0-9]/.test(b))v+=b;else{if(b===o||"/"===b||"\\"===b||"?"===b||"#"===b||e){if(""!==v){var C=parseInt(v,10);C!==n[this._scheme]&&(this._port=C+""),v=""}if(e)break t;h="relative path start";continue}"\t"===b||"\n"===b||"\r"===b?s("Invalid code point in port: "+b):c.call(this)}break;case"relative path start":if("\\"===b&&s("'\\' not allowed in path."),h="relative path","/"!==b&&"\\"!==b)continue;break;case"relative path":var k;b!==o&&"/"!==b&&"\\"!==b&&(e||"?"!==b&&"#"!==b)?"\t"!==b&&"\n"!==b&&"\r"!==b&&(v+=f(b)):("\\"===b&&s("\\ not allowed in relative path."),(k=r[v.toLowerCase()])&&(v=k),".."===v?(this._path.pop(),"/"!==b&&"\\"!==b&&this._path.push("")):"."===v&&"/"!==b&&"\\"!==b?this._path.push(""):"."!==v&&("file"===this._scheme&&0===this._path.length&&2===v.length&&a.test(v[0])&&"|"===v[1]&&(v=v[0]+":"),this._path.push(v)),v="","?"===b?(this._query="?",h="query"):"#"===b&&(this._fragment="#",h="fragment"));break;case"query":e||"#"!==b?b!==o&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._query+=p(b)):(this._fragment="#",h="fragment");break;case"fragment":b!==o&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._fragment+=b)}g++}}function v(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function m(t,e){void 0===e||e instanceof m||(e=new m(String(e))),this._url=t,v.call(this);var n=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");g.call(this,n,null,e)}}(),Object.values||(Object.values=n(110))}},function(t,e,n){"use strict";n(66),t.exports=n(5).Array.includes},function(t,e,n){"use strict";var i=n(4),r=n(42)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(43)("includes")},function(t,e,n){"use strict";var i=n(30),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):s(t,e)}},function(t,e,n){"use strict";n(69),t.exports=n(5).Math.log2},function(t,e,n){"use strict";var i=n(4);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){"use strict";n(71),t.exports=n(5).Number.isNaN},function(t,e,n){"use strict";var i=n(4);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){"use strict";n(73),t.exports=n(5).Number.isInteger},function(t,e,n){"use strict";var i=n(4);i(i.S,"Number",{isInteger:n(74)})},function(t,e,n){"use strict";var i=n(1),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){"use strict";n(45),n(76),n(50),n(85),n(92),n(93),t.exports=n(5).Promise},function(t,e,n){"use strict";var i=n(77)(!0);n(46)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var i=n(30),r=n(28);t.exports=function(t){return function(e,n){var s,o,a=String(r(e)),l=i(n),h=a.length;return l<0||l>=h?t?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===h||(o=a.charCodeAt(l+1))<56320||o>57343?t?a.charAt(l):s:t?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(79),r=n(26),s=n(22),o={};n(11)(o,n(2)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),s(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(6),r=n(80),s=n(48),o=n(32)("IE_PROTO"),a=function(){},l=function(){var t,e=n(25)("iframe"),i=s.length;for(e.style.display="none",n(49).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[s[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[o]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){"use strict";var i=n(15),r=n(6),s=n(21);t.exports=n(12)?Object.defineProperties:function(t,e){r(t);for(var n,o=s(e),a=o.length,l=0;a>l;)i.f(t,n=o[l++],e[n]);return t}},function(t,e,n){"use strict";var i=n(7),r=n(17),s=n(42)(!1),o=n(32)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),l=0,h=[];for(n in a)n!=o&&i(a,n)&&h.push(n);for(;e.length>l;)i(a,n=e[l++])&&(~s(h,n)||h.push(n));return h}},function(t,e,n){"use strict";var i=n(7),r=n(33),s=n(32)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){"use strict";var i=n(43),r=n(84),s=n(19),o=n(17);t.exports=n(46)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,s,o,a=n(47),l=n(3),h=n(9),u=n(31),c=n(4),d=n(1),f=n(16),p=n(34),g=n(23),v=n(51),m=n(52).set,_=n(90)(),y=n(35),b=n(53),w=n(54),x=l.TypeError,S=l.process,A=l.Promise,P="process"==u(S),C=function(){},k=r=y.f,T=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(C,C)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e}catch(t){}}(),E=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var n=t._c;_((function(){for(var i=t._v,r=1==t._s,s=0,o=function(e){var n,s,o=r?e.ok:e.fail,a=e.resolve,l=e.reject,h=e.domain;try{o?(r||(2==t._h&&j(t),t._h=1),!0===o?n=i:(h&&h.enter(),n=o(i),h&&h.exit()),n===e.promise?l(x("Promise-chain cycle")):(s=E(n))?s.call(n,a,l):a(n)):l(i)}catch(t){l(t)}};n.length>s;)o(n[s++]);t._c=[],t._n=!1,e&&!t._h&&R(t)}))}},R=function(t){m.call(l,(function(){var e,n,i,r=t._v,s=O(t);if(s&&(e=b((function(){P?S.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)})),t._h=P||O(t)?2:1),t._a=void 0,s&&e.e)throw e.v}))},O=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){m.call(l,(function(){var e;P?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})}))},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},L=function t(e){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw x("Promise can't be resolved itself");(n=E(e))?_((function(){var r={_w:i,_d:!1};try{n.call(e,h(t,r,1),h(M,r,1))}catch(t){M.call(r,t)}})):(i._v=e,i._s=1,I(i,!1))}catch(t){M.call({_w:i,_d:!1},t)}}};T||(A=function(t){p(this,A,"Promise","_h"),f(t),i.call(this);try{t(h(L,this,1),h(M,this,1))}catch(t){M.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(36)(A.prototype,{then:function(t,e){var n=k(v(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new i;this.promise=t,this.resolve=h(L,t,1),this.reject=h(M,t,1)},y.f=k=function(t){return t===A||t===o?new s(t):r(t)}),c(c.G+c.W+c.F*!T,{Promise:A}),n(22)(A,"Promise"),n(91)("Promise"),o=n(5).Promise,c(c.S+c.F*!T,"Promise",{reject:function(t){var e=k(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!T),"Promise",{resolve:function(t){return w(a&&this===o?A:this,t)}}),c(c.S+c.F*!(T&&n(55)((function(t){A.all(t).catch(C)}))),"Promise",{all:function(t){var e=this,n=k(e),i=n.resolve,r=n.reject,s=b((function(){var n=[],s=0,o=1;g(t,!1,(function(t){var a=s++,l=!1;n.push(void 0),o++,e.resolve(t).then((function(t){l||(l=!0,n[a]=t,--o||i(n))}),r)})),--o||i(n)}));return s.e&&r(s.v),n.promise},race:function(t){var e=this,n=k(e),i=n.reject,r=b((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(6);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var s=t.return;throw void 0!==s&&i(s.call(t)),e}}},function(t,e,n){"use strict";var i=n(19),r=n(2)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[r]===t)}},function(t,e,n){"use strict";var i=n(31),r=n(2)("iterator"),s=n(19);t.exports=n(5).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||s[i(t)]}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var i=n(3),r=n(52).set,s=i.MutationObserver||i.WebKitMutationObserver,o=i.process,a=i.Promise,l="process"==n(18)(o);t.exports=function(){var t,e,n,h=function(){var i,r;for(l&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){o.nextTick(h)};else if(!s||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var u=a.resolve();n=function(){u.then(h)}}else n=function(){r.call(i,h)};else{var c=!0,d=document.createTextNode("");new s(h).observe(d,{characterData:!0}),n=function(){d.data=c=!c}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){"use strict";var i=n(3),r=n(15),s=n(12),o=n(2)("species");t.exports=function(t){var e=i[t];s&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(4),r=n(5),s=n(3),o=n(51),a=n(54);i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||s.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var i=n(4),r=n(35),s=n(53);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=s(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";n(45),n(50),n(95),n(106),n(108),t.exports=n(5).WeakMap},function(t,e,n){"use strict";var i,r=n(56)(0),s=n(8),o=n(37),a=n(99),l=n(101),h=n(1),u=n(13),c=n(57),d=o.getWeak,f=Object.isExtensible,p=l.ufstore,g={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(h(t)){var e=d(t);return!0===e?p(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(c(this,"WeakMap"),t,e)}},_=t.exports=n(102)("WeakMap",v,m,l,!0,!0);u((function(){return 7!=(new _).set((Object.freeze||Object)(g),7).get(g)}))&&(a((i=l.getConstructor(v,"WeakMap")).prototype,m),o.NEED=!0,r(["delete","has","get","set"],(function(t){var e=_.prototype,n=e[t];s(e,t,(function(e,r){if(h(e)&&!f(e)){this._f||(this._f=new i);var s=this._f[t](e,r);return"set"==t?this:s}return n.call(this,e,r)}))})))},function(t,e,n){"use strict";var i=n(97);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(1),r=n(98),s=n(2)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(18);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(21),r=n(100),s=n(38),o=n(33),a=n(27),l=Object.assign;t.exports=!l||n(13)((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i}))?function(t,e){for(var n=o(t),l=arguments.length,h=1,u=r.f,c=s.f;l>h;)for(var d,f=a(arguments[h++]),p=u?i(f).concat(u(f)):i(f),g=p.length,v=0;g>v;)c.call(f,d=p[v++])&&(n[d]=f[d]);return n}:l},function(t,e,n){"use strict";e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(36),r=n(37).getWeak,s=n(6),o=n(1),a=n(34),l=n(23),h=n(56),u=n(7),c=n(57),d=h(5),f=h(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return d(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,s){var h=t((function(t,i){a(t,h,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=i&&l(i,n,t[s],t)}));return i(h.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?g(c(this,e)).delete(t):n&&u(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?g(c(this,e)).has(t):n&&u(n,this._i)}}),h},def:function(t,e,n){var i=r(s(e),!0);return!0===i?g(t).set(e,n):i[t._i]=n,t},ufstore:g}},function(t,e,n){"use strict";var i=n(3),r=n(4),s=n(8),o=n(36),a=n(37),l=n(23),h=n(34),u=n(1),c=n(13),d=n(55),f=n(22),p=n(103);t.exports=function(t,e,n,g,v,m){var _=i[t],y=_,b=v?"set":"add",w=y&&y.prototype,x={},S=function(t){var e=w[t];s(w,t,"delete"==t||"has"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(m||w.forEach&&!c((function(){(new y).entries().next()})))){var A=new y,P=A[b](m?{}:-0,1)!=A,C=c((function(){A.has(1)})),k=d((function(t){new y(t)})),T=!m&&c((function(){for(var t=new y,e=5;e--;)t[b](e,e);return!t.has(-0)}));k||((y=e((function(e,n){h(e,y,t);var i=p(new _,e,y);return null!=n&&l(n,v,i[b],i),i}))).prototype=w,w.constructor=y),(C||T)&&(S("delete"),S("has"),v&&S("get")),(T||P)&&S(b),m&&w.clear&&delete w.clear}else y=g.getConstructor(e,t,v,b),o(y.prototype,n),a.NEED=!0;return f(y,t),x[t]=y,r(r.G+r.W+r.F*(y!=_),x),m||g.setStrong(y,t,v),y}},function(t,e,n){"use strict";var i=n(1),r=n(104).set;t.exports=function(t,e,n){var s,o=e.constructor;return o!==n&&"function"==typeof o&&(s=o.prototype)!==n.prototype&&i(s)&&r&&r(t,s),t}},function(t,e,n){"use strict";var i=n(1),r=n(6),s=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(9)(Function.call,n(105).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:s}},function(t,e,n){"use strict";var i=n(38),r=n(26),s=n(17),o=n(41),a=n(7),l=n(40),h=Object.getOwnPropertyDescriptor;e.f=n(12)?h:function(t,e){if(t=s(t),e=o(e,!0),l)try{return h(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";n(107)("WeakMap")},function(t,e,n){"use strict";var i=n(4);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";n(109)("WeakMap")},function(t,e,n){"use strict";var i=n(4),r=n(16),s=n(9),o=n(23);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,a,l=arguments[1];return r(this),(e=void 0!==l)&&r(l),null==t?new this:(n=[],e?(i=0,a=s(l,arguments[2],2),o(t,!1,(function(t){n.push(a(t,i++))}))):o(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";n(111),t.exports=n(5).Object.values},function(t,e,n){"use strict";var i=n(4),r=n(112)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(21),r=n(17),s=n(38).f;t.exports=function(t){return function(e){for(var n,o=r(e),a=i(o),l=a.length,h=0,u=[];l>h;)s.call(o,n=a[h++])&&u.push(t?[n,o[n]]:o[n]);return u}}},function(t,e,n){"use strict";var i=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(t){t.close()}}),i=!0}catch(t){}e.ReadableStream=i?ReadableStream:n(114).ReadableStream},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){for(var n in e)t[n]=e[n]}(e,function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){var r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},s=n(1).assert;function o(t){return"string"==typeof t||"symbol"===(void 0===t?"undefined":r(t))}function a(t,e,n){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,n)}e.typeIsObject=function(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t||"function"==typeof t},e.createDataProperty=function(t,n,i){s(e.typeIsObject(t)),Object.defineProperty(t,n,{value:i,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,n,i,r){new Uint8Array(t).set(new Uint8Array(n,i,r),e)},e.CreateIterResultObject=function(t,e){s("boolean"==typeof e);var n={};return Object.defineProperty(n,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(n,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),n},e.IsFiniteNonNegativeNumber=function(t){return!(Number.isNaN(t)||t===1/0||t<0)},e.InvokeOrNoop=function(t,e,n){s(void 0!==t),s(o(e)),s(Array.isArray(n));var i=t[e];if(void 0!==i)return a(i,t,n)},e.PromiseInvokeOrNoop=function(t,n,i){s(void 0!==t),s(o(n)),s(Array.isArray(i));try{return Promise.resolve(e.InvokeOrNoop(t,n,i))}catch(t){return Promise.reject(t)}},e.PromiseInvokeOrPerformFallback=function(t,e,n,i,r){s(void 0!==t),s(o(e)),s(Array.isArray(n)),s(Array.isArray(r));var l=void 0;try{l=t[e]}catch(t){return Promise.reject(t)}if(void 0===l)return i.apply(null,r);try{return Promise.resolve(a(l,t,n))}catch(t){return Promise.reject(t)}},e.TransferArrayBuffer=function(t){return t.slice()},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),Number.isNaN(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.ValidateAndNormalizeQueuingStrategy=function(t,n){if(void 0!==t&&"function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return{size:t,highWaterMark:n=e.ValidateAndNormalizeHighWaterMark(n)}}},function(t,e,n){function i(t){this.name="AssertionError",this.message=t||"",this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,t.exports={rethrowAssertionErrorRejection:function(t){t&&t.constructor===i&&setTimeout((function(){throw t}),0)},AssertionError:i,assert:function(t,e){if(!t)throw new i(e)}}},function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(0),o=s.InvokeOrNoop,a=s.PromiseInvokeOrNoop,l=s.ValidateAndNormalizeQueuingStrategy,h=s.typeIsObject,u=n(1),c=u.assert,d=u.rethrowAssertionErrorRejection,f=n(3),p=f.DequeueValue,g=f.EnqueueValueWithSize,v=f.PeekQueueValue,m=f.ResetQueue,_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.size,s=n.highWaterMark,o=void 0===s?1:s;r(this,t),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var a=e.type;if(void 0!==a)throw new RangeError("Invalid type is specified");this._writableStreamController=new F(this,e,i,o),this._writableStreamController.__startSteps()}return i(t,[{key:"abort",value:function(t){return!1===b(this)?Promise.reject(V("abort")):!0===w(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):x(this,t)}},{key:"getWriter",value:function(){if(!1===b(this))throw V("getWriter");return y(this)}},{key:"locked",get:function(){if(!1===b(this))throw V("locked");return w(this)}}]),t}();function y(t){return new R(t)}function b(t){return!!h(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function w(t){return c(!0===b(t),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==t._writer}function x(t,e){var n=t._state;if("closed"===n)return Promise.resolve(void 0);if("errored"===n)return Promise.reject(t._storedError);var i=new TypeError("Requested to abort");if(void 0!==t._pendingAbortRequest)return Promise.reject(i);c("writable"===n||"erroring"===n,"state must be writable or erroring");var r=!1;"erroring"===n&&(r=!0,e=void 0);var s=new Promise((function(n,i){t._pendingAbortRequest={_resolve:n,_reject:i,_reason:e,_wasAlreadyErroring:r}}));return!1===r&&A(t,i),s}function S(t,e){var n=t._state;"writable"!==n?(c("erroring"===n),P(t)):A(t,e)}function A(t,e){c(void 0===t._storedError,"stream._storedError === undefined"),c("writable"===t._state,"state must be writable");var n=t._writableStreamController;c(void 0!==n,"controller must not be undefined"),t._state="erroring",t._storedError=e;var i=t._writer;void 0!==i&&L(i,e),!1===T(t)&&!0===n._started&&P(t)}function P(t){c("erroring"===t._state,"stream._state === erroring"),c(!1===T(t),"WritableStreamHasOperationMarkedInFlight(stream) === false"),t._state="errored",t._writableStreamController.__errorSteps();for(var e=t._storedError,n=0;n<t._writeRequests.length;n++)t._writeRequests[n]._reject(e);if(t._writeRequests=[],void 0!==t._pendingAbortRequest){var i=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===i._wasAlreadyErroring)return i._reject(e),void E(t);t._writableStreamController.__abortSteps(i._reason).then((function(){i._resolve(),E(t)}),(function(e){i._reject(e),E(t)}))}else E(t)}function C(t){c(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var e=t._state;c("writable"===e||"erroring"===e),"erroring"===e&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var n=t._writer;void 0!==n&&function(t){c(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),c(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),c("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(n),c(void 0===t._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),c(void 0===t._storedError,"stream._storedError === undefined")}function k(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function T(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function E(t){c("errored"===t._state,'_stream_.[[state]] is `"errored"`'),void 0!==t._closeRequest&&(c(void 0===t._inFlightCloseRequest),t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(Y(e,t._storedError),e._closedPromise.catch((function(){})))}function I(t,e){c("writable"===t._state),c(!1===k(t));var n=t._writer;void 0!==n&&e!==t._backpressure&&(!0===e?function(t){c(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),c(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=new Promise((function(e,n){t._readyPromise_resolve=e,t._readyPromise_reject=n})),t._readyPromiseState="pending"}(n):(c(!1===e),Q(n))),t._backpressure=e}t.exports={AcquireWritableStreamDefaultWriter:y,IsWritableStream:b,IsWritableStreamLocked:w,WritableStream:_,WritableStreamAbort:x,WritableStreamDefaultControllerError:W,WritableStreamDefaultWriterCloseWithErrorPropagation:function(t){var e=t._ownerWritableStream;c(void 0!==e);var n=e._state;return!0===k(e)||"closed"===n?Promise.resolve():"errored"===n?Promise.reject(e._storedError):(c("writable"===n||"erroring"===n),j(t))},WritableStreamDefaultWriterRelease:D,WritableStreamDefaultWriterWrite:N,WritableStreamCloseQueuedOrInFlight:k};var R=function(){function t(e){if(r(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===w(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var n,i=e._state;if("writable"===i)!1===k(e)&&!0===e._backpressure?((n=this)._readyPromise=new Promise((function(t,e){n._readyPromise_resolve=t,n._readyPromise_reject=e})),n._readyPromiseState="pending"):Z(this),G(this);else if("erroring"===i)J(this,e._storedError),this._readyPromise.catch((function(){})),G(this);else if("closed"===i)Z(this),function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(this);else{c("errored"===i,"state must be errored");var s=e._storedError;J(this,s),this._readyPromise.catch((function(){})),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}(this,s),this._closedPromise.catch((function(){}))}}return i(t,[{key:"abort",value:function(t){return!1===O(this)?Promise.reject(H("abort")):void 0===this._ownerWritableStream?Promise.reject(X("abort")):function(t,e){var n=t._ownerWritableStream;return c(void 0!==n),x(n,e)}(this,t)}},{key:"close",value:function(){if(!1===O(this))return Promise.reject(H("close"));var t=this._ownerWritableStream;return void 0===t?Promise.reject(X("close")):!0===k(t)?Promise.reject(new TypeError("cannot close an already-closing stream")):j(this)}},{key:"releaseLock",value:function(){if(!1===O(this))throw H("releaseLock");var t=this._ownerWritableStream;void 0!==t&&(c(void 0!==t._writer),D(this))}},{key:"write",value:function(t){return!1===O(this)?Promise.reject(H("write")):void 0===this._ownerWritableStream?Promise.reject(X("write to")):N(this,t)}},{key:"closed",get:function(){return!1===O(this)?Promise.reject(H("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===O(this))throw H("desiredSize");if(void 0===this._ownerWritableStream)throw X("desiredSize");return t=this._ownerWritableStream,"errored"===(e=t._state)||"erroring"===e?null:"closed"===e?0:z(t._writableStreamController);var t,e}},{key:"ready",get:function(){return!1===O(this)?Promise.reject(H("ready")):this._readyPromise}}]),t}();function O(t){return!!h(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function j(t){var e=t._ownerWritableStream;c(void 0!==e);var n=e._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed"));c("writable"===n||"erroring"===n),c(!1===k(e));var i,r=new Promise((function(t,n){var i={_resolve:t,_reject:n};e._closeRequest=i}));return!0===e._backpressure&&"writable"===n&&Q(t),i=e._writableStreamController,g(i,"close",0),q(i),r}function M(t,e){"pending"===t._closedPromiseState?Y(t,e):function(t,e){c(void 0===t._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),c(void 0===t._closedPromise_reject,"writer._closedPromise_reject === undefined"),c("pending"!==t._closedPromiseState,"writer._closedPromiseState is not pending"),t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}(t,e),t._closedPromise.catch((function(){}))}function L(t,e){"pending"===t._readyPromiseState?function(t,e){c(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),c(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}(t,e):function(t,e){c(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),c(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}(t,e),t._readyPromise.catch((function(){}))}function D(t){var e=t._ownerWritableStream;c(void 0!==e),c(e._writer===t);var n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");L(t,n),M(t,n),e._writer=void 0,t._ownerWritableStream=void 0}function N(t,e){var n=t._ownerWritableStream;c(void 0!==n);var i=n._writableStreamController,r=function(t,e){var n=t._strategySize;if(void 0===n)return 1;try{return n(e)}catch(e){return B(t,e),1}}(i,e);if(n!==t._ownerWritableStream)return Promise.reject(X("write to"));var s=n._state;if("errored"===s)return Promise.reject(n._storedError);if(!0===k(n)||"closed"===s)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===s)return Promise.reject(n._storedError);c("writable"===s);var o=function(t){return c(!0===w(t)),c("writable"===t._state),new Promise((function(e,n){var i={_resolve:e,_reject:n};t._writeRequests.push(i)}))}(n);return function(t,e,n){var i={chunk:e};try{g(t,i,n)}catch(e){return void B(t,e)}var r=t._controlledWritableStream;if(!1===k(r)&&"writable"===r._state){var s=U(t);I(r,s)}q(t)}(i,e,r),o}var F=function(){function t(e,n,i,s){if(r(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==e._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=n,this._queue=void 0,this._queueTotalSize=void 0,m(this),this._started=!1;var o=l(i,s);this._strategySize=o.size,this._strategyHWM=o.highWaterMark,I(e,U(this))}return i(t,[{key:"error",value:function(t){if(!1==(!!h(e=this)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSink")))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var e;"writable"===this._controlledWritableStream._state&&W(this,t)}},{key:"__abortSteps",value:function(t){return a(this._underlyingSink,"abort",[t])}},{key:"__errorSteps",value:function(){m(this)}},{key:"__startSteps",value:function(){var t=this,e=o(this._underlyingSink,"start",[this]),n=this._controlledWritableStream;Promise.resolve(e).then((function(){c("writable"===n._state||"erroring"===n._state),t._started=!0,q(t)}),(function(e){c("writable"===n._state||"erroring"===n._state),t._started=!0,S(n,e)})).catch(d)}}]),t}();function z(t){return t._strategyHWM-t._queueTotalSize}function q(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var n=e._state;if("closed"!==n&&"errored"!==n)if("erroring"!==n){if(0!==t._queue.length){var i=v(t);"close"===i?function(t){var e=t._controlledWritableStream;(function(t){c(void 0===t._inFlightCloseRequest),c(void 0!==t._closeRequest),t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0})(e),p(t),c(0===t._queue.length,"queue must be empty once the final write record is dequeued"),a(t._underlyingSink,"close",[]).then((function(){C(e)}),(function(t){!function(t,e){c(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,c("writable"===t._state||"erroring"===t._state),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),S(t,e)}(e,t)})).catch(d)}(t):function(t,e){var n=t._controlledWritableStream;(function(t){c(void 0===t._inFlightWriteRequest,"there must be no pending write request"),c(0!==t._writeRequests.length,"writeRequests must not be empty"),t._inFlightWriteRequest=t._writeRequests.shift()})(n),a(t._underlyingSink,"write",[e,t]).then((function(){!function(t){c(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}(n);var e=n._state;if(c("writable"===e||"erroring"===e),p(t),!1===k(n)&&"writable"===e){var i=U(t);I(n,i)}q(t)}),(function(t){!function(t,e){c(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,c("writable"===t._state||"erroring"===t._state),S(t,e)}(n,t)})).catch(d)}(t,i.chunk)}}else P(e)}}function B(t,e){"writable"===t._controlledWritableStream._state&&W(t,e)}function U(t){return z(t)<=0}function W(t,e){var n=t._controlledWritableStream;c("writable"===n._state),A(n,e)}function V(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function H(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function X(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function G(t){t._closedPromise=new Promise((function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n,t._closedPromiseState="pending"}))}function Y(t,e){c(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),c(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),c("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function J(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function Z(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function Q(t){c(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),c(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}},function(t,e,n){var i=n(0).IsFiniteNonNegativeNumber,r=n(1).assert;e.DequeueValue=function(t){r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),r(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},e.EnqueueValueWithSize=function(t,e,n){if(r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),n=Number(n),!i(n))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:n}),t._queueTotalSize+=n},e.PeekQueueValue=function(t){return r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),r(t._queue.length>0,"Spec-level failure: should never peek at an empty queue."),t._queue[0].value},e.ResetQueue=function(t){r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}},function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(0),o=s.ArrayBufferCopy,a=s.CreateIterResultObject,l=s.IsFiniteNonNegativeNumber,h=s.InvokeOrNoop,u=s.PromiseInvokeOrNoop,c=s.TransferArrayBuffer,d=s.ValidateAndNormalizeQueuingStrategy,f=s.ValidateAndNormalizeHighWaterMark,p=n(0),g=p.createArrayFromList,v=p.createDataProperty,m=p.typeIsObject,_=n(1),y=_.assert,b=_.rethrowAssertionErrorRejection,w=n(3),x=w.DequeueValue,S=w.EnqueueValueWithSize,A=w.ResetQueue,P=n(2),C=P.AcquireWritableStreamDefaultWriter,k=P.IsWritableStream,T=P.IsWritableStreamLocked,E=P.WritableStreamAbort,I=P.WritableStreamDefaultWriterCloseWithErrorPropagation,R=P.WritableStreamDefaultWriterRelease,O=P.WritableStreamDefaultWriterWrite,j=P.WritableStreamCloseQueuedOrInFlight,M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.size,s=n.highWaterMark;r(this,t),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var o=e.type,a=String(o);if("bytes"===a)void 0===s&&(s=0),this._readableStreamController=new ft(this,e,s);else{if(void 0!==o)throw new RangeError("Invalid type is specified");void 0===s&&(s=1),this._readableStreamController=new rt(this,e,i,s)}}return i(t,[{key:"cancel",value:function(t){return!1===N(this)?Promise.reject(It("cancel")):!0===F(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):U(this,t)}},{key:"getReader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode;if(!1===N(this))throw It("getReader");if(void 0===e)return D(this);if("byob"===(e=String(e)))return L(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(t,e){var n=t.writable,i=t.readable;return function(t){try{Promise.prototype.then.call(t,void 0,(function(){}))}catch(t){}}(this.pipeTo(n,e)),i}},{key:"pipeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.preventClose,r=n.preventAbort,s=n.preventCancel;if(!1===N(this))return Promise.reject(It("pipeTo"));if(!1===k(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(i=Boolean(i),r=Boolean(r),s=Boolean(s),!0===F(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===T(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var o=D(this),a=C(t),l=!1,h=Promise.resolve();return new Promise((function(n,u){var c,d,f;if(v(e,o._closedPromise,(function(e){!1===r?m((function(){return E(t,e)}),!0,e):_(!0,e)})),v(t,a._closedPromise,(function(t){!1===s?m((function(){return U(e,t)}),!0,t):_(!0,t)})),c=e,d=o._closedPromise,f=function(){!1===i?m((function(){return I(a)})):_()},"closed"===c._state?f():d.then(f).catch(b),!0===j(t)||"closed"===t._state){var p=new TypeError("the destination writable stream closed before all data could be piped to it");!1===s?m((function(){return U(e,p)}),!0,p):_(!0,p)}function g(){var t=h;return h.then((function(){return t!==h?g():void 0}))}function v(t,e,n){"errored"===t._state?n(t._storedError):e.catch(n).catch(b)}function m(e,n,i){function r(){e().then((function(){return y(n,i)}),(function(t){return y(!0,t)})).catch(b)}!0!==l&&(l=!0,"writable"===t._state&&!1===j(t)?g().then(r):r())}function _(e,n){!0!==l&&(l=!0,"writable"===t._state&&!1===j(t)?g().then((function(){return y(e,n)})).catch(b):y(e,n))}function y(t,e){R(a),nt(o),t?u(e):n(void 0)}(function t(){return h=Promise.resolve(),!0===l?Promise.resolve():a._readyPromise.then((function(){return it(o).then((function(t){var e=t.value;!0!==t.done&&(h=O(a,e).catch((function(){})))}))})).then(t)})().catch((function(t){h=Promise.resolve(),b(t)}))}))}},{key:"tee",value:function(){if(!1===N(this))throw It("tee");var t=z(this,!1);return g(t)}},{key:"locked",get:function(){if(!1===N(this))throw It("locked");return F(this)}}]),t}();function L(t){return new Q(t)}function D(t){return new Z(t)}function N(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function F(t){return y(!0===N(t),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==t._reader}function z(t,e){y(!0===N(t)),y("boolean"==typeof e);var n=D(t),i={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};i.promise=new Promise((function(t){i._resolve=t}));var r=function t(){var e=t._branch1,n=t._branch2,i=t._teeState;return it(t._reader).then((function(t){y(m(t));var r=t.value,s=t.done;if(y("boolean"==typeof s),!0===s&&!1===i.closedOrErrored&&(!1===i.canceled1&&at(e),!1===i.canceled2&&at(n),i.closedOrErrored=!0),!0!==i.closedOrErrored){var o=r,a=r;!1===i.canceled1&&lt(e,o),!1===i.canceled2&&lt(n,a)}}))};r._reader=n,r._teeState=i,r._cloneForBranch2=e;var s=function t(e){var n=t._stream,i=t._teeState;if(i.canceled1=!0,i.reason1=e,!0===i.canceled2){var r=U(n,g([i.reason1,i.reason2]));i._resolve(r)}return i.promise};s._stream=t,s._teeState=i;var o=function t(e){var n=t._stream,i=t._teeState;if(i.canceled2=!0,i.reason2=e,!0===i.canceled1){var r=U(n,g([i.reason1,i.reason2]));i._resolve(r)}return i.promise};o._stream=t,o._teeState=i;var a=Object.create(Object.prototype);v(a,"pull",r),v(a,"cancel",s);var l=new M(a),h=Object.create(Object.prototype);v(h,"pull",r),v(h,"cancel",o);var u=new M(h);return r._branch1=l._readableStreamController,r._branch2=u._readableStreamController,n._closedPromise.catch((function(t){!0!==i.closedOrErrored&&(ht(r._branch1,t),ht(r._branch2,t),i.closedOrErrored=!0)})),[l,u]}function q(t){return y(!0===K(t._reader)),y("readable"===t._state||"closed"===t._state),new Promise((function(e,n){var i={_resolve:e,_reject:n};t._reader._readIntoRequests.push(i)}))}function B(t){return y(!0===$(t._reader)),y("readable"===t._state),new Promise((function(e,n){var i={_resolve:e,_reject:n};t._reader._readRequests.push(i)}))}function U(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(W(t),t._readableStreamController.__cancelSteps(e).then((function(){})))}function W(t){y("readable"===t._state),t._state="closed";var e=t._reader;if(void 0!==e){if(!0===$(e)){for(var n=0;n<e._readRequests.length;n++)(0,e._readRequests[n]._resolve)(a(void 0,!0));e._readRequests=[]}!function(t){y(void 0!==t._closedPromise_resolve),y(void 0!==t._closedPromise_reject),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(e)}}function V(t,e){y(!0===N(t),"stream must be ReadableStream"),y("readable"===t._state,"state must be readable"),t._state="errored",t._storedError=e;var n=t._reader;if(void 0!==n){if(!0===$(n)){for(var i=0;i<n._readRequests.length;i++)n._readRequests[i]._reject(e);n._readRequests=[]}else{y(K(n),"reader must be ReadableStreamBYOBReader");for(var r=0;r<n._readIntoRequests.length;r++)n._readIntoRequests[r]._reject(e);n._readIntoRequests=[]}jt(n,e),n._closedPromise.catch((function(){}))}}function H(t,e,n){var i=t._reader;y(i._readRequests.length>0),i._readRequests.shift()._resolve(a(e,n))}function X(t){return t._reader._readIntoRequests.length}function G(t){return t._reader._readRequests.length}function Y(t){var e=t._reader;return void 0!==e&&!1!==K(e)}function J(t){var e=t._reader;return void 0!==e&&!1!==$(e)}t.exports={ReadableStream:M,IsReadableStreamDisturbed:function(t){return y(!0===N(t),"IsReadableStreamDisturbed should only be used on known readable streams"),t._disturbed},ReadableStreamDefaultControllerClose:at,ReadableStreamDefaultControllerEnqueue:lt,ReadableStreamDefaultControllerError:ht,ReadableStreamDefaultControllerGetDesiredSize:ct};var Z=function(){function t(e){if(r(this,t),!1===N(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===F(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");tt(this,e),this._readRequests=[]}return i(t,[{key:"cancel",value:function(t){return!1===$(this)?Promise.reject(Ot("cancel")):void 0===this._ownerReadableStream?Promise.reject(Rt("cancel")):et(this,t)}},{key:"read",value:function(){return!1===$(this)?Promise.reject(Ot("read")):void 0===this._ownerReadableStream?Promise.reject(Rt("read from")):it(this)}},{key:"releaseLock",value:function(){if(!1===$(this))throw Ot("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");nt(this)}}},{key:"closed",get:function(){return!1===$(this)?Promise.reject(Ot("closed")):this._closedPromise}}]),t}(),Q=function(){function t(e){if(r(this,t),!N(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===pt(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(F(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");tt(this,e),this._readIntoRequests=[]}return i(t,[{key:"cancel",value:function(t){return K(this)?void 0===this._ownerReadableStream?Promise.reject(Rt("cancel")):et(this,t):Promise.reject(Mt("cancel"))}},{key:"read",value:function(t){return K(this)?void 0===this._ownerReadableStream?Promise.reject(Rt("read from")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(t,e){var n=t._ownerReadableStream;return y(void 0!==n),n._disturbed=!0,"errored"===n._state?Promise.reject(n._storedError):function(t,e){var n=t._controlledReadableStream,i=1;e.constructor!==DataView&&(i=e.constructor.BYTES_PER_ELEMENT);var r=e.constructor,s={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:i,ctor:r,readerType:"byob"};if(t._pendingPullIntos.length>0)return s.buffer=c(s.buffer),t._pendingPullIntos.push(s),q(n);if("closed"===n._state){var o=new e.constructor(s.buffer,s.byteOffset,0);return Promise.resolve(a(o,!0))}if(t._queueTotalSize>0){if(!0===wt(t,s)){var l=yt(s);return St(t),Promise.resolve(a(l,!1))}if(!0===t._closeRequested){var h=new TypeError("Insufficient bytes to fill elements in the given buffer");return Tt(t,h),Promise.reject(h)}}s.buffer=c(s.buffer),t._pendingPullIntos.push(s);var u=q(n);return vt(t),u}(n._readableStreamController,e)}(this,t):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Mt("read"))}},{key:"releaseLock",value:function(){if(!K(this))throw Mt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");nt(this)}}},{key:"closed",get:function(){return K(this)?this._closedPromise:Promise.reject(Mt("closed"))}}]),t}();function K(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function $(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function tt(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?function(t){t._closedPromise=new Promise((function(e,n){t._closedPromise_resolve=e,t._closedPromise_reject=n}))}(t):"closed"===e._state?function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t):(y("errored"===e._state,"state must be errored"),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t,e._storedError),t._closedPromise.catch((function(){})))}function et(t,e){var n=t._ownerReadableStream;return y(void 0!==n),U(n,e)}function nt(t){y(void 0!==t._ownerReadableStream),y(t._ownerReadableStream._reader===t),"readable"===t._ownerReadableStream._state?jt(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){y(void 0===t._closedPromise_resolve),y(void 0===t._closedPromise_reject),t._closedPromise=Promise.reject(e)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch((function(){})),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function it(t){var e=t._ownerReadableStream;return y(void 0!==e),e._disturbed=!0,"closed"===e._state?Promise.resolve(a(void 0,!0)):"errored"===e._state?Promise.reject(e._storedError):(y("readable"===e._state),e._readableStreamController.__pullSteps())}var rt=function(){function t(e,n,i,s){if(r(this,t),!1===N(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=n,this._queue=void 0,this._queueTotalSize=void 0,A(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var o=d(i,s);this._strategySize=o.size,this._strategyHWM=o.highWaterMark;var a=this,l=h(n,"start",[this]);Promise.resolve(l).then((function(){a._started=!0,y(!1===a._pulling),y(!1===a._pullAgain),ot(a)}),(function(t){ut(a,t)})).catch(b)}return i(t,[{key:"close",value:function(){if(!1===st(this))throw Lt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");at(this)}},{key:"enqueue",value:function(t){if(!1===st(this))throw Lt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");return lt(this,t)}},{key:"error",value:function(t){if(!1===st(this))throw Lt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");ht(this,t)}},{key:"__cancelSteps",value:function(t){return A(this),u(this._underlyingSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(this._queue.length>0){var e=x(this);return!0===this._closeRequested&&0===this._queue.length?W(t):ot(this),Promise.resolve(a(e,!1))}var n=B(t);return ot(this),n}},{key:"desiredSize",get:function(){if(!1===st(this))throw Lt("desiredSize");return ct(this)}}]),t}();function st(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSource")}function ot(t){!1!==function(t){var e=t._controlledReadableStream;return"closed"!==e._state&&"errored"!==e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===F(e)&&G(e)>0||ct(t)>0)))}(t)&&(!0!==t._pulling?(y(!1===t._pullAgain),t._pulling=!0,u(t._underlyingSource,"pull",[t]).then((function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,ot(t)}),(function(e){ut(t,e)})).catch(b)):t._pullAgain=!0)}function at(t){var e=t._controlledReadableStream;y(!1===t._closeRequested),y("readable"===e._state),t._closeRequested=!0,0===t._queue.length&&W(e)}function lt(t,e){var n=t._controlledReadableStream;if(y(!1===t._closeRequested),y("readable"===n._state),!0===F(n)&&G(n)>0)H(n,e,!1);else{var i=1;if(void 0!==t._strategySize){var r=t._strategySize;try{i=r(e)}catch(e){throw ut(t,e),e}}try{S(t,e,i)}catch(e){throw ut(t,e),e}}ot(t)}function ht(t,e){var n=t._controlledReadableStream;y("readable"===n._state),A(t),V(n,e)}function ut(t,e){"readable"===t._controlledReadableStream._state&&ht(t,e)}function ct(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}var dt=function(){function t(e,n){r(this,t),this._associatedReadableByteStreamController=e,this._view=n}return i(t,[{key:"respond",value:function(t){if(!1===gt(this))throw Dt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(t,e){if(e=Number(e),!1===l(e))throw new RangeError("bytesWritten must be a finite");y(t._pendingPullIntos.length>0),Ct(t,e)}(this._associatedReadableByteStreamController,t)}},{key:"respondWithNewView",value:function(t){if(!1===gt(this))throw Dt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");!function(t,e){y(t._pendingPullIntos.length>0);var n=t._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=e.buffer,Ct(t,e.byteLength)}(this._associatedReadableByteStreamController,t)}},{key:"view",get:function(){return this._view}}]),t}(),ft=function(){function t(e,n,i){if(r(this,t),!1===N(e))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==e._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=n,this._pullAgain=!1,this._pulling=!1,mt(this),this._queue=this._queueTotalSize=void 0,A(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=f(i);var s=n.autoAllocateChunkSize;if(void 0!==s&&(!1===Number.isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=s,this._pendingPullIntos=[];var o=this,a=h(n,"start",[this]);Promise.resolve(a).then((function(){o._started=!0,y(!1===o._pulling),y(!1===o._pullAgain),vt(o)}),(function(t){"readable"===e._state&&Tt(o,t)})).catch(b)}return i(t,[{key:"close",value:function(){if(!1===pt(this))throw Nt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t._controlledReadableStream;if(y(!1===t._closeRequested),y("readable"===e._state),t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos[0].bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Tt(t,n),n}W(e)}}(this)}},{key:"enqueue",value:function(t){if(!1===pt(this))throw Nt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(t,e){var n=t._controlledReadableStream;y(!1===t._closeRequested),y("readable"===n._state);var i=e.buffer,r=e.byteOffset,s=e.byteLength,o=c(i);if(!0===J(n))if(0===G(n))bt(t,o,r,s);else{y(0===t._queue.length);var a=new Uint8Array(o,r,s);H(n,a,!1)}else!0===Y(n)?(bt(t,o,r,s),Pt(t)):(y(!1===F(n),"stream must not be locked"),bt(t,o,r,s))}(this,t)}},{key:"error",value:function(t){if(!1===pt(this))throw Nt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");Tt(this,t)}},{key:"__cancelSteps",value:function(t){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),A(this),u(this._underlyingByteSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(y(!0===J(t)),this._queueTotalSize>0){y(0===G(t));var e=this._queue.shift();this._queueTotalSize-=e.byteLength,St(this);var n=void 0;try{n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}catch(t){return Promise.reject(t)}return Promise.resolve(a(n,!1))}var i=this._autoAllocateChunkSize;if(void 0!==i){var r=void 0;try{r=new ArrayBuffer(i)}catch(t){return Promise.reject(t)}var s={buffer:r,byteOffset:0,byteLength:i,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(s)}var o=B(t);return vt(this),o}},{key:"byobRequest",get:function(){if(!1===pt(this))throw Nt("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);this._byobRequest=new dt(this,e)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===pt(this))throw Nt("desiredSize");return Et(this)}}]),t}();function pt(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingByteSource")}function gt(t){return!!m(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function vt(t){!1!==function(t){var e=t._controlledReadableStream;return"readable"===e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===J(e)&&G(e)>0||(!0===Y(e)&&X(e)>0||Et(t)>0))))}(t)&&(!0!==t._pulling?(y(!1===t._pullAgain),t._pulling=!0,u(t._underlyingByteSource,"pull",[t]).then((function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,vt(t))}),(function(e){"readable"===t._controlledReadableStream._state&&Tt(t,e)})).catch(b)):t._pullAgain=!0)}function mt(t){At(t),t._pendingPullIntos=[]}function _t(t,e){y("errored"!==t._state,"state must not be errored");var n=!1;"closed"===t._state&&(y(0===e.bytesFilled),n=!0);var i=yt(e);"default"===e.readerType?H(t,i,n):(y("byob"===e.readerType),function(t,e,n){var i=t._reader;y(i._readIntoRequests.length>0),i._readIntoRequests.shift()._resolve(a(e,n))}(t,i,n))}function yt(t){var e=t.bytesFilled,n=t.elementSize;return y(e<=t.byteLength),y(e%n==0),new t.ctor(t.buffer,t.byteOffset,e/n)}function bt(t,e,n,i){t._queue.push({buffer:e,byteOffset:n,byteLength:i}),t._queueTotalSize+=i}function wt(t,e){var n=e.elementSize,i=e.bytesFilled-e.bytesFilled%n,r=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),s=e.bytesFilled+r,a=s-s%n,l=r,h=!1;a>i&&(l=a-e.bytesFilled,h=!0);for(var u=t._queue;l>0;){var c=u[0],d=Math.min(l,c.byteLength),f=e.byteOffset+e.bytesFilled;o(e.buffer,f,c.buffer,c.byteOffset,d),c.byteLength===d?u.shift():(c.byteOffset+=d,c.byteLength-=d),t._queueTotalSize-=d,xt(t,d,e),l-=d}return!1===h&&(y(0===t._queueTotalSize,"queue must be empty"),y(e.bytesFilled>0),y(e.bytesFilled<e.elementSize)),h}function xt(t,e,n){y(0===t._pendingPullIntos.length||t._pendingPullIntos[0]===n),At(t),n.bytesFilled+=e}function St(t){y("readable"===t._controlledReadableStream._state),0===t._queueTotalSize&&!0===t._closeRequested?W(t._controlledReadableStream):vt(t)}function At(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function Pt(t){for(y(!1===t._closeRequested);t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===wt(t,e)&&(kt(t),_t(t._controlledReadableStream,e))}}function Ct(t,e){var n=t._pendingPullIntos[0],i=t._controlledReadableStream;if("closed"===i._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=c(e.buffer),y(0===e.bytesFilled,"bytesFilled must be 0");var n=t._controlledReadableStream;if(!0===Y(n))for(;X(n)>0;)_t(n,kt(t))}(t,n)}else y("readable"===i._state),function(t,e,n){if(n.bytesFilled+e>n.byteLength)throw new RangeError("bytesWritten out of range");if(xt(t,e,n),!(n.bytesFilled<n.elementSize)){kt(t);var i=n.bytesFilled%n.elementSize;if(i>0){var r=n.byteOffset+n.bytesFilled,s=n.buffer.slice(r-i,r);bt(t,s,0,s.byteLength)}n.buffer=c(n.buffer),n.bytesFilled-=i,_t(t._controlledReadableStream,n),Pt(t)}}(t,e,n)}function kt(t){var e=t._pendingPullIntos.shift();return At(t),e}function Tt(t,e){var n=t._controlledReadableStream;y("readable"===n._state),mt(t),A(t),V(n,e)}function Et(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function It(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function Rt(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Ot(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function jt(t,e){y(void 0!==t._closedPromise_resolve),y(void 0!==t._closedPromise_reject),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function Mt(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Lt(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Dt(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Nt(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}},function(t,e,n){var i=n(6),r=n(4),s=n(2);e.TransformStream=i.TransformStream,e.ReadableStream=r.ReadableStream,e.IsReadableStreamDisturbed=r.IsReadableStreamDisturbed,e.ReadableStreamDefaultControllerClose=r.ReadableStreamDefaultControllerClose,e.ReadableStreamDefaultControllerEnqueue=r.ReadableStreamDefaultControllerEnqueue,e.ReadableStreamDefaultControllerError=r.ReadableStreamDefaultControllerError,e.ReadableStreamDefaultControllerGetDesiredSize=r.ReadableStreamDefaultControllerGetDesiredSize,e.AcquireWritableStreamDefaultWriter=s.AcquireWritableStreamDefaultWriter,e.IsWritableStream=s.IsWritableStream,e.IsWritableStreamLocked=s.IsWritableStreamLocked,e.WritableStream=s.WritableStream,e.WritableStreamAbort=s.WritableStreamAbort,e.WritableStreamDefaultControllerError=s.WritableStreamDefaultControllerError,e.WritableStreamDefaultWriterCloseWithErrorPropagation=s.WritableStreamDefaultWriterCloseWithErrorPropagation,e.WritableStreamDefaultWriterRelease=s.WritableStreamDefaultWriterRelease,e.WritableStreamDefaultWriterWrite=s.WritableStreamDefaultWriterWrite},function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(1).assert,o=n(0),a=o.InvokeOrNoop,l=o.PromiseInvokeOrPerformFallback,h=o.PromiseInvokeOrNoop,u=o.typeIsObject,c=n(4),d=c.ReadableStream,f=c.ReadableStreamDefaultControllerClose,p=c.ReadableStreamDefaultControllerEnqueue,g=c.ReadableStreamDefaultControllerError,v=c.ReadableStreamDefaultControllerGetDesiredSize,m=n(2),_=m.WritableStream,y=m.WritableStreamDefaultControllerError;function b(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");var n=t._readableController;try{p(n,e)}catch(e){throw t._readableClosed=!0,x(t,e),t._storedError}!0==v(n)<=0&&!1===t._backpressure&&P(t,!0)}function w(t){s(!1===t._errored),s(!1===t._readableClosed);try{f(t._readableController)}catch(t){s(!1)}t._readableClosed=!0}function x(t,e){!1===t._errored&&S(t,e)}function S(t,e){s(!1===t._errored),t._errored=!0,t._storedError=e,!1===t._writableDone&&y(t._writableController,e),!1===t._readableClosed&&g(t._readableController,e)}function A(t){return s(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===t._backpressure?Promise.resolve():(s(!0===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}function P(t,e){s(t._backpressure!==e,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(e),t._backpressureChangePromise=new Promise((function(e){t._backpressureChangePromise_resolve=e})),t._backpressureChangePromise.then((function(t){s(t!==e,"_backpressureChangePromise should be fulfilled only when backpressure is changed")})),t._backpressure=e}function C(t,e){return b(e._controlledTransformStream,t),Promise.resolve()}function k(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function T(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}var E=function(){function t(e,n){r(this,t),this._transformStream=e,this._startPromise=n}return i(t,[{key:"start",value:function(t){var e=this._transformStream;return e._writableController=t,this._startPromise.then((function(){return A(e)}))}},{key:"write",value:function(t){return function(t,e){s(!1===t._errored),s(!1===t._transforming),s(!1===t._backpressure),t._transforming=!0;var n=t._transformer,i=t._transformStreamController;return l(n,"transform",[e,i],C,[e,i]).then((function(){return t._transforming=!1,A(t)}),(function(e){return x(t,e),Promise.reject(e)}))}(this._transformStream,t)}},{key:"abort",value:function(){var t=this._transformStream;t._writableDone=!0,S(t,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var t=this._transformStream;return s(!1===t._transforming),t._writableDone=!0,h(t._transformer,"flush",[t._transformStreamController]).then((function(){return!0===t._errored?Promise.reject(t._storedError):(!1===t._readableClosed&&w(t),Promise.resolve())})).catch((function(e){return x(t,e),Promise.reject(t._storedError)}))}}]),t}(),I=function(){function t(e,n){r(this,t),this._transformStream=e,this._startPromise=n}return i(t,[{key:"start",value:function(t){var e=this._transformStream;return e._readableController=t,this._startPromise.then((function(){return s(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===e._backpressure?Promise.resolve():(s(!1===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)}))}},{key:"pull",value:function(){var t=this._transformStream;return s(!0===t._backpressure,"pull() should be never called while _backpressure is false"),s(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),P(t,!1),t._backpressureChangePromise}},{key:"cancel",value:function(){var t=this._transformStream;t._readableClosed=!0,S(t,new TypeError("Readable side canceled"))}}]),t}(),R=function(){function t(e){if(r(this,t),!1===T(e))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==e._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=e}return i(t,[{key:"enqueue",value:function(t){if(!1===k(this))throw j("enqueue");b(this._controlledTransformStream,t)}},{key:"close",value:function(){if(!1===k(this))throw j("close");!function(t){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");w(t)}(this._controlledTransformStream)}},{key:"error",value:function(t){if(!1===k(this))throw j("error");!function(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");S(t,e)}(this._controlledTransformStream,t)}},{key:"desiredSize",get:function(){if(!1===k(this))throw j("desiredSize");var t=this._controlledTransformStream._readableController;return v(t)}}]),t}(),O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._transformer=e;var n=e.readableStrategy,i=e.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new R(this);var o=void 0,l=new Promise((function(t){o=t})),h=new I(this,l);this._readable=new d(h,n);var u=new E(this,l);this._writable=new _(u,i),s(void 0!==this._writableController),s(void 0!==this._readableController);var c=v(this._readableController);P(this,c<=0);var f=this,p=a(e,"start",[f._transformStreamController]);o(p),l.catch((function(t){!1===f._errored&&(f._errored=!0,f._storedError=t)}))}return i(t,[{key:"readable",get:function(){if(!1===T(this))throw M("readable");return this._readable}},{key:"writable",get:function(){if(!1===T(this))throw M("writable");return this._writable}}]),t}();function j(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function M(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.exports={TransformStream:O}},function(t,e,n){t.exports=n(5)}]))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFJS=e.globalScope=void 0;var i,r=n(10),s=n(0),o=n(58),a=n(60),l=n(14),h=(i=l)&&i.__esModule?i:{default:i},u=n(59),c=n(61),d=n(62);h.default.PDFJS||(h.default.PDFJS={});var f=h.default.PDFJS;f.version="2.0.303",f.build="55e3f97a",f.pdfBug=!1,void 0!==f.verbosity&&(0,s.setVerbosityLevel)(f.verbosity),delete f.verbosity,Object.defineProperty(f,"verbosity",{get:function(){return(0,s.getVerbosityLevel)()},set:function(t){(0,s.setVerbosityLevel)(t)},enumerable:!0,configurable:!0}),f.VERBOSITY_LEVELS=s.VERBOSITY_LEVELS,f.OPS=s.OPS,f.UNSUPPORTED_FEATURES=s.UNSUPPORTED_FEATURES,f.isValidUrl=r.isValidUrl,f.shadow=s.shadow,f.createBlob=s.createBlob,f.createObjectURL=function(t,e){return(0,s.createObjectURL)(t,e,f.disableCreateObjectURL)},Object.defineProperty(f,"isLittleEndian",{configurable:!0,get:function(){return(0,s.shadow)(f,"isLittleEndian",(0,s.isLittleEndian)())}}),f.removeNullCharacters=s.removeNullCharacters,f.PasswordResponses=s.PasswordResponses,f.PasswordException=s.PasswordException,f.UnknownErrorException=s.UnknownErrorException,f.InvalidPDFException=s.InvalidPDFException,f.MissingPDFException=s.MissingPDFException,f.UnexpectedResponseException=s.UnexpectedResponseException,f.Util=s.Util,f.PageViewport=s.PageViewport,f.createPromiseCapability=s.createPromiseCapability,f.maxImageSize=void 0===f.maxImageSize?-1:f.maxImageSize,f.cMapUrl=void 0===f.cMapUrl?null:f.cMapUrl,f.cMapPacked=void 0!==f.cMapPacked&&f.cMapPacked,f.disableFontFace=void 0!==f.disableFontFace&&f.disableFontFace,f.imageResourcesPath=void 0===f.imageResourcesPath?"":f.imageResourcesPath,f.disableWorker=void 0!==f.disableWorker&&f.disableWorker,f.workerSrc=void 0===f.workerSrc?null:f.workerSrc,f.workerPort=void 0===f.workerPort?null:f.workerPort,f.disableRange=void 0!==f.disableRange&&f.disableRange,f.disableStream=void 0!==f.disableStream&&f.disableStream,f.disableAutoFetch=void 0!==f.disableAutoFetch&&f.disableAutoFetch,f.pdfBug=void 0!==f.pdfBug&&f.pdfBug,f.postMessageTransfers=void 0===f.postMessageTransfers||f.postMessageTransfers,f.disableCreateObjectURL=void 0!==f.disableCreateObjectURL&&f.disableCreateObjectURL,f.disableWebGL=void 0===f.disableWebGL||f.disableWebGL,f.externalLinkTarget=void 0===f.externalLinkTarget?r.LinkTarget.NONE:f.externalLinkTarget,f.externalLinkRel=void 0===f.externalLinkRel?r.DEFAULT_LINK_REL:f.externalLinkRel,f.isEvalSupported=void 0===f.isEvalSupported||f.isEvalSupported,f.getDocument=o.getDocument,f.LoopbackPort=o.LoopbackPort,f.PDFDataRangeTransport=o.PDFDataRangeTransport,f.PDFWorker=o.PDFWorker,f.LinkTarget=r.LinkTarget,f.addLinkAttributes=r.addLinkAttributes,f.getFilenameFromUrl=r.getFilenameFromUrl,f.isExternalLinkTargetSet=r.isExternalLinkTargetSet,f.AnnotationLayer=a.AnnotationLayer,f.renderTextLayer=c.renderTextLayer,f.Metadata=u.Metadata,f.SVGGraphics=d.SVGGraphics,e.globalScope=h.default,e.PDFJS=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(0);function r(t){this.docId=t,this.styleElement=null,this.nativeFontFaces=[],this.loadTestFontId=0,this.loadingContext={requests:[],nextRequestId:0}}r.prototype={insertRule:function(t){var e=this.styleElement;e||((e=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(e));var n=e.sheet;n.insertRule(t,n.cssRules.length)},clear:function(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.nativeFontFaces.forEach((function(t){document.fonts.delete(t)})),this.nativeFontFaces.length=0}},Object.defineProperty(r.prototype,"loadTestFont",{get:function(){return(0,i.shadow)(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},configurable:!0}),r.prototype.addNativeFontFace=function(t){this.nativeFontFaces.push(t),document.fonts.add(t)},r.prototype.bind=function(t,e){for(var n=[],s=[],o=[],a=function(t){return t.loaded.catch((function(e){(0,i.warn)('Failed to load font "'+t.family+'": '+e)}))},l=r.isFontLoadingAPISupported&&!r.isSyncFontLoadingSupported,h=0,u=t.length;h<u;h++){var c=t[h];if(!c.attached&&!1!==c.loading)if(c.attached=!0,l){var d=c.createNativeFontFace();d&&(this.addNativeFontFace(d),o.push(a(d)))}else{var f=c.createFontFaceRule();f&&(this.insertRule(f),n.push(f),s.push(c))}}var p=this.queueLoadingCallback(e);l?Promise.all(o).then((function(){p.complete()})):n.length>0&&!r.isSyncFontLoadingSupported?this.prepareFontLoadEvent(n,s,p):p.complete()},r.prototype.queueLoadingCallback=function(t){var e=this.loadingContext,n={id:"pdfjs-font-loading-"+e.nextRequestId++,complete:function(){for((0,i.assert)(!n.end,"completeRequest() cannot be called twice"),n.end=Date.now();e.requests.length>0&&e.requests[0].end;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t,started:Date.now()};return e.requests.push(n),n},r.prototype.prepareFontLoadEvent=function(t,e,n){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,n,i){return t.substr(0,e)+i+t.substr(e+n)}var o,a,l=document.createElement("canvas");l.width=1,l.height=1;var h=l.getContext("2d"),u=0,c="lt"+Date.now()+this.loadTestFontId++,d=this.loadTestFont,f=r(d=s(d,976,c.length,c),16);for(o=0,a=c.length-3;o<a;o+=4)f=f-1482184792+r(c,o)|0;o<c.length&&(f=f-1482184792+r(c+"XXX",o)|0),d=s(d,16,4,(0,i.string32)(f));var p='@font-face { font-family:"'+c+'";src:url(data:font/opentype;base64,'+btoa(d)+");}";this.insertRule(p);var g=[];for(o=0,a=e.length;o<a;o++)g.push(e[o].loadedName);g.push(c);var v=document.createElement("div");for(v.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),o=0,a=g.length;o<a;++o){var m=document.createElement("span");m.textContent="Hi",m.style.fontFamily=g[o],v.appendChild(m)}document.body.appendChild(v),function t(e,n){if(++u>30)return(0,i.warn)("Load test font never loaded."),void n();h.font="30px "+e,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,(function(){document.body.removeChild(v),n.complete()}))},r.isFontLoadingAPISupported="undefined"!=typeof document&&!!document.fonts,Object.defineProperty(r,"isSyncFontLoadingSupported",{get:function(){return(0,i.shadow)(r,"isSyncFontLoadingSupported",function(){if("undefined"==typeof navigator)return!0;var t=!1,e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);return e&&e[1]>=14&&(t=!0),t}())},enumerable:!0,configurable:!0});var s={get value(){return(0,i.shadow)(this,"value",(0,i.isEvalSupported)())}},o=function(){function t(t,e){for(var n in this.compiledGlyphs=Object.create(null),t)this[n]=t[n];this.options=e}return t.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var t=new FontFace(this.loadedName,this.data,{});return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this),t},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var t=(0,i.bytesToString)(new Uint8Array(this.data)),e=this.loadedName,n="url(data:"+this.mimetype+";base64,"+btoa(t)+");",r='@font-face { font-family:"'+e+'";src:'+n+"}";return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,n),r},getPathGenerator:function(t,e){if(!(e in this.compiledGlyphs)){var n,i,r,o=t.get(this.loadedName+"_path_"+e);if(this.options.isEvalSupported&&s.value){var a,l="";for(i=0,r=o.length;i<r;i++)a=void 0!==(n=o[i]).args?n.args.join(","):"",l+="c."+n.cmd+"("+a+");\n";this.compiledGlyphs[e]=new Function("c","size",l)}else this.compiledGlyphs[e]=function(t,e){for(i=0,r=o.length;i<r;i++)"scale"===(n=o[i]).cmd&&(n.args=[e,-e]),t[n.cmd].apply(t,n.args)}}return this.compiledGlyphs[e]}},t}();e.FontFaceObject=o,e.FontLoader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(0),r=n(118),s={get value(){return(0,i.shadow)(s,"value",(0,i.isLittleEndian)())}};function o(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=e*r-n*i,l=n*i-e*r;return[r/a,n/l,i/l,e/a,(r*s-i*o)/l,(n*s-e*o)/a]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var n=this._transformMatrix;n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this._originalTranslate(t,e)},t.scale=function(t,e){var n=this._transformMatrix;n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*e,n[3]=n[3]*e,this._originalScale(t,e)},t.transform=function(e,n,i,r,s,o){var a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*n,a[1]*e+a[3]*n,a[0]*i+a[2]*r,a[1]*i+a[3]*r,a[0]*s+a[2]*o+a[4],a[1]*s+a[3]*o+a[5]],t._originalTransform(e,n,i,r,s,o)},t.setTransform=function(e,n,i,r,s,o){this._transformMatrix=[e,n,i,r,s,o],t._originalSetTransform(e,n,i,r,s,o)},t.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this._transformMatrix;this._transformMatrix=[i[0]*e+i[2]*n,i[1]*e+i[3]*n,i[0]*-n+i[2]*e,i[1]*-n+i[3]*e,i[4],i[5]],this._originalRotate(t)})}var a=function(){function t(t){this.canvasFactory=t,this.cache=Object.create(null)}return t.prototype={getCanvas:function(t,e,n,i){var r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,n),r.context.setTransform(1,0,0,1,0,0)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),i&&o(r.context),r},clear:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}},t}(),l=function(){function t(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}(),h=function(){function t(t,e,n,i,r,s){this.ctx=t,this.current=new l,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.webGLContext=r,this.imageLayer=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new a(this.canvasFactory),t&&o(t),this.cachedGetSinglePixelWidth=null}function e(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var n,r,o,a,l,h=e.height,u=e.width,c=h%16,d=(h-c)/16,f=0===c?d:d+1,p=t.createImageData(u,16),g=0,v=e.data,m=p.data;if(e.kind===i.ImageKind.GRAYSCALE_1BPP){var _=v.byteLength,y=new Uint32Array(m.buffer,0,m.byteLength>>2),b=y.length,w=u+7>>3,x=4294967295,S=s.value?4278190080:255;for(r=0;r<f;r++){for(a=r<d?16:c,n=0,o=0;o<a;o++){for(var A=_-g,P=0,C=A>w?u:8*A-7,k=-8&C,T=0,E=0;P<k;P+=8)E=v[g++],y[n++]=128&E?x:S,y[n++]=64&E?x:S,y[n++]=32&E?x:S,y[n++]=16&E?x:S,y[n++]=8&E?x:S,y[n++]=4&E?x:S,y[n++]=2&E?x:S,y[n++]=1&E?x:S;for(;P<C;P++)0===T&&(E=v[g++],T=128),y[n++]=E&T?x:S,T>>=1}for(;n<b;)y[n++]=0;t.putImageData(p,0,16*r)}}else if(e.kind===i.ImageKind.RGBA_32BPP){for(o=0,l=16*u*4,r=0;r<d;r++)m.set(v.subarray(g,g+l)),g+=l,t.putImageData(p,0,o),o+=16;r<f&&(l=u*c*4,m.set(v.subarray(g,g+l)),t.putImageData(p,0,o))}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error("bad image kind: "+e.kind);for(l=u*(a=16),r=0;r<f;r++){for(r>=d&&(l=u*(a=c)),n=0,o=l;o--;)m[n++]=v[g++],m[n++]=v[g++],m[n++]=v[g++],m[n++]=255;t.putImageData(p,0,16*r)}}}}function n(t,e){for(var n=e.height,i=e.width,r=n%16,s=(n-r)/16,o=0===r?s:s+1,a=t.createImageData(i,16),l=0,h=e.data,u=a.data,c=0;c<o;c++){for(var d=c<s?16:r,f=3,p=0;p<d;p++)for(var g=0,v=0;v<i;v++){if(!g){var m=h[l++];g=128}u[f]=m&g?0:255,f+=4,g>>=1}t.putImageData(a,0,16*c)}}function h(t,e){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,r=n.length;i<r;i++){var s=n[i];void 0!==t[s]&&(e[s]=t[s])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function u(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function c(t,e,n,i){for(var r=t.length,s=3;s<r;s+=4){var o=t[s];if(0===o)t[s-3]=e,t[s-2]=n,t[s-1]=i;else if(o<255){var a=255-o;t[s-3]=t[s-3]*o+e*a>>8,t[s-2]=t[s-2]*o+n*a>>8,t[s-1]=t[s-1]*o+i*a>>8}}}function d(t,e,n){for(var i=t.length,r=3;r<i;r+=4){var s=n?n[t[r]]:t[r];e[r]=e[r]*s*(1/255)|0}}function f(t,e,n){for(var i=t.length,r=3;r<i;r+=4){var s=77*t[r-3]+152*t[r-2]+28*t[r-1];e[r]=n?e[r]*n[s>>8]>>8:e[r]*s>>16}}function p(t,e,n,i){var r=e.canvas,s=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var o=e.backdrop||null;if(!e.transferMap&&i.isEnabled){var a=i.composeSMask({layer:n.canvas,mask:r,properties:{subtype:e.subtype,backdrop:o}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(a,e.offsetX,e.offsetY)}!function(t,e,n,i,r,s,o){var a,l=!!s,h=l?s[0]:0,u=l?s[1]:0,p=l?s[2]:0;a="Luminosity"===r?f:d;for(var g=Math.min(i,Math.ceil(1048576/n)),v=0;v<i;v+=g){var m=Math.min(g,i-v),_=t.getImageData(0,v,n,m),y=e.getImageData(0,v,n,m);l&&c(_.data,h,u,p),a(_.data,y.data,o),t.putImageData(y,0,v)}}(s,n,r.width,r.height,e.subtype,o,e.transferMap),t.drawImage(r,0,0)}var g=["butt","round","square"],v=["miter","round","bevel"],m={},_={};for(var y in t.prototype={beginDrawing:function(t){var e=t.transform,n=t.viewport,i=t.transparency,r=t.background,s=void 0===r?null:r,o=this.ctx.canvas.width,a=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=s||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,o,a),this.ctx.restore(),i){var l=this.cachedCanvases.getCanvas("transparent",o,a,!0);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),u(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,n.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(t,e,n,r){var s=t.argsArray,o=t.fnArray,a=e||0,l=s.length;if(l===a)return a;for(var h,u=l-a>10&&"function"==typeof n,c=u?Date.now()+15:0,d=0,f=this.commonObjs,p=this.objs;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if((h=o[a])!==i.OPS.dependency)this[h].apply(this,s[a]);else for(var g=s[a],v=0,m=g.length;v<m;v++){var _=g[v],y="g"===_[0]&&"_"===_[1]?f:p;if(!y.isResolved(_))return y.get(_,n),a}if(++a===l)return a;if(u&&++d>10){if(Date.now()>c)return n(),a;d=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function(t){this.ctx.lineCap=g[t]},setLineJoin:function(t){this.ctx.lineJoin=v[t]},setMiterLimit:function(t){this.ctx.miterLimit=t},setDash:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},setRenderingIntent:function(t){},setFlatness:function(t){},setGState:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e],r=i[0],s=i[1];switch(r){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1],this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=s?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var t=this.current.activeSMask,e=t.canvas.width,n=t.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n,!0),s=this.ctx,o=s.mozCurrentTransform;this.ctx.save();var a=r.context;a.scale(1/t.scaleX,1/t.scaleY),a.translate(-t.offsetX,-t.offsetY),a.transform.apply(a,o),t.startTransformInverse=a.mozCurrentTransformInverse,h(s,a),this.ctx=a,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++},suspendSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),h(t,this.ctx),this.current.resumeSMaskCtx=t;var e=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function(){var t=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=t,this.groupStack.push(e),this.groupLevel++},endSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),h(t,this.ctx);var e=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this.cachedGetSinglePixelWidth=null)},transform:function(t,e,n,i,r,s){this.ctx.transform(t,e,n,i,r,s),this.cachedGetSinglePixelWidth=null},constructPath:function(t,e){for(var n=this.ctx,r=this.current,s=r.x,o=r.y,a=0,l=0,h=t.length;a<h;a++)switch(0|t[a]){case i.OPS.rectangle:s=e[l++],o=e[l++];var u=e[l++],c=e[l++];0===u&&(u=this.getSinglePixelWidth()),0===c&&(c=this.getSinglePixelWidth());var d=s+u,f=o+c;this.ctx.moveTo(s,o),this.ctx.lineTo(d,o),this.ctx.lineTo(d,f),this.ctx.lineTo(s,f),this.ctx.lineTo(s,o),this.ctx.closePath();break;case i.OPS.moveTo:s=e[l++],o=e[l++],n.moveTo(s,o);break;case i.OPS.lineTo:s=e[l++],o=e[l++],n.lineTo(s,o);break;case i.OPS.curveTo:s=e[l+4],o=e[l+5],n.bezierCurveTo(e[l],e[l+1],e[l+2],e[l+3],s,o),l+=6;break;case i.OPS.curveTo2:n.bezierCurveTo(s,o,e[l],e[l+1],e[l+2],e[l+3]),s=e[l+2],o=e[l+3],l+=4;break;case i.OPS.curveTo3:s=e[l+2],o=e[l+3],n.bezierCurveTo(e[l],e[l+1],s,o,s,o),l+=4;break;case i.OPS.closePath:n.closePath()}r.setCurrentPoint(s,o)},closePath:function(){this.ctx.closePath()},stroke:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.strokeColor;e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),e.globalAlpha=this.current.strokeAlpha,n&&n.hasOwnProperty("type")&&"Pattern"===n.type?(e.save(),e.strokeStyle=n.getPattern(e,this),e.stroke(),e.restore()):e.stroke(),t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.fillColor,i=!1;this.current.patternFill&&(e.save(),this.baseTransform&&e.setTransform.apply(e,this.baseTransform),e.fillStyle=n.getPattern(e,this),i=!0),this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill(),i&&e.restore(),t&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=m},eoClip:function(){this.pendingClip=_},beginText:function(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(var n=0;n<t.length;n++){var i=t[n];e.setTransform.apply(e,i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()},setCharSpacing:function(t){this.current.charSpacing=t},setWordSpacing:function(t){this.current.wordSpacing=t},setHScale:function(t){this.current.textHScale=t/100},setLeading:function(t){this.current.leading=-t},setFont:function(t,e){var n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error("Can't find font for "+t);if(r.fontMatrix=n.fontMatrix?n.fontMatrix:i.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,!n.isType3Font){var s=n.loadedName||"sans-serif",o=n.black?"900":n.bold?"bold":"normal",a=n.italic?"italic":"normal",l='"'+s+'", '+n.fallbackName,h=e<16?16:e>100?100:e;this.current.fontSizeScale=e/h;var u=a+" "+o+" "+h+"px "+l;this.ctx.font=u}},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setTextRise:function(t){this.current.textRise=t},moveText:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},setTextMatrix:function(t,e,n,i,r,s){this.current.textMatrix=[t,e,n,i,r,s],this.current.textMatrixScale=Math.sqrt(t*t+e*e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(t,e,n,r){var s,o=this.ctx,a=this.current,l=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,c=h&i.TextRenderingMode.FILL_STROKE_MASK,d=!!(h&i.TextRenderingMode.ADD_TO_PATH_FLAG),f=a.patternFill&&l.data;(l.disableFontFace||d||f)&&(s=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f?(o.save(),o.translate(e,n),o.beginPath(),s(o,u),r&&o.setTransform.apply(o,r),c!==i.TextRenderingMode.FILL&&c!==i.TextRenderingMode.FILL_STROKE||o.fill(),c!==i.TextRenderingMode.STROKE&&c!==i.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(c!==i.TextRenderingMode.FILL&&c!==i.TextRenderingMode.FILL_STROKE||o.fillText(t,e,n),c!==i.TextRenderingMode.STROKE&&c!==i.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:n,fontSize:u,addToPath:s})},get isFontSubpixelAAEnabled(){var t=this.canvasFactory.create(10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var r=e.fontSize;if(0!==r){var s=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,c=t.length,d=n.vertical,f=d?1:-1,p=n.defaultVMetrics,g=r*e.fontMatrix[0],v=e.textRenderingMode===i.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;s.save();var m=void 0;if(e.patternFill){s.save();var _=e.fillColor.getPattern(s,this);m=s.mozCurrentTransform,s.restore(),s.fillStyle=_}s.transform.apply(s,e.textMatrix),s.translate(e.x,e.y+e.textRise),h>0?s.scale(u,-1):s.scale(u,1);var y=e.lineWidth,b=e.textMatrixScale;if(0===b||0===y){var w=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;w!==i.TextRenderingMode.STROKE&&w!==i.TextRenderingMode.FILL_STROKE||(this.cachedGetSinglePixelWidth=null,y=.65*this.getSinglePixelWidth())}else y/=b;1!==o&&(s.scale(o,o),y/=o),s.lineWidth=y;var x,S=0;for(x=0;x<c;++x){var A=t[x];if((0,i.isNum)(A))S+=f*A*r/1e3;else{var P,C,k,T,E,I,R,O=!1,j=(A.isSpace?l:0)+a,M=A.fontChar,L=A.accent,D=A.width;if(d?(E=A.vmetric||p,I=-(I=A.vmetric?E[1]:.5*D)*g,R=E[2]*g,D=E?-E[0]:D,P=I/o,C=(S+R)/o):(P=S/o,C=0),n.remeasure&&D>0){var N=1e3*s.measureText(M).width/r*o;if(D<N&&this.isFontSubpixelAAEnabled){var F=D/N;O=!0,s.save(),s.scale(F,1),P/=F}else D!==N&&(P+=(D-N)/2e3*r/o)}(A.isInFont||n.missingFile)&&(v&&!L?s.fillText(M,P,C):(this.paintChar(M,P,C,m),L&&(k=P+L.offset.x/o,T=C-L.offset.y/o,this.paintChar(L.fontChar,k,T,m)))),S+=D*g+j*h,O&&s.restore()}}d?e.y-=S*u:e.x+=S*u,s.restore()}},showType3Text:function(t){var e,n,r,s,o=this.ctx,a=this.current,l=a.font,h=a.fontSize,u=a.fontDirection,c=l.vertical?1:-1,d=a.charSpacing,f=a.wordSpacing,p=a.textHScale*u,g=a.fontMatrix||i.FONT_IDENTITY_MATRIX,v=t.length;if(a.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==h){for(this.cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,a.textMatrix),o.translate(a.x,a.y),o.scale(p,u),e=0;e<v;++e)if(n=t[e],(0,i.isNum)(n))s=c*n*h/1e3,this.ctx.translate(s,0),a.x+=s*p;else{var m=(n.isSpace?f:0)+d,_=l.charProcOperatorList[n.operatorListId];_?(this.processingType3=n,this.save(),o.scale(h,h),o.transform.apply(o,g),this.executeOperatorList(_),this.restore(),r=i.Util.applyTransform([n.width,0],g)[0]*h+m,o.translate(r,0),a.x+=r*p):(0,i.warn)('Type3 character "'+n.operatorListId+'" is not available.')}o.restore(),this.processingType3=null}},setCharWidth:function(t,e){},setCharWidthAndBounds:function(t,e,n,i,r,s){this.ctx.rect(n,i,r-n,s-i),this.clip(),this.endPath()},getColorN_Pattern:function(e){var n,i=this;if("TilingPattern"===e[0]){var s=e[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),a={createCanvasGraphics:function(e){return new t(e,i.commonObjs,i.objs,i.canvasFactory,i.webGLContext)}};n=new r.TilingPattern(e,s,this.ctx,a,o)}else n=(0,r.getShadingPatternFromIR)(e);return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.ctx.strokeStyle=r,this.current.strokeColor=r},setFillRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1},shadingFill:function(t){var e=this.ctx;this.save();var n=(0,r.getShadingPatternFromIR)(t);e.fillStyle=n.getPattern(e,this,!0);var s=e.mozCurrentTransformInverse;if(s){var o=e.canvas,a=o.width,l=o.height,h=i.Util.applyTransform([0,0],s),u=i.Util.applyTransform([0,l],s),c=i.Util.applyTransform([a,0],s),d=i.Util.applyTransform([a,l],s),f=Math.min(h[0],u[0],c[0],d[0]),p=Math.min(h[1],u[1],c[1],d[1]),g=Math.max(h[0],u[0],c[0],d[0]),v=Math.max(h[1],u[1],c[1],d[1]);this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,i.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,i.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(t,e){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,Array.isArray(e)&&4===e.length){var n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(t){this.save();var e=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups."),t.knockout&&(0,i.warn)("Knockout groups not supported.");var n=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var r=i.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform),s=[0,0,e.canvas.width,e.canvas.height];r=i.Util.intersect(r,s)||[0,0,0,0];var o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-a,1),c=1,d=1;l>4096&&(c=l/4096,l=4096),u>4096&&(d=u/4096,u=4096);var f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);var p=this.cachedCanvases.getCanvas(f,l,u,!0),g=p.context;g.scale(1/c,1/d),g.translate(-o,-a),g.transform.apply(g,n),t.smask?this.smaskStack.push({canvas:p.canvas,context:g,offsetX:o,offsetY:a,scaleX:c,scaleY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.scale(c,d)),h(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null},endGroup:function(t){this.groupLevel--;var e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(t,e,n){if(this.save(),u(this.ctx),this.current=new l,Array.isArray(t)&&4===t.length){var i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.clip(),this.endPath()}this.transform.apply(this,e),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintJpegXObject:function(t,e,n){var r=this.objs.get(t);if(r){this.save();var s=this.ctx;if(s.scale(1/e,-1/n),s.drawImage(r,0,0,r.width,r.height,0,-n,e,n),this.imageLayer){var o=s.mozCurrentTransformInverse,a=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:t,left:a[0],top:a[1],width:e/o[0],height:n/o[3]})}this.restore()}else(0,i.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(t){var e=this.ctx,i=t.width,r=t.height,s=this.current.fillColor,o=this.current.patternFill,a=this.processingType3;if(a&&void 0===a.compiled&&(a.compiled=i<=1e3&&r<=1e3?function(t){var e,n,i,r,s=t.width,o=t.height,a=s+1,l=new Uint8Array(a*(o+1)),h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=s+7&-8,c=t.data,d=new Uint8Array(u*o),f=0;for(e=0,r=c.length;e<r;e++)for(var p=128,g=c[e];p>0;)d[f++]=g&p?0:255,p>>=1;var v=0;for(0!==d[f=0]&&(l[0]=1,++v),n=1;n<s;n++)d[f]!==d[f+1]&&(l[n]=d[f]?2:1,++v),f++;for(0!==d[f]&&(l[n]=2,++v),e=1;e<o;e++){i=e*a,d[(f=e*u)-u]!==d[f]&&(l[i]=d[f]?1:8,++v);var m=(d[f]?4:0)+(d[f-u]?8:0);for(n=1;n<s;n++)h[m=(m>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0)]&&(l[i+n]=h[m],++v),f++;if(d[f-u]!==d[f]&&(l[i+n]=d[f]?2:4,++v),v>1e3)return null}for(i=e*a,0!==d[f=u*(o-1)]&&(l[i]=8,++v),n=1;n<s;n++)d[f]!==d[f+1]&&(l[i+n]=d[f]?4:8,++v),f++;if(0!==d[f]&&(l[i+n]=4,++v),v>1e3)return null;var _=new Int32Array([0,a,-1,0,-a,0,0,0,1]),y=[];for(e=0;v&&e<=o;e++){for(var b=e*a,w=b+s;b<w&&!l[b];)b++;if(b!==w){var x,S=[b%a,e],A=l[b],P=b;do{var C=_[A];do{b+=C}while(!l[b]);5!==(x=l[b])&&10!==x?(A=x,l[b]=0):(A=x&51*A>>4,l[b]&=A>>2|A<<2),S.push(b%a),S.push(b/a|0),--v}while(P!==b);y.push(S),--e}}return function(t){t.save(),t.scale(1/s,-1/o),t.translate(0,-o),t.beginPath();for(var e=0,n=y.length;e<n;e++){var i=y[e];t.moveTo(i[0],i[1]);for(var r=2,a=i.length;r<a;r+=2)t.lineTo(i[r],i[r+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:i,height:r}):null),a&&a.compiled)a.compiled(e);else{var l=this.cachedCanvases.getCanvas("maskCanvas",i,r),h=l.context;h.save(),n(h,t),h.globalCompositeOperation="source-in",h.fillStyle=o?s.getPattern(h,this):s,h.fillRect(0,0,i,r),h.restore(),this.paintInlineImageXObject(l.canvas)}},paintImageMaskXObjectRepeat:function(t,e,i,r){var s=t.width,o=t.height,a=this.current.fillColor,l=this.current.patternFill,h=this.cachedCanvases.getCanvas("maskCanvas",s,o),u=h.context;u.save(),n(u,t),u.globalCompositeOperation="source-in",u.fillStyle=l?a.getPattern(u,this):a,u.fillRect(0,0,s,o),u.restore();for(var c=this.ctx,d=0,f=r.length;d<f;d+=2)c.save(),c.transform(e,0,0,i,r[d],r[d+1]),c.scale(1,-1),c.drawImage(h.canvas,0,0,s,o,0,-1,1,1),c.restore()},paintImageMaskXObjectGroup:function(t){for(var e=this.ctx,i=this.current.fillColor,r=this.current.patternFill,s=0,o=t.length;s<o;s++){var a=t[s],l=a.width,h=a.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,h),c=u.context;c.save(),n(c,a),c.globalCompositeOperation="source-in",c.fillStyle=r?i.getPattern(c,this):i,c.fillRect(0,0,l,h),c.restore(),e.save(),e.transform.apply(e,a.transform),e.scale(1,-1),e.drawImage(u.canvas,0,0,l,h,0,-1,1,1),e.restore()}},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(t,e,n,r){var s=this.objs.get(t);if(s){for(var o=s.width,a=s.height,l=[],h=0,u=r.length;h<u;h+=2)l.push({transform:[e,0,0,n,r[h],r[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}else(0,i.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t){var n=t.width,i=t.height,r=this.ctx;this.save(),r.scale(1/n,-1/i);var s,o,a=r.mozCurrentTransformInverse,l=a[0],h=a[1],u=Math.max(Math.sqrt(l*l+h*h),1),c=a[2],d=a[3],f=Math.max(Math.sqrt(c*c+d*d),1);if(t instanceof HTMLElement||!t.data)s=t;else{var p=(o=this.cachedCanvases.getCanvas("inlineImage",n,i)).context;e(p,t),s=o.canvas}for(var g=n,v=i,m="prescale1";u>2&&g>1||f>2&&v>1;){var _=g,y=v;u>2&&g>1&&(u/=g/(_=Math.ceil(g/2))),f>2&&v>1&&(f/=v/(y=Math.ceil(v/2))),(p=(o=this.cachedCanvases.getCanvas(m,_,y)).context).clearRect(0,0,_,y),p.drawImage(s,0,0,g,v,0,0,_,y),s=o.canvas,g=_,v=y,m="prescale1"===m?"prescale2":"prescale1"}if(r.drawImage(s,0,0,g,v,0,-i,n,i),this.imageLayer){var b=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:b[0],top:b[1],width:n/a[0],height:i/a[3]})}this.restore()},paintInlineImageXObjectGroup:function(t,n){var i=this.ctx,r=t.width,s=t.height,o=this.cachedCanvases.getCanvas("inlineImage",r,s);e(o.context,t);for(var a=0,l=n.length;a<l;a++){var h=n[a];if(i.save(),i.transform.apply(i,h.transform),i.scale(1,-1),i.drawImage(o.canvas,h.x,h.y,h.w,h.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(h.x,h.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:r,height:s})}i.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,i.warn)("Unsupported 'paintXObject' command.")},markPoint:function(t){},markPointProps:function(t,e){},beginMarkedContent:function(t){},beginMarkedContentProps:function(t,e){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var t=this.ctx;this.pendingClip&&(this.pendingClip===_?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth:function(t){if(null===this.cachedGetSinglePixelWidth){this.ctx.save();var e=this.ctx.mozCurrentTransformInverse;this.ctx.restore(),this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1],e[2]*e[2]+e[3]*e[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function(t,e){var n=this.ctx.mozCurrentTransform;return[n[0]*t+n[2]*e+n[4],n[1]*t+n[3]*e+n[5]]}},i.OPS)t.prototype[i.OPS[y]]=t.prototype[y];return t}();e.CanvasGraphics=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.getShadingPatternFromIR=void 0;var i=n(0),r={RadialAxial:{fromIR:function(t){var e=t[1],n=t[2],i=t[3],r=t[4],s=t[5],o=t[6];return{type:"Pattern",getPattern:function(t){var a;"axial"===e?a=t.createLinearGradient(i[0],i[1],r[0],r[1]):"radial"===e&&(a=t.createRadialGradient(i[0],i[1],s,r[0],r[1],o));for(var l=0,h=n.length;l<h;++l){var u=n[l];a.addColorStop(u[0],u[1])}return a}}}}},s=function(){function t(t,e,n,i,r,s,o,a){var l,h=e.coords,u=e.colors,c=t.data,d=4*t.width;h[n+1]>h[i+1]&&(l=n,n=i,i=l,l=s,s=o,o=l),h[i+1]>h[r+1]&&(l=i,i=r,r=l,l=o,o=a,a=l),h[n+1]>h[i+1]&&(l=n,n=i,i=l,l=s,s=o,o=l);var f=(h[n]+e.offsetX)*e.scaleX,p=(h[n+1]+e.offsetY)*e.scaleY,g=(h[i]+e.offsetX)*e.scaleX,v=(h[i+1]+e.offsetY)*e.scaleY,m=(h[r]+e.offsetX)*e.scaleX,_=(h[r+1]+e.offsetY)*e.scaleY;if(!(p>=_))for(var y,b,w,x,S,A,P,C,k,T=u[s],E=u[s+1],I=u[s+2],R=u[o],O=u[o+1],j=u[o+2],M=u[a],L=u[a+1],D=u[a+2],N=Math.round(p),F=Math.round(_),z=N;z<=F;z++){z<v?(y=f-(f-g)*(k=z<p?0:p===v?1:(p-z)/(p-v)),b=T-(T-R)*k,w=E-(E-O)*k,x=I-(I-j)*k):(y=g-(g-m)*(k=z>_?1:v===_?0:(v-z)/(v-_)),b=R-(R-M)*k,w=O-(O-L)*k,x=j-(j-D)*k),S=f-(f-m)*(k=z<p?0:z>_?1:(p-z)/(p-_)),A=T-(T-M)*k,P=E-(E-L)*k,C=I-(I-D)*k;for(var q=Math.round(Math.min(y,S)),B=Math.round(Math.max(y,S)),U=d*z+4*q,W=q;W<=B;W++)k=(k=(y-W)/(y-S))<0?0:k>1?1:k,c[U++]=b-(b-A)*k|0,c[U++]=w-(w-P)*k|0,c[U++]=x-(x-C)*k|0,c[U++]=255}}function e(e,n,i){var r,s,o=n.coords,a=n.colors;switch(n.type){case"lattice":var l=n.verticesPerRow,h=Math.floor(o.length/l)-1,u=l-1;for(r=0;r<h;r++)for(var c=r*l,d=0;d<u;d++,c++)t(e,i,o[c],o[c+1],o[c+l],a[c],a[c+1],a[c+l]),t(e,i,o[c+l+1],o[c+1],o[c+l],a[c+l+1],a[c+1],a[c+l]);break;case"triangles":for(r=0,s=o.length;r<s;r+=3)t(e,i,o[r],o[r+1],o[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}return function(t,n,i,r,s,o,a,l){var h,u,c,d,f=Math.floor(t[0]),p=Math.floor(t[1]),g=Math.ceil(t[2])-f,v=Math.ceil(t[3])-p,m=Math.min(Math.ceil(Math.abs(g*n[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(v*n[1]*1.1)),3e3),y=g/m,b=v/_,w={coords:i,colors:r,offsetX:-f,offsetY:-p,scaleX:1/y,scaleY:1/b},x=m+4,S=_+4;if(l.isEnabled)h=l.drawFigures({width:m,height:_,backgroundColor:o,figures:s,context:w}),(u=a.getCanvas("mesh",x,S,!1)).context.drawImage(h,2,2),h=u.canvas;else{var A=(u=a.getCanvas("mesh",x,S,!1)).context,P=A.createImageData(m,_);if(o){var C=P.data;for(c=0,d=C.length;c<d;c+=4)C[c]=o[0],C[c+1]=o[1],C[c+2]=o[2],C[c+3]=255}for(c=0;c<s.length;c++)e(P,s[c],w);A.putImageData(P,2,2),h=u.canvas}return{canvas:h,offsetX:f-2*y,offsetY:p-2*b,scaleX:y,scaleY:b}}}();r.Mesh={fromIR:function(t){var e=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[8];return{type:"Pattern",getPattern:function(t,h,u){var c;if(u)c=i.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(c=i.Util.singularValueDecompose2dScale(h.baseTransform),a){var d=i.Util.singularValueDecompose2dScale(a);c=[c[0]*d[0],c[1]*d[1]]}var f=s(o,c,e,n,r,u?null:l,h.cachedCanvases,h.webGLContext);return u||(t.setTransform.apply(t,h.baseTransform),a&&t.transform.apply(t,a)),t.translate(f.offsetX,f.offsetY),t.scale(f.scaleX,f.scaleY),t.createPattern(f.canvas,"no-repeat")}}}},r.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var o=function(){var t=1,e=2;function n(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=i,this.baseTransform=r,this.type="Pattern",this.ctx=n}return n.prototype={createPatternCanvas:function(t){var e=this.operatorList,n=this.bbox,r=this.xstep,s=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,h=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+a);var u=n[0],c=n[1],d=n[2],f=n[3],p=[u,c],g=[u+r,c+s],v=g[0]-p[0],m=g[1]-p[1],_=i.Util.singularValueDecompose2dScale(this.matrix),y=i.Util.singularValueDecompose2dScale(this.baseTransform),b=[_[0]*y[0],_[1]*y[1]];v=Math.min(Math.ceil(Math.abs(v*b[0])),3e3),m=Math.min(Math.ceil(Math.abs(m*b[1])),3e3);var w=t.cachedCanvases.getCanvas("pattern",v,m,!0),x=w.context,S=h.createCanvasGraphics(x);S.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(S,o,l),this.setScale(v,m,r,s),this.transformToScale(S);var A=[1,0,0,1,-p[0],-p[1]];return S.transform.apply(S,A),this.clipBbox(S,n,u,c,d,f),S.executeOperatorList(e),w.canvas},setScale:function(t,e,n,i){this.scale=[t/n,e/i]},transformToScale:function(t){var e=this.scale,n=[e[0],0,0,e[1],0,0];t.transform.apply(t,n)},scaleToContext:function(){var t=this.scale;this.ctx.scale(1/t[0],1/t[1])},clipBbox:function(t,e,n,i,r,s){if(Array.isArray(e)&&4===e.length){var o=r-n,a=s-i;t.ctx.rect(n,i,o,a),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function(n,r,s){var o=n.ctx,a=n.current;switch(r){case t:var l=this.ctx;o.fillStyle=l.fillStyle,o.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case e:var h=i.Util.makeCssRgb(s[0],s[1],s[2]);o.fillStyle=h,o.strokeStyle=h,a.fillColor=h,a.strokeColor=h;break;default:throw new i.FormatError("Unsupported paint type: "+r)}},getPattern:function(t,e){var n=this.createPatternCanvas(e);return(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix),this.scaleToContext(),t.createPattern(n,"repeat")}},n}();e.getShadingPatternFromIR=function(t){var e=r[t[0]];if(!e)throw new Error("Unknown IR type: "+t[0]);return e.fromIR(t)},e.TilingPattern=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(0),r=function(){function t(t,e){var n=this;(0,i.assert)(e),this._queuedChunks=[];var r=t.initialData;if(r&&r.length>0){var s=new Uint8Array(r).buffer;this._queuedChunks.push(s)}this._pdfDataRangeTransport=e,this._isRangeSupported=!t.disableRange,this._isStreamingSupported=!t.disableStream,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(t,e){n._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener((function(t){n._onProgress({loaded:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(t){n._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.transportReady()}function e(t,e){this._stream=t,this._done=!1,this._filename=null,this._queuedChunks=e||[],this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}function n(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return t.prototype={_onReceiveData:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var n=this._rangeReaders.some((function(n){return n._begin===t.begin&&(n._enqueue(e),!0)}));(0,i.assert)(n)}},_onProgress:function(t){if(this._rangeReaders.length>0){var e=this._rangeReaders[0];e.onProgress&&e.onProgress({loaded:t.loaded})}},_removeRangeReader:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)},getFullReader:function(){(0,i.assert)(!this._fullRequestReader);var t=this._queuedChunks;return this._queuedChunks=null,new e(this,t)},getRangeReader:function(t,e){var i=new n(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach((function(e){e.cancel(t)})),this._pdfDataRangeTransport.abort()}},e.prototype={_enqueue:function(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t))},get headersReady(){return this._headersReady},get filename(){return this._filename},get isRangeSupported(){return this._stream._isRangeSupported},get isStreamingSupported(){return this._stream._isStreamingSupported},get contentLength(){return this._stream._contentLength},read:function(){if(this._queuedChunks.length>0){var t=this._queuedChunks.shift();return Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,i.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}},n.prototype={_enqueue:function(t){this._done||(0===this._requests.length?this._queuedChunk=t:(this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))},get isStreamingSupported(){return!1},read:function(){if(this._queuedChunk){var t=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,i.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},t}();e.PDFDataTransportStream=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=function(){function t(e){var n=e.enable,i=void 0!==n&&n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._enabled=!0===i}return i(t,[{key:"composeSMask",value:function(t){var e=t.layer,n=t.mask,i=t.properties;return o.composeSMask(e,n,i)}},{key:"drawFigures",value:function(t){var e=t.width,n=t.height,i=t.backgroundColor,r=t.figures,s=t.context;return o.drawFigures(e,n,i,r,s)}},{key:"clear",value:function(){o.cleanup()}},{key:"isEnabled",get:function(){var t=this._enabled;return t&&(t=o.tryInitGL()),(0,r.shadow)(this,"isEnabled",t)}}]),t}(),o=function(){function t(t,e,n){var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(i);throw new Error("Error during shader compilation: "+r)}return i}function e(e,n){return t(e,n,e.VERTEX_SHADER)}function n(e,n){return t(e,n,e.FRAGMENT_SHADER)}function i(t,e){for(var n=t.createProgram(),i=0,r=e.length;i<r;++i)t.attachShader(n,e[i]);if(t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var s=t.getProgramInfoLog(n);throw new Error("Error during program linking: "+s)}return n}function r(t,e,n){t.activeTexture(n);var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),i}var s,o;function a(){s||(o=document.createElement("canvas"),s=o.getContext("webgl",{premultipliedalpha:!1}))}var l=null,h=null;return{tryInitGL:function(){try{return a(),!!s}catch(t){}return!1},composeSMask:function(t,h,u){var c=t.width,d=t.height;l||function(){var t,r;a(),t=o,o=null,r=s,s=null;var h=i(r,[e(r,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),n(r,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);r.useProgram(h);var u={};u.gl=r,u.canvas=t,u.resolutionLocation=r.getUniformLocation(h,"u_resolution"),u.positionLocation=r.getAttribLocation(h,"a_position"),u.backdropLocation=r.getUniformLocation(h,"u_backdrop"),u.subtypeLocation=r.getUniformLocation(h,"u_subtype");var c=r.getAttribLocation(h,"a_texCoord"),d=r.getUniformLocation(h,"u_image"),f=r.getUniformLocation(h,"u_mask"),p=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,p),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(c),r.vertexAttribPointer(c,2,r.FLOAT,!1,0,0),r.uniform1i(d,0),r.uniform1i(f,1),l=u}();var f=l,p=f.canvas,g=f.gl;p.width=c,p.height=d,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.uniform2f(f.resolutionLocation,c,d),u.backdrop?g.uniform4f(f.resolutionLocation,u.backdrop[0],u.backdrop[1],u.backdrop[2],1):g.uniform4f(f.resolutionLocation,0,0,0,0),g.uniform1i(f.subtypeLocation,"Luminosity"===u.subtype?1:0);var v=r(g,t,g.TEXTURE0),m=r(g,h,g.TEXTURE1),_=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,_),g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,c,0,0,d,0,d,c,0,c,d]),g.STATIC_DRAW),g.enableVertexAttribArray(f.positionLocation),g.vertexAttribPointer(f.positionLocation,2,g.FLOAT,!1,0,0),g.clearColor(0,0,0,0),g.enable(g.BLEND),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.clear(g.COLOR_BUFFER_BIT),g.drawArrays(g.TRIANGLES,0,6),g.flush(),g.deleteTexture(v),g.deleteTexture(m),g.deleteBuffer(_),p},drawFigures:function(t,r,l,u,c){h||function(){var t,r;a(),t=o,o=null,r=s,s=null;var l=i(r,[e(r,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),n(r,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);r.useProgram(l);var u={};u.gl=r,u.canvas=t,u.resolutionLocation=r.getUniformLocation(l,"u_resolution"),u.scaleLocation=r.getUniformLocation(l,"u_scale"),u.offsetLocation=r.getUniformLocation(l,"u_offset"),u.positionLocation=r.getAttribLocation(l,"a_position"),u.colorLocation=r.getAttribLocation(l,"a_color"),h=u}();var d=h,f=d.canvas,p=d.gl;f.width=t,f.height=r,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(d.resolutionLocation,t,r);var g,v,m,_=0;for(g=0,v=u.length;g<v;g++)switch(u[g].type){case"lattice":_+=((m=u[g].coords.length/u[g].verticesPerRow|0)-1)*(u[g].verticesPerRow-1)*6;break;case"triangles":_+=u[g].coords.length}var y=new Float32Array(2*_),b=new Uint8Array(3*_),w=c.coords,x=c.colors,S=0,A=0;for(g=0,v=u.length;g<v;g++){var P=u[g],C=P.coords,k=P.colors;switch(P.type){case"lattice":var T=P.verticesPerRow;m=C.length/T|0;for(var E=1;E<m;E++)for(var I=E*T+1,R=1;R<T;R++,I++)y[S]=w[C[I-T-1]],y[S+1]=w[C[I-T-1]+1],y[S+2]=w[C[I-T]],y[S+3]=w[C[I-T]+1],y[S+4]=w[C[I-1]],y[S+5]=w[C[I-1]+1],b[A]=x[k[I-T-1]],b[A+1]=x[k[I-T-1]+1],b[A+2]=x[k[I-T-1]+2],b[A+3]=x[k[I-T]],b[A+4]=x[k[I-T]+1],b[A+5]=x[k[I-T]+2],b[A+6]=x[k[I-1]],b[A+7]=x[k[I-1]+1],b[A+8]=x[k[I-1]+2],y[S+6]=y[S+2],y[S+7]=y[S+3],y[S+8]=y[S+4],y[S+9]=y[S+5],y[S+10]=w[C[I]],y[S+11]=w[C[I]+1],b[A+9]=b[A+3],b[A+10]=b[A+4],b[A+11]=b[A+5],b[A+12]=b[A+6],b[A+13]=b[A+7],b[A+14]=b[A+8],b[A+15]=x[k[I]],b[A+16]=x[k[I]+1],b[A+17]=x[k[I]+2],S+=12,A+=18;break;case"triangles":for(var O=0,j=C.length;O<j;O++)y[S]=w[C[O]],y[S+1]=w[C[O]+1],b[A]=x[k[O]],b[A+1]=x[k[O]+1],b[A+2]=x[k[O]+2],S+=2,A+=3}}l?p.clearColor(l[0]/255,l[1]/255,l[2]/255,1):p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT);var M=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,M),p.bufferData(p.ARRAY_BUFFER,y,p.STATIC_DRAW),p.enableVertexAttribArray(d.positionLocation),p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);var L=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,L),p.bufferData(p.ARRAY_BUFFER,b,p.STATIC_DRAW),p.enableVertexAttribArray(d.colorLocation),p.vertexAttribPointer(d.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0),p.uniform2f(d.scaleLocation,c.scaleX,c.scaleY),p.uniform2f(d.offsetLocation,c.offsetX,c.offsetY),p.drawArrays(p.TRIANGLES,0,_),p.flush(),p.deleteBuffer(M),p.deleteBuffer(L),f},cleanup:function(){l&&l.canvas&&(l.canvas.width=0,l.canvas.height=0),h&&h.canvas&&(h.canvas.width=0,h.canvas.height=0),l=null,h=null}}}();e.WebGLContext=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(0),o=i(39);function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=n(11),c=n(12),d=n(13),f=n("../../../../home/node/node_modules/url/url.js"),p=/^file:\/\/\/[a-zA-Z]:\//,g=function(){function t(e){h(this,t),this.source=e,this.url=f.parse(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol||!this.url.host,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequest=null,this._rangeRequestReaders=[]}return r(t,[{key:"getFullReader",value:function(){return(0,s.assert)(!this._fullRequest),this._fullRequest=this.isFsUrl?new w(this):new y(this),this._fullRequest}},{key:"getRangeReader",value:function(t,e){var n=this.isFsUrl?new x(this,t,e):new b(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequest&&this._fullRequest.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}}]),t}(),v=function(){function t(e){h(this,t),this._url=e.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null;var n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._headersCapability=(0,s.createPromiseCapability)()}return r(t,[{key:"read",value:function(){var t=this;return this._readCapability.promise.then((function(){if(t._done)return Promise.resolve({value:void 0,done:!0});if(t._errored)return Promise.reject(t._reason);var e=t._readableStream.read();if(null===e)return t._readCapability=(0,s.createPromiseCapability)(),t.read();t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded,total:t._contentLength});var n=new Uint8Array(e).buffer;return Promise.resolve({value:n,done:!1})}))}},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._errored=!0,this._reason=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._errored&&this._readableStream.destroy(this._reason)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),m=function(){function t(e){h(this,t),this._url=e.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)();var n=e.source;this._isStreamingSupported=!n.disableStream}return r(t,[{key:"read",value:function(){var t=this;return this._readCapability.promise.then((function(){if(t._done)return Promise.resolve({value:void 0,done:!0});if(t._errored)return Promise.reject(t._reason);var e=t._readableStream.read();if(null===e)return t._readCapability=(0,s.createPromiseCapability)(),t.read();t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded});var n=new Uint8Array(e).buffer;return Promise.resolve({value:n,done:!1})}))}},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._errored=!0,this._reason=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),this._errored&&this._readableStream.destroy(this._reason)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}();function _(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var y=function(t){function e(t){h(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){n._headersCapability.resolve(),n._setReadableStream(e);var i=function(t){return n._readableStream.headers[t.toLowerCase()]},r=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,a=r.suggestedLength;s&&(n._isRangeSupported=!0),n._contentLength=a,n._filename=(0,o.extractFilenameFromHeader)(i)};return n._request=null,"http:"===n._url.protocol?n._request=c.request(_(n._url,t.httpHeaders),i):n._request=d.request(_(n._url,t.httpHeaders),i),n._request.on("error",(function(t){n._errored=!0,n._reason=t,n._headersCapability.reject(t)})),n._request.end(),n}return l(e,t),e}(v),b=function(t){function e(t,n,i){h(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));for(var s in r._httpHeaders={},t.httpHeaders){var o=t.httpHeaders[s];void 0!==o&&(r._httpHeaders[s]=o)}return r._httpHeaders.Range="bytes="+n+"-"+(i-1),r._request=null,"http:"===r._url.protocol?r._request=c.request(_(r._url,r._httpHeaders),(function(t){r._setReadableStream(t)})):r._request=d.request(_(r._url,r._httpHeaders),(function(t){r._setReadableStream(t)})),r._request.on("error",(function(t){r._errored=!0,r._reason=t})),r._request.end(),r}return l(e,t),e}(m),w=function(t){function e(t){h(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=decodeURIComponent(n._url.path);return p.test(n._url.href)&&(i=i.replace(/^\//,"")),u.lstat(i,(function(t,e){if(t)return n._errored=!0,n._reason=t,void n._headersCapability.reject(t);n._contentLength=e.size,n._setReadableStream(u.createReadStream(i)),n._headersCapability.resolve()})),n}return l(e,t),e}(v),x=function(t){function e(t,n,i){h(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s=decodeURIComponent(r._url.path);return p.test(r._url.href)&&(s=s.replace(/^\//,"")),r._setReadableStream(u.createReadStream(s,{start:n,end:i-1})),r}return l(e,t),e}(m);e.PDFNodeStream=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.getFilenameFromContentDispositionHeader=function(t){var e=!0,n=/(?:^|;)\s*filename\*\s*=\s*([^;\s]+)/i.exec(t);if(n){var r=l(n=n[1]);return a(r=u(r=h(r=unescape(r))))}if(n=function(t){for(var e=[],n=void 0,r=/(?:^|;)\s*filename\*((?!0\d)\d+)(\*?)\s*=\s*([^;\s]+)/gi;null!==(n=r.exec(t));){var s=i(n,4),o=s[1],a=s[2],u=s[3];if((o=parseInt(o,10))in e){if(0===o)break}else e[o]=[a,u]}for(var c=[],d=0;d<e.length&&d in e;++d){var f=i(e[d],2),p=f[0],g=f[1];g=l(g),p&&(g=unescape(g),0===d&&(g=h(g))),c.push(g)}return c.join("")}(t))return a(u(n));if(n=/(?:^|;)\s*filename\s*=\s*([^;\s]+)/.exec(t)){var s=l(n=n[1]);return a(s=u(s))}function o(t,n){if(t){if(!/^[^\x00-\xFF]+$/.test(n))return n;try{for(var i=new TextDecoder(t,{fatal:!0}),r=new Array(n.length),s=0;s<n.length;++s)r[s]=n.charCodeAt(0);n=i.decode(new Uint8Array(r)),e=!1}catch(i){/^utf-?8$/i.test(t)&&(n=decodeURIComponent(escape(n)),e=!1)}}return n}function a(t){return e&&/[\x80-\xff]/.test(t)?o("utf-8",t):t}function l(t){if('"'===t.charAt(0)){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var i=e[n].indexOf('"');-1!==i&&(e[n]=e[n].slice(0,i),e.length=n+1),e[n]=e[n].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){var e=t.indexOf("'");return-1===e?t:o(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function u(t){return"=?"!==t.slice(0,2)||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w\-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,i){if("q"===n||"Q"===n)return o(e,i=(i=i.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{return atob(i)}catch(t){return i}}))}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=n(39);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return{method:"GET",headers:t,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}var l=function(){function t(e){o(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return i(t,[{key:"getFullReader",value:function(){return(0,r.assert)(!this._fullRequestReader),this._fullRequestReader=new h(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new u(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}}]),t}(),h=function(){function t(e){var n=this;o(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var i=e.source;for(var l in this._withCredentials=i.withCredentials,this._contentLength=i.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=i.disableRange,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isRangeSupported=!i.disableRange,this._isStreamingSupported=!i.disableStream,this._headers=new Headers,this._stream.httpHeaders){var h=this._stream.httpHeaders[l];void 0!==h&&this._headers.append(l,h)}var u=i.url;fetch(u,a(this._headers,this._withCredentials)).then((function(t){if(!(0,s.validateResponseStatus)(t.status))throw(0,s.createResponseStatusError)(t.status,u);n._reader=t.body.getReader(),n._headersCapability.resolve();var e=function(e){return t.headers.get(e)},i=(0,s.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),o=i.allowRangeRequests,a=i.suggestedLength;n._contentLength=a,n._isRangeSupported=o,n._filename=(0,s.extractFilenameFromHeader)(e),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new r.AbortException("streaming is disabled"))})).catch(this._headersCapability.reject),this.onProgress=null}return i(t,[{key:"read",value:function(){var t=this;return this._headersCapability.promise.then((function(){return t._reader.read().then((function(e){var n=e.value,i=e.done;if(i)return Promise.resolve({value:n,done:i});t._loaded+=n.byteLength,t.onProgress&&t.onProgress({loaded:t._loaded,total:t._contentLength});var r=new Uint8Array(n).buffer;return Promise.resolve({value:r,done:!1})}))}))}},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),u=function(){function t(e,n,i){var l=this;o(this,t),this._stream=e,this._reader=null,this._loaded=0;var h=e.source;for(var u in this._withCredentials=h.withCredentials,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._headers=new Headers,this._stream.httpHeaders){var c=this._stream.httpHeaders[u];void 0!==c&&this._headers.append(u,c)}var d=n+"-"+(i-1);this._headers.append("Range","bytes="+d);var f=h.url;fetch(f,a(this._headers,this._withCredentials)).then((function(t){if(!(0,s.validateResponseStatus)(t.status))throw(0,s.createResponseStatusError)(t.status,f);l._readCapability.resolve(),l._reader=t.body.getReader()})),this.onProgress=null}return i(t,[{key:"read",value:function(){var t=this;return this._readCapability.promise.then((function(){return t._reader.read().then((function(e){var n=e.value,i=e.done;if(i)return Promise.resolve({value:n,done:i});t._loaded+=n.byteLength,t.onProgress&&t.onProgress({loaded:t._loaded});var r=new Uint8Array(n).buffer;return Promise.resolve({value:r,done:!1})}))}))}},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}();e.PDFFetchStream=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkManager=e.PDFNetworkStream=void 0;var i,r=n(0),s=n(39),o=n(14),a=(i=o)&&i.__esModule?i:{default:i};function l(t,e){this.url=t,e=e||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null),this.loadedRequests=Object.create(null)}function h(t){var e=t.response;return"string"!=typeof e?e:(0,r.stringToBytes)(e).buffer}var u=function(){try{var t=new XMLHttpRequest;return t.open("GET",a.default.location.href),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(t){return!1}}();function c(t){this._source=t,this._manager=new l(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}function d(t,e){this._manager=t;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onProgressiveData:e.disableStream?null:this._onProgressiveData.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}function f(t,e,n){this._manager=t;var i={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}l.prototype={requestRange:function(t,e,n){var i={begin:t,end:e};for(var r in n)i[r]=n[r];return this.request(i)},requestFull:function(t){return this.request(t)},request:function(t){var e=this.getXhr(),n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};for(var r in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var s=this.httpHeaders[r];void 0!==s&&e.setRequestHeader(r,s)}if(this.isHttp&&"begin"in t&&"end"in t){var o=t.begin+"-"+(t.end-1);e.setRequestHeader("Range","bytes="+o),i.expectedStatus=206}else i.expectedStatus=200;return u&&t.onProgressiveData?(e.responseType="moz-chunked-arraybuffer",i.onProgressiveData=t.onProgressiveData,i.mozChunked=!0):e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n},onProgress:function(t,e){var n=this.pendingRequests[t];if(n){if(n.mozChunked){var i=h(n.xhr);n.onProgressiveData(i)}var r=n.onProgress;r&&r(e)}},onStateChange:function(t,e){var n=this.pendingRequests[t];if(n){var i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===i.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===i.status&&this.isHttp)n.onError&&n.onError(i.status);else{var r=i.status||200;if(200===r&&206===n.expectedStatus||r===n.expectedStatus){this.loadedRequests[t]=!0;var s=h(i);if(206===r){var o=i.getResponseHeader("Content-Range"),a=/bytes (\d+)-(\d+)\/(\d+)/.exec(o),l=parseInt(a[1],10);n.onDone({begin:l,chunk:s})}else n.onProgressiveData?n.onDone(null):s?n.onDone({begin:0,chunk:s}):n.onError&&n.onError(i.status)}else n.onError&&n.onError(i.status)}}},hasPendingRequests:function(){for(var t in this.pendingRequests)return!0;return!1},getRequestXhr:function(t){return this.pendingRequests[t].xhr},isStreamingRequest:function(t){return!!this.pendingRequests[t].onProgressiveData},isPendingRequest:function(t){return t in this.pendingRequests},isLoadedRequest:function(t){return t in this.loadedRequests},abortAllRequests:function(){for(var t in this.pendingRequests)this.abortRequest(0|t)},abortRequest:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},c.prototype={_onRangeRequestReaderClosed:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)},getFullReader:function(){return(0,r.assert)(!this._fullRequestReader),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader},getRangeReader:function(t,e){var n=new f(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}},d.prototype={_onHeadersReceived:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=function(t){return e.getResponseHeader(t)},i=(0,s.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),r=i.allowRangeRequests,o=i.suggestedLength;this._contentLength=o||this._contentLength,r&&(this._isRangeSupported=!0),this._filename=(0,s.extractFilenameFromHeader)(n);var a=this._manager;a.isStreamingRequest(t)?this._isStreamingSupported=!0:this._isRangeSupported&&a.abortRequest(t),this._headersReceivedCapability.resolve()},_onProgressiveData:function(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t)},_onDone:function(t){t&&this._onProgressiveData(t.chunk),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[])},_onError:function(t){var e=this._url,n=(0,s.createResponseStatusError)(t,e);this._storedError=n,this._headersReceivedCapability.reject(n),this._requests.forEach((function(t){t.reject(n)})),this._requests=[],this._cachedChunks=[]},_onProgress:function(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})},get filename(){return this._filename},get isRangeSupported(){return this._isRangeSupported},get isStreamingSupported(){return this._isStreamingSupported},get contentLength(){return this._contentLength},get headersReady(){return this._headersReceivedCapability.promise},read:function(){if(this._storedError)return Promise.reject(this._storedError);if(this._cachedChunks.length>0){var t=this._cachedChunks.shift();return Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},f.prototype={_close:function(){this.onClosed&&this.onClosed(this)},_onDone:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._close()},_onProgress:function(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})},get isStreamingSupported(){return!1},read:function(){if(null!==this._queuedChunk){var t=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},e.PDFNetworkStream=c,e.NetworkManager=l}])},t.exports=s()}).call(this,n("../../../../home/node/node_modules/webpack/buildin/global.js"),n("../../../../home/node/node_modules/process/browser.js"),n("../../../../home/node/node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"../../../../home/node/node_modules/pdfjs-dist/web/pdf_viewer.js":function(t,e,n){var i;"undefined"!=typeof self&&self,i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,i){"use strict";var r=void 0;r="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:n("../../../../home/node/node_modules/pdfjs-dist/build/pdf.js"),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitOnEventOrTimeout=e.WaitOnType=e.localized=e.animationStarted=e.normalizeWheelEventDelta=e.binarySearchFirstItem=e.watchScroll=e.scrollIntoView=e.getOutputScale=e.approximateFraction=e.roundToDivide=e.getVisibleElements=e.parseQueryString=e.noContextMenuHandler=e.getPDFFileNameFromURL=e.ProgressBar=e.EventBus=e.NullL10n=e.mozL10n=e.RendererType=e.PresentationModeState=e.cloneObj=e.isFileSchema=e.isValidRotation=e.VERTICAL_PADDING=e.SCROLLBAR_PADDING=e.MAX_AUTO_SCALE=e.UNKNOWN_SCALE=e.MAX_SCALE=e.MIN_SCALE=e.DEFAULT_SCALE=e.DEFAULT_SCALE_VALUE=e.CSS_UNITS=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a={getDirection:function(){return Promise.resolve("ltr")},get:function(t,e,n){return Promise.resolve(function(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(t,n){return n in e?e[n]:"{{"+n+"}}"})):t}(n,e))},translate:function(t){return Promise.resolve()}};function l(t,e){var n=0,i=t.length-1;if(0===t.length||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){var r=n+i>>1;e(t[r])?i=r:n=r+1}return n}function h(t){for(var e=0,n=t.length;e<n&&""===t[e].trim();)e++;return"data:"===t.substr(e,5).toLowerCase()}s.PDFJS.disableFullscreen=void 0!==s.PDFJS.disableFullscreen&&s.PDFJS.disableFullscreen,s.PDFJS.useOnlyCssZoom=void 0!==s.PDFJS.useOnlyCssZoom&&s.PDFJS.useOnlyCssZoom,s.PDFJS.maxCanvasPixels=void 0===s.PDFJS.maxCanvasPixels?16777216:s.PDFJS.maxCanvasPixels,s.PDFJS.disableHistory=void 0!==s.PDFJS.disableHistory&&s.PDFJS.disableHistory,s.PDFJS.disableTextLayer=void 0!==s.PDFJS.disableTextLayer&&s.PDFJS.disableTextLayer,s.PDFJS.locale=void 0===s.PDFJS.locale&&"undefined"!=typeof navigator?navigator.language:s.PDFJS.locale;var u={EVENT:"event",TIMEOUT:"timeout"},c=new Promise((function(t){window.requestAnimationFrame(t)})),d=Promise.resolve(),f=function(){function t(){o(this,t),this._listeners=Object.create(null)}return i(t,[{key:"on",value:function(t,e){var n=this._listeners[t];n||(n=[],this._listeners[t]=n),n.push(e)}},{key:"off",value:function(t,e){var n=this._listeners[t],i=void 0;!n||(i=n.indexOf(e))<0||n.splice(i,1)}},{key:"dispatch",value:function(t){var e=this._listeners[t];if(e&&0!==e.length){var n=Array.prototype.slice.call(arguments,1);e.slice(0).forEach((function(t){t.apply(null,n)}))}}}]),t}(),p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.height,r=n.width,s=n.units;o(this,t),this.visible=!0,this.div=document.querySelector(e+" .progress"),this.bar=this.div.parentNode,this.height=i||100,this.width=r||100,this.units=s||"%",this.div.style.height=this.height+this.units,this.percent=0}return i(t,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units}},{key:"setWidth",value:function(t){if(t){var e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&this.bar.setAttribute("style","width: calc(100% - "+e+"px);")}}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function(){return this._percent},set:function(t){var e,n,i;this._indeterminate=isNaN(t),this._percent=(e=t,n=0,i=100,Math.min(Math.max(e,n),i)),this._updateBar()}}]),t}();e.CSS_UNITS=96/72,e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.MIN_SCALE=.1,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5,e.isValidRotation=function(t){return Number.isInteger(t)&&t%90==0},e.isFileSchema=function(t){for(var e=0,n=t.length;e<n&&""===t[e].trim();)e++;return"file://"===t.substr(e,7).toLowerCase()},e.cloneObj=function(t){var e=Object.create(null);for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},e.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},e.RendererType={CANVAS:"canvas",SVG:"svg"},e.mozL10n=void 0,e.NullL10n=a,e.EventBus=f,e.ProgressBar=p,e.getPDFFileNameFromURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(h(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),e;var n=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(t),s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&-1!==(s=s[0]).indexOf("%"))try{s=i.exec(decodeURIComponent(s))[0]}catch(t){}return s||e},e.noContextMenuHandler=function(t){t.preventDefault()},e.parseQueryString=function(t){for(var e=t.split("&"),n=Object.create(null),i=0,r=e.length;i<r;++i){var s=e[i].split("="),o=s[0].toLowerCase(),a=s.length>1?s[1]:null;n[decodeURIComponent(o)]=decodeURIComponent(a)}return n},e.getVisibleElements=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.scrollTop,r=i+t.clientHeight,s=t.scrollLeft,o=s+t.clientWidth;function a(t){var e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>i}for(var h=[],u=void 0,c=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=0===e.length?0:l(e,a),m=v,_=e.length;m<_&&(d=(c=(u=e[m]).div).offsetTop+c.clientTop,f=c.clientHeight,!(d>r));m++)(g=c.offsetLeft+c.clientLeft)+c.clientWidth<s||g>o||(p=100*(f-(Math.max(0,i-d)+Math.max(0,d+f-r)))/f|0,h.push({id:u.id,x:g,y:d,view:u,percent:p}));var y=h[0],b=h[h.length-1];return n&&h.sort((function(t,e){var n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id})),{first:y,last:b,views:h}},e.roundToDivide=function(t,e){var n=t%e;return 0===n?t:Math.round(t-n+e)},e.approximateFraction=function(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var n=t>1?e:t,i=0,r=1,s=1,o=1;;){var a=i+s,l=r+o;if(l>8)break;n<=a/l?(s=a,o=l):(i=a,r=l)}return n-i/r<s/o-n?n===t?[i,r]:[r,i]:n===t?[s,o]:[o,s]},e.getOutputScale=function(t){var e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return{sx:e,sy:e,scaled:1!==e}},e.scrollIntoView=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.offsetParent;if(i){for(var r=t.offsetTop+t.clientTop,s=t.offsetLeft+t.clientLeft;i.clientHeight===i.scrollHeight||n&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(r/=i.dataset._scaleY,s/=i.dataset._scaleX),r+=i.offsetTop,s+=i.offsetLeft,!(i=i.offsetParent))return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(s+=e.left,i.scrollLeft=s)),i.scrollTop=r}else console.error("offsetParent is not set -- cannot scroll")},e.watchScroll=function(t,e){var n=function(n){r||(r=window.requestAnimationFrame((function(){r=null;var n=t.scrollTop,s=i.lastY;n!==s&&(i.down=n>s),i.lastY=n,e(i)})))},i={down:!0,lastY:t.scrollTop,_eventHandler:n},r=null;return t.addEventListener("scroll",n,!0),i},e.binarySearchFirstItem=l,e.normalizeWheelEventDelta=function(t){var e=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY),n=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<n&&n<.75*Math.PI&&(e=-e),0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e},e.animationStarted=c,e.localized=d,e.WaitOnType=u,e.waitOnEventOrTimeout=function(t){var e=t.target,n=t.name,i=t.delay,o=void 0===i?0:i;if("object"!==(void 0===e?"undefined":r(e))||!n||"string"!=typeof n||!(Number.isInteger(o)&&o>=0))return Promise.reject(new Error("waitOnEventOrTimeout - invalid paramaters."));var a=(0,s.createPromiseCapability)();function l(t){e instanceof f?e.off(n,h):e.removeEventListener(n,h),d&&clearTimeout(d),a.resolve(t)}var h=l.bind(null,u.EVENT);e instanceof f?e.on(n,h):e.addEventListener(n,h);var c=l.bind(null,u.TIMEOUT),d=setTimeout(c,o);return a.promise}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlobalEventBus=e.attachDOMEventsToEventBus=void 0;var i=n(1);function r(t){t.on("documentload",(function(){var t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)})),t.on("pagerendered",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagerendered",!0,!0,{pageNumber:t.pageNumber,cssTransform:t.cssTransform}),t.source.div.dispatchEvent(e)})),t.on("textlayerrendered",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t.pageNumber}),t.source.textLayerDiv.dispatchEvent(e)})),t.on("pagechange",(function(t){var e=document.createEvent("UIEvents");e.initUIEvent("pagechange",!0,!0,window,0),e.pageNumber=t.pageNumber,t.source.container.dispatchEvent(e)})),t.on("pagesinit",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesinit",!0,!0,null),t.source.container.dispatchEvent(e)})),t.on("pagesloaded",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t.pagesCount}),t.source.container.dispatchEvent(e)})),t.on("scalechange",(function(t){var e=document.createEvent("UIEvents");e.initUIEvent("scalechange",!0,!0,window,0),e.scale=t.scale,e.presetValue=t.presetValue,t.source.container.dispatchEvent(e)})),t.on("updateviewarea",(function(t){var e=document.createEvent("UIEvents");e.initUIEvent("updateviewarea",!0,!0,window,0),e.location=t.location,t.source.container.dispatchEvent(e)})),t.on("find",(function(t){if(t.source!==window){var e=document.createEvent("CustomEvent");e.initCustomEvent("find"+t.type,!0,!0,{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:t.caseSensitive,highlightAll:t.highlightAll,findPrevious:t.findPrevious}),window.dispatchEvent(e)}})),t.on("attachmentsloaded",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t.attachmentsCount}),t.source.container.dispatchEvent(e)})),t.on("sidebarviewchanged",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("sidebarviewchanged",!0,!0,{view:t.view}),t.source.outerContainer.dispatchEvent(e)})),t.on("pagemode",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagemode",!0,!0,{mode:t.mode}),t.source.pdfViewer.container.dispatchEvent(e)})),t.on("namedaction",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("namedaction",!0,!0,{action:t.action}),t.source.pdfViewer.container.dispatchEvent(e)})),t.on("presentationmodechanged",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("presentationmodechanged",!0,!0,{active:t.active,switchInProgress:t.switchInProgress}),window.dispatchEvent(e)})),t.on("outlineloaded",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t.outlineCount}),t.source.container.dispatchEvent(e)}))}var s=null;e.attachDOMEventsToEventBus=r,e.getGlobalEventBus=function(){return s||(r(s=new i.EventBus),s)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),o=n(1);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.eventBus;a(this,t),this.eventBus=n||(0,s.getGlobalEventBus)(),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return r(t,[{key:"setDocument",value:function(t,e){this.baseUrl=e,this.pdfDocument=t,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setHistory",value:function(t){this.pdfHistory=t}},{key:"navigateTo",value:function(t){var e=this;new Promise((function(n,i){"string"!=typeof t?n({namedDest:"",explicitDest:t}):e.pdfDocument.getDestination(t).then((function(e){n({namedDest:t,explicitDest:e})}))})).then((function(n){n.explicitDest instanceof Array?function n(i){var r=i.namedDest,s=i.explicitDest,o=s[0],a=void 0;if(o instanceof Object){if(null===(a=e._cachedPageNumber(o)))return void e.pdfDocument.getPageIndex(o).then((function(t){e.cachePageRef(t+1,o),n({namedDest:r,explicitDest:s})})).catch((function(){console.error('PDFLinkService.navigateTo: "'+o+'" is not a valid page reference, for dest="'+t+'".')}))}else{if(!Number.isInteger(o))return void console.error('PDFLinkService.navigateTo: "'+o+'" is not a valid destination reference, for dest="'+t+'".');a=o+1}!a||a<1||a>e.pagesCount?console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid page number, for dest="'+t+'".'):(e.pdfHistory&&(e.pdfHistory.pushCurrentPosition(),e.pdfHistory.push({namedDest:r,explicitDest:s,pageNumber:a})),e.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:s}))}(n):console.error('PDFLinkService.navigateTo: "'+n.explicitDest+'" is not a valid destination array, for dest="'+t+'".')}))}},{key:"getDestinationHash",value:function(t){if("string"==typeof t)return this.getAnchorUrl("#"+escape(t));if(t instanceof Array){var e=JSON.stringify(t);return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(t){return(this.baseUrl||"")+t}},{key:"setHash",value:function(t){var e=void 0,n=void 0;if(t.indexOf("=")>=0){var r=(0,o.parseQueryString)(t);if("search"in r&&this.eventBus.dispatch("findfromurlhash",{source:this,query:r.search.replace(/"/g,""),phraseSearch:"true"===r.phrase}),"nameddest"in r)return void this.navigateTo(r.nameddest);if("page"in r&&(e=0|r.page||1),"zoom"in r){var s=r.zoom.split(","),a=s[0],l=parseFloat(a);-1===a.indexOf("Fit")?n=[null,{name:"XYZ"},s.length>1?0|s[1]:null,s.length>2?0|s[2]:null,l?l/100:a]:"Fit"===a||"FitB"===a?n=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?n=[null,{name:a},s.length>1?0|s[1]:null]:"FitR"===a?5!==s.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:a},0|s[1],0|s[2],0|s[3],0|s[4]]:console.error('PDFLinkService.setHash: "'+a+'" is not a valid zoom value.')}n?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:n,allowNegativeOffset:!0}):e&&(this.page=e),"pagemode"in r&&this.eventBus.dispatch("pagemode",{source:this,mode:r.pagemode})}else{n=unescape(t);try{(n=JSON.parse(n))instanceof Array||(n=n.toString())}catch(t){}if("string"==typeof n||function(t){if(!(t instanceof Array))return!1;var e=t.length,n=!0;if(e<2)return!1;var r=t[0];if(!("object"===(void 0===r?"undefined":i(r))&&Number.isInteger(r.num)&&Number.isInteger(r.gen)||Number.isInteger(r)&&r>=0))return!1;var s=t[1];if("object"!==(void 0===s?"undefined":i(s))||"string"!=typeof s.name)return!1;switch(s.name){case"XYZ":if(5!==e)return!1;break;case"Fit":case"FitB":return 2===e;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==e)return!1;break;case"FitR":if(6!==e)return!1;n=!1;break;default:return!1}for(var o=2;o<e;o++){var a=t[o];if(!("number"==typeof a||n&&null===a))return!1}return!0}(n))return void this.navigateTo(n);console.error('PDFLinkService.setHash: "'+unescape(t)+'" is not a valid destination.')}}},{key:"executeNamedAction",value:function(t){switch(t){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"onFileAttachmentAnnotation",value:function(t){var e=t.id,n=t.filename,i=t.content;this.eventBus.dispatch("fileattachmentannotation",{source:this,id:e,filename:n,content:i})}},{key:"cachePageRef",value:function(t,e){var n=e.num+" "+e.gen+" R";this._pagesRefCache[n]=t}},{key:"_cachedPageNumber",value:function(t){var e=t.num+" "+t.gen+" R";return this._pagesRefCache&&this._pagesRefCache[e]||null}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(t){this.pdfViewer.currentPageNumber=t}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(t){this.pdfViewer.pagesRotation=t}}]),t}(),h=function(){function t(){a(this,t)}return r(t,[{key:"navigateTo",value:function(t){}},{key:"getDestinationHash",value:function(t){return"#"}},{key:"getAnchorUrl",value:function(t){return"#"}},{key:"setHash",value:function(t){}},{key:"executeNamedAction",value:function(t){}},{key:"onFileAttachmentAnnotation",value:function(t){t.id,t.filename,t.content}},{key:"cachePageRef",value:function(t,e){}},{key:"page",get:function(){return 0},set:function(t){}},{key:"rotation",get:function(){return 0},set:function(t){}}]),t}();e.PDFLinkService=l,e.SimpleLinkService=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultAnnotationLayerFactory=e.AnnotationLayerBuilder=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=n(1),o=n(3);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(e){var n=e.pageDiv,i=e.pdfPage,r=e.linkService,o=e.downloadManager,l=e.renderInteractiveForms,h=void 0!==l&&l,u=e.l10n,c=void 0===u?s.NullL10n:u;a(this,t),this.pageDiv=n,this.pdfPage=i,this.linkService=r,this.downloadManager=o,this.renderInteractiveForms=h,this.l10n=c,this.div=null,this._cancelled=!1}return i(t,[{key:"render",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:n}).then((function(n){if(!e._cancelled){var i={viewport:t.clone({dontFlip:!0}),div:e.div,annotations:n,page:e.pdfPage,renderInteractiveForms:e.renderInteractiveForms,linkService:e.linkService,downloadManager:e.downloadManager};if(e.div)r.AnnotationLayer.update(i);else{if(0===n.length)return;e.div=document.createElement("div"),e.div.className="annotationLayer",e.pageDiv.appendChild(e.div),i.div=e.div,r.AnnotationLayer.render(i),e.l10n.translate(e.div)}}}))}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),t}(),h=function(){function t(){a(this,t)}return i(t,[{key:"createAnnotationLayerBuilder",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.NullL10n;return new l({pageDiv:t,pdfPage:e,renderInteractiveForms:n,linkService:new o.SimpleLinkService,l10n:i})}}]),t}();e.AnnotationLayerBuilder=l,e.DefaultAnnotationLayerFactory=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTextLayerFactory=e.TextLayerBuilder=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),s=n(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){var n=e.textLayerDiv,i=e.eventBus,s=e.pageIndex,a=e.viewport,l=e.findController,h=void 0===l?null:l,u=e.enhanceTextSelection,c=void 0!==u&&u;o(this,t),this.textLayerDiv=n,this.eventBus=i||(0,r.getGlobalEventBus)(),this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=s,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=a,this.textDivs=[],this.findController=h,this.textLayerRenderTask=null,this.enhanceTextSelection=c,this._bindMouse()}return i(t,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var n=document.createDocumentFragment();this.textLayerRenderTask=(0,s.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((function(){t.textLayerDiv.appendChild(n),t._finishRendering(),t.updateMatches()}),(function(t){}))}}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null)}},{key:"setTextContentStream",value:function(t){this.cancel(),this.textContentStream=t}},{key:"setTextContent",value:function(t){this.cancel(),this.textContent=t}},{key:"convertMatches",value:function(t,e){var n=0,i=0,r=this.textContentItemsStr,s=r.length-1,o=null===this.findController?0:this.findController.state.query.length,a=[];if(!t)return a;for(var l=0,h=t.length;l<h;l++){for(var u=t[l];n!==s&&u>=i+r[n].length;)i+=r[n].length,n++;n===r.length&&console.error("Could not find a matching mapping");var c={begin:{divIdx:n,offset:u-i}};for(u+=e?e[l]:o;n!==s&&u>i+r[n].length;)i+=r[n].length,n++;c.end={divIdx:n,offset:u-i},a.push(c)}return a}},{key:"renderMatches",value:function(t){if(0!==t.length){var e=this.textContentItemsStr,n=this.textDivs,i=null,r=this.pageIdx,s=null!==this.findController&&r===this.findController.selected.pageIdx,o=null===this.findController?-1:this.findController.selected.matchIdx,a={divIdx:-1,offset:void 0},l=o,h=l+1;if(null!==this.findController&&this.findController.state.highlightAll)l=0,h=t.length;else if(!s)return;for(var u=l;u<h;u++){var c=t[u],d=c.begin,f=c.end,p=s&&u===o?" selected":"";if(this.findController&&this.findController.updateMatchPosition(r,u,n,d.divIdx),i&&d.divIdx===i.divIdx?_(i.divIdx,i.offset,d.offset):(null!==i&&_(i.divIdx,i.offset,a.offset),m(d)),d.divIdx===f.divIdx)_(d.divIdx,d.offset,f.offset,"highlight"+p);else{_(d.divIdx,d.offset,a.offset,"highlight begin"+p);for(var g=d.divIdx+1,v=f.divIdx;g<v;g++)n[g].className="highlight middle"+p;m(f,"highlight end"+p)}i=f}i&&_(i.divIdx,i.offset,a.offset)}function m(t,e){var i=t.divIdx;n[i].textContent="",_(i,0,t.offset,e)}function _(t,i,r,s){var o=n[t],a=e[t].substring(i,r),l=document.createTextNode(a);if(s){var h=document.createElement("span");return h.className=s,h.appendChild(l),void o.appendChild(h)}o.appendChild(l)}}},{key:"updateMatches",value:function(){if(this.renderingDone){for(var t=this.matches,e=this.textDivs,n=this.textContentItemsStr,i=-1,r=0,s=t.length;r<s;r++){for(var o=t[r],a=Math.max(i,o.begin.divIdx),l=o.end.divIdx;a<=l;a++){var h=e[a];h.textContent=n[a],h.className=""}i=o.end.divIdx+1}if(null!==this.findController&&this.findController.active){var u=void 0,c=void 0;null!==this.findController&&(u=this.findController.pageMatches[this.pageIdx]||null,c=this.findController.pageMatchesLength&&this.findController.pageMatchesLength[this.pageIdx]||null),this.matches=this.convertMatches(u,c),this.renderMatches(this.matches)}}}},{key:"_bindMouse",value:function(){var t=this,e=this.textLayerDiv,n=null;e.addEventListener("mousedown",(function(i){if(t.enhanceTextSelection&&t.textLayerRenderTask)return t.textLayerRenderTask.expandTextDivs(!0),void(n&&(clearTimeout(n),n=null));var r=e.querySelector(".endOfContent");if(r){var s=i.target!==e;if(s=s&&"none"!==window.getComputedStyle(r).getPropertyValue("-moz-user-select")){var o=e.getBoundingClientRect(),a=Math.max(0,(i.pageY-o.top)/o.height);r.style.top=(100*a).toFixed(2)+"%"}r.classList.add("active")}})),e.addEventListener("mouseup",(function(){if(t.enhanceTextSelection&&t.textLayerRenderTask)n=setTimeout((function(){t.textLayerRenderTask&&t.textLayerRenderTask.expandTextDivs(!1),n=null}),300);else{var i=e.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}}))}}]),t}(),l=function(){function t(){o(this,t)}return i(t,[{key:"createTextLayerBuilder",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new a({textLayerDiv:t,pageIndex:e,viewport:n,enhanceTextSelection:i})}}]),t}();e.TextLayerBuilder=a,e.DefaultTextLayerFactory=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),s=n(0),o=n(2),a=n(7),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.container,i=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||r.DEFAULT_SCALE,this.viewport=i,this.pdfPageRotate=i.rotation,this.hasRestrictedScaling=!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.eventBus=e.eventBus||(0,o.getGlobalEventBus)(),this.renderingQueue=e.renderingQueue,this.textLayerFactory=e.textLayerFactory,this.annotationLayerFactory=e.annotationLayerFactory,this.renderer=e.renderer||r.RendererType.CANVAS,this.l10n=e.l10n||r.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.error=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;var s=document.createElement("div");s.className="page",s.style.width=Math.floor(this.viewport.width)+"px",s.style.height=Math.floor(this.viewport.height)+"px",s.setAttribute("data-page-number",this.id),this.div=s,n.appendChild(s)}return i(t,[{key:"setPdfPage",value:function(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;var e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport(this.scale*r.CSS_UNITS,e),this.stats=t.stats,this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_resetZoomLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var e=this.zoomLayer.firstChild;this.paintedViewportMap.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering(e);var n=this.div;n.style.width=Math.floor(this.viewport.width)+"px",n.style.height=Math.floor(this.viewport.height)+"px";for(var i=n.childNodes,r=t&&this.zoomLayer||null,s=e&&this.annotationLayer&&this.annotationLayer.div||null,o=i.length-1;o>=0;o--){var a=i[o];r!==a&&s!==a&&n.removeChild(a)}n.removeAttribute("data-loaded"),s?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),r||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",n.appendChild(this.loadingIconDiv)}},{key:"update",value:function(t,e){this.scale=t||this.scale,void 0!==e&&(this.rotation=e);var n=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*r.CSS_UNITS,rotation:n}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});var i=!1;if(this.canvas&&s.PDFJS.maxCanvasPixels>0){var o=this.outputScale;(Math.floor(this.viewport.width)*o.sx|0)*(Math.floor(this.viewport.height)*o.sy|0)>s.PDFJS.maxCanvasPixels&&(i=!0)}if(this.canvas){if(s.PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&i)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!t&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}},{key:"cssTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.viewport.width,i=this.viewport.height,r=this.div;t.style.width=t.parentNode.style.width=r.style.width=Math.floor(n)+"px",t.style.height=t.parentNode.style.height=r.style.height=Math.floor(i)+"px";var s=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,o=Math.abs(s),a=1,l=1;90!==o&&270!==o||(a=i/n,l=n/i);var h="rotate("+s+"deg) scale("+a+","+l+")";if(t.style.transform=h,this.textLayer){var u=this.textLayer.viewport,c=this.viewport.rotation-u.rotation,d=Math.abs(c),f=n/u.width;90!==d&&270!==d||(f=n/u.height);var p=this.textLayer.textLayerDiv,g=void 0,v=void 0;switch(d){case 0:g=v=0;break;case 90:g=0,v="-"+p.style.height;break;case 180:g="-"+p.style.width,v="-"+p.style.height;break;case 270:g="-"+p.style.width,v=0;break;default:console.error("Bad rotation value.")}p.style.transform="rotate("+d+"deg) scale("+f+", "+f+") translate("+g+", "+v+")",p.style.transformOrigin="0% 0%"}e&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")}},{key:"getPagePoint",value:function(t,e){return this.viewport.convertToPdfPoint(t,e)}},{key:"draw",value:function(){var t=this;if(this.renderingState!==a.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset()),!this.pdfPage)return this.renderingState=a.RenderingStates.FINISHED,Promise.reject(new Error("Page is not loaded"));this.renderingState=a.RenderingStates.RUNNING;var e=this.pdfPage,n=this.div,i=document.createElement("div");i.style.width=n.style.width,i.style.height=n.style.height,i.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?n.insertBefore(i,this.annotationLayer.div):n.appendChild(i);var o=null;if(this.textLayerFactory){var l=document.createElement("div");l.className="textLayer",l.style.width=i.style.width,l.style.height=i.style.height,this.annotationLayer&&this.annotationLayer.div?n.insertBefore(l,this.annotationLayer.div):n.appendChild(l),o=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.enhanceTextSelection)}this.textLayer=o;var h=null;this.renderingQueue&&(h=function(e){if(!t.renderingQueue.isHighestPriority(t))return t.renderingState=a.RenderingStates.PAUSED,void(t.resume=function(){t.renderingState=a.RenderingStates.RUNNING,e()});e()});var u=function(i){return c===t.paintTask&&(t.paintTask=null),i instanceof s.RenderingCancelledException?(t.error=null,Promise.resolve(void 0)):(t.renderingState=a.RenderingStates.FINISHED,t.loadingIconDiv&&(n.removeChild(t.loadingIconDiv),delete t.loadingIconDiv),t._resetZoomLayer(!0),t.error=i,t.stats=e.stats,t.onAfterDraw&&t.onAfterDraw(),t.eventBus.dispatch("pagerendered",{source:t,pageNumber:t.id,cssTransform:!1}),i?Promise.reject(i):Promise.resolve(void 0))},c=this.renderer===r.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);c.onRenderContinue=h,this.paintTask=c;var d=c.promise.then((function(){return u(null).then((function(){if(o){var t=e.streamTextContent({normalizeWhitespace:!0});o.setTextContentStream(t),o.render()}}))}),(function(t){return u(t)}));return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(n,e,this.renderInteractiveForms,this.l10n)),this.annotationLayer.render(this.viewport,"display")),n.setAttribute("data-loaded",!0),this.onBeforeDraw&&this.onBeforeDraw(),d}},{key:"paintOnCanvas",value:function(t){var e=(0,s.createPromiseCapability)(),n={promise:e.promise,onRenderContinue:function(t){t()},cancel:function(){m.cancel()}},i=this.viewport,o=document.createElement("canvas");o.id=this.renderingId,o.setAttribute("hidden","hidden");var a=!0,l=function(){a&&(o.removeAttribute("hidden"),a=!1)};t.appendChild(o),this.canvas=o,o.mozOpaque=!0;var h=o.getContext("2d",{alpha:!1}),u=(0,r.getOutputScale)(h);if(this.outputScale=u,s.PDFJS.useOnlyCssZoom){var c=i.clone({scale:r.CSS_UNITS});u.sx*=c.width/i.width,u.sy*=c.height/i.height,u.scaled=!0}if(s.PDFJS.maxCanvasPixels>0){var d=i.width*i.height,f=Math.sqrt(s.PDFJS.maxCanvasPixels/d);u.sx>f||u.sy>f?(u.sx=f,u.sy=f,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var p=(0,r.approximateFraction)(u.sx),g=(0,r.approximateFraction)(u.sy);o.width=(0,r.roundToDivide)(i.width*u.sx,p[0]),o.height=(0,r.roundToDivide)(i.height*u.sy,g[0]),o.style.width=(0,r.roundToDivide)(i.width,p[1])+"px",o.style.height=(0,r.roundToDivide)(i.height,g[1])+"px",this.paintedViewportMap.set(o,i);var v={canvasContext:h,transform:u.scaled?[u.sx,0,0,u.sy,0,0]:null,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms},m=this.pdfPage.render(v);return m.onContinue=function(t){l(),n.onRenderContinue?n.onRenderContinue(t):t()},m.promise.then((function(){l(),e.resolve(void 0)}),(function(t){l(),e.reject(t)})),n}},{key:"paintOnSvg",value:function(t){var e=this,n=!1,i=function(){if(n)throw new s.RenderingCancelledException("Rendering cancelled, page "+e.id,"svg")},o=this.pdfPage,l=this.viewport.clone({scale:r.CSS_UNITS});return{promise:o.getOperatorList().then((function(n){return i(),new s.SVGGraphics(o.commonObjs,o.objs).getSVG(n,l).then((function(n){i(),e.svg=n,e.paintedViewportMap.set(n,l),n.style.width=t.style.width,n.style.height=t.style.height,e.renderingState=a.RenderingStates.FINISHED,t.appendChild(n)}))})),onRenderContinue:function(t){t()},cancel:function(){n=!0}}}},{key:"setPageLabel",value:function(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}}]),t}();e.PDFPageView=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return i(t,[{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function(t){return this.highestPriorityPage===t.renderingId}},{key:"renderHighestPriority",value:function(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(t,e,n){var i=t.views,r=i.length;if(0===r)return!1;for(var s=0;s<r;++s){var o=i[s].view;if(!this.isViewFinished(o))return o}if(n){var a=t.last.id;if(e[a]&&!this.isViewFinished(e[a]))return e[a]}else{var l=t.first.id-2;if(e[l]&&!this.isViewFinished(e[l]))return e[l]}return null}},{key:"isViewFinished",value:function(t){return t.renderingState===r.FINISHED}},{key:"renderView",value:function(t){var e=this;switch(t.renderingState){case r.FINISHED:return!1;case r.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case r.RUNNING:this.highestPriorityPage=t.renderingId;break;case r.INITIAL:this.highestPriorityPage=t.renderingId;var n=function(){e.renderHighestPriority()};t.draw().then(n,n)}return!0}}]),t}();e.RenderingStates=r,e.PDFRenderingQueue=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseViewer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=n(1),o=n(7),a=n(4),l=n(2),h=n(6),u=n(3),c=n(5);function d(t){var e=[];this.push=function(n){var i=e.indexOf(n);i>=0&&e.splice(i,1),e.push(n),e.length>t&&e.shift().destroy()},this.resize=function(n){for(t=n;e.length>t;)e.shift().destroy()}}function f(t,e){return e===t||Math.abs(e-t)<1e-15}function p(t){return t.width<=t.height}var g=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new Error("Cannot initialize BaseViewer.");this._name=this.constructor.name,this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.eventBus=e.eventBus||(0,l.getGlobalEventBus)(),this.linkService=e.linkService||new u.SimpleLinkService,this.downloadManager=e.downloadManager||null,this.removePageBorders=e.removePageBorders||!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.renderer=e.renderer||s.RendererType.CANVAS,this.l10n=e.l10n||s.NullL10n,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new o.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=(0,s.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=s.PresentationModeState.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return i(t,[{key:"getPageView",value:function(t){return this._pages[t]}},{key:"_setCurrentPageNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber!==t)if(0<t&&t<=this.pagesCount){var n={source:this,pageNumber:t,pageLabel:this._pageLabels&&this._pageLabels[t-1]};this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",n),this.eventBus.dispatch("pagechange",n),e&&this._resetCurrentPageView()}else console.error(this._name+'._setCurrentPageNumber: "'+t+'" is out of bounds.');else e&&this._resetCurrentPageView()}},{key:"setDocument",value:function(t){var e=this;if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=t,t){var n=t.numPages,i=(0,r.createPromiseCapability)();this.pagesPromise=i.promise,i.promise.then((function(){e._pageViewsReady=!0,e.eventBus.dispatch("pagesloaded",{source:e,pagesCount:n})}));var o=!1,a=(0,r.createPromiseCapability)();this.onePageRendered=a.promise;var l=function(t){t.onBeforeDraw=function(){e._buffer.push(t)},t.onAfterDraw=function(){o||(o=!0,a.resolve())}},u=t.getPage(1);this.firstPagePromise=u,u.then((function(o){for(var u=e.currentScale,c=o.getViewport(u*s.CSS_UNITS),d=1;d<=n;++d){var f=null;r.PDFJS.disableTextLayer||(f=e);var p=new h.PDFPageView({container:e._setDocumentViewerElement,eventBus:e.eventBus,id:d,scale:u,defaultViewport:c.clone(),renderingQueue:e.renderingQueue,textLayerFactory:f,annotationLayerFactory:e,enhanceTextSelection:e.enhanceTextSelection,renderInteractiveForms:e.renderInteractiveForms,renderer:e.renderer,l10n:e.l10n});l(p),e._pages.push(p)}a.promise.then((function(){if(r.PDFJS.disableAutoFetch)i.resolve();else for(var s=n,o=function(n){t.getPage(n).then((function(t){var r=e._pages[n-1];r.pdfPage||r.setPdfPage(t),e.linkService.cachePageRef(n,t.ref),0==--s&&i.resolve()}),(function(t){console.error("Unable to get page "+n+" to initialize viewer",t),0==--s&&i.resolve()}))},a=1;a<=n;++a)o(a)})),e.eventBus.dispatch("pagesinit",{source:e}),e.defaultRenderingQueue&&e.update(),e.findController&&e.findController.resolveFirstPage()})).catch((function(t){console.error("Unable to initialize viewer",t)}))}}},{key:"setPageLabels",value:function(t){if(this.pdfDocument){t?t instanceof Array&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error(this._name+".setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var e=0,n=this._pages.length;e<n;e++){var i=this._pages[e],r=this._pageLabels&&this._pageLabels[e];i.setPageLabel(r)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=s.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new d(10),this._location=null,this._pagesRotation=0,this._pagesRequests=[],this._pageViewsReady=!1,this.viewer.textContent=""}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function(t){throw t.pageDiv,t.pageSpot,t.pageNumber,new Error("Not implemented: _scrollIntoView")}},{key:"_setScaleDispatchEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={source:this,scale:t,presetValue:n?e:void 0};this.eventBus.dispatch("scalechanging",i),this.eventBus.dispatch("scalechange",i)}},{key:"_setScaleUpdatePages",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=e.toString(),f(this._currentScale,t))i&&this._setScaleDispatchEvent(t,e,!0);else{for(var r=0,s=this._pages.length;r<s;r++)this._pages[r].update(t);if(this._currentScale=t,!n){var o=this._currentPageNumber,a=void 0;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(o=this._location.pageNumber,a=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:o,destArray:a,allowNegativeOffset:!0})}this._setScaleDispatchEvent(t,e,i),this.defaultRenderingQueue&&this.update()}}},{key:"_setScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseFloat(t);if(n>0)this._setScaleUpdatePages(n,t,e,!1);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var r=this.isInPresentationMode||this.removePageBorders?0:s.SCROLLBAR_PADDING,o=this.isInPresentationMode||this.removePageBorders?0:s.VERTICAL_PADDING,a=(this.container.clientWidth-r)/i.width*i.scale,l=(this.container.clientHeight-o)/i.height*i.scale;switch(t){case"page-actual":n=1;break;case"page-width":n=a;break;case"page-height":n=l;break;case"page-fit":n=Math.min(a,l);break;case"auto":var h=i.width>i.height,u=h?Math.min(l,a):a;n=Math.min(s.MAX_AUTO_SCALE,u);break;default:return void console.error(this._name+'._setScale: "'+t+'" is an unknown zoom value.')}this._setScaleUpdatePages(n,t,e,!0)}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var t=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:t.div})}},{key:"scrollPageIntoView",value:function(t){if(this.pdfDocument){var e=t.pageNumber||0,n=t.destArray||null,i=t.allowNegativeOffset||!1;if(!this.isInPresentationMode&&n){var r=this._pages[e-1];if(r){var o=0,a=0,l=0,h=0,u=void 0,c=void 0,d=r.rotation%180!=0,f=(d?r.height:r.width)/r.scale/s.CSS_UNITS,p=(d?r.width:r.height)/r.scale/s.CSS_UNITS,g=0;switch(n[1].name){case"XYZ":o=n[2],a=n[3],g=n[4],o=null!==o?o:0,a=null!==a?a:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":g="page-width",null===(a=n[2])&&this._location&&(o=this._location.left,a=this._location.top);break;case"FitV":case"FitBV":o=n[2],l=f,h=p,g="page-height";break;case"FitR":o=n[2],a=n[3],l=n[4]-o,h=n[5]-a;var v=this.removePageBorders?0:s.SCROLLBAR_PADDING,m=this.removePageBorders?0:s.VERTICAL_PADDING;u=(this.container.clientWidth-v)/l/s.CSS_UNITS,c=(this.container.clientHeight-m)/h/s.CSS_UNITS,g=Math.min(Math.abs(u),Math.abs(c));break;default:return void console.error(this._name+'.scrollPageIntoView: "'+n[1].name+'" is not a valid destination type.')}if(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===s.UNKNOWN_SCALE&&(this.currentScaleValue=s.DEFAULT_SCALE_VALUE),"page-fit"!==g||n[4]){var _=[r.viewport.convertToViewportPoint(o,a),r.viewport.convertToViewportPoint(o+l,a+h)],y=Math.min(_[0][0],_[1][0]),b=Math.min(_[0][1],_[1][1]);i||(y=Math.max(y,0),b=Math.max(b,0)),this._scrollIntoView({pageDiv:r.div,pageSpot:{left:y,top:b},pageNumber:e})}else this._scrollIntoView({pageDiv:r.div,pageNumber:e})}else console.error(this._name+'.scrollPageIntoView: Invalid "pageNumber" parameter.')}else this._setCurrentPageNumber(e,!0)}}},{key:"_resizeBuffer",value:function(t){var e=Math.max(10,2*t+1);this._buffer.resize(e)}},{key:"_updateLocation",value:function(t){var e=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===e?Math.round(1e4*e)/100:n,r=t.id,s="#page="+r;s+="&zoom="+i;var o=this._pages[r-1],a=this.container,l=o.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),h=Math.round(l[0]),u=Math.round(l[1]);s+=","+h+","+u,this._location={pageNumber:r,scale:i,top:u,left:h,rotation:this._pagesRotation,pdfOpenParams:s}}},{key:"update",value:function(){throw new Error("Not implemented: update")}},{key:"containsElement",value:function(t){return this.container.contains(t)}},{key:"focus",value:function(){this.container.focus()}},{key:"_getVisiblePages",value:function(){throw new Error("Not implemented: _getVisiblePages")}},{key:"cleanup",value:function(){for(var t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].renderingState!==o.RenderingStates.FINISHED&&this._pages[t].reset()}},{key:"_cancelRendering",value:function(){for(var t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function(t){var e=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);var n=t.id;if(this._pagesRequests[n])return this._pagesRequests[n];var i=this.pdfDocument.getPage(n).then((function(i){return t.pdfPage||t.setPdfPage(i),e._pagesRequests[n]=null,i})).catch((function(t){console.error("Unable to get page for page view",t),e._pagesRequests[n]=null}));return this._pagesRequests[n]=i,i}},{key:"forceRendering",value:function(t){var e=this,n=t||this._getVisiblePages(),i=this.renderingQueue.getHighestPriority(n,this._pages,this.scroll.down);return!!i&&(this._ensurePdfPageLoaded(i).then((function(){e.renderingQueue.renderView(i)})),!0)}},{key:"getPageTextContent",value:function(t){return this.pdfDocument.getPage(t+1).then((function(t){return t.getTextContent({normalizeWhitespace:!0})}))}},{key:"createTextLayerBuilder",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new c.TextLayerBuilder({textLayerDiv:t,eventBus:this.eventBus,pageIndex:e,viewport:n,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&i})}},{key:"createAnnotationLayerBuilder",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.NullL10n;return new a.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,renderInteractiveForms:n,linkService:this.linkService,downloadManager:this.downloadManager,l10n:i})}},{key:"setFindController",value:function(t){this.findController=t}},{key:"getPagesOverview",value:function(){var t=this._pages.map((function(t){var e=t.pdfPage.getViewport(1);return{width:e.width,height:e.height,rotation:e.rotation}}));if(!this.enablePrintAutoRotate)return t;var e=p(t[0]);return t.map((function(t){return e===p(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}}))}},{key:"pagesCount",get:function(){return this._pages.length}},{key:"pageViewsReady",get:function(){return this._pageViewsReady}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&this._setCurrentPageNumber(t,!0)}},{key:"currentPageLabel",get:function(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function(t){var e=0|t;if(this._pageLabels){var n=this._pageLabels.indexOf(t);n>=0&&(e=n+1)}this.currentPageNumber=e}},{key:"currentScale",get:function(){return this._currentScale!==s.UNKNOWN_SCALE?this._currentScale:s.DEFAULT_SCALE},set:function(t){if(isNaN(t))throw new Error("Invalid numeric scale");this.pdfDocument&&this._setScale(t,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(t){this.pdfDocument&&this._setScale(t,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(t){if(!(0,s.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==t){this._pagesRotation=t;for(var e=this._currentPageNumber,n=0,i=this._pages.length;n<i;n++){var r=this._pages[n];r.update(r.scale,t)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}}},{key:"_setDocumentViewerElement",get:function(){throw new Error("Not implemented: _setDocumentViewerElement")}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===s.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===s.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"hasEqualPageSizes",get:function(){for(var t=this._pages[0],e=1,n=this._pages.length;e<n;++e){var i=this._pages[e];if(i.width!==t.width||i.height!==t.height)return!1}return!0}}]),t}();e.BaseViewer=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFJS=void 0;var i,r=n(4),s=n(5),o=n(1),a=n(3),l=n(10),h=n(11),u=n(13),c=n(14),d=n(0),f=(i=d)&&i.__esModule?i:{default:i},p=n(6),g=n(15),v=n(16),m=f.default.PDFJS;m.PDFViewer=v.PDFViewer,m.PDFSinglePageViewer=g.PDFSinglePageViewer,m.PDFPageView=p.PDFPageView,m.PDFLinkService=a.PDFLinkService,m.SimpleLinkService=a.SimpleLinkService,m.TextLayerBuilder=s.TextLayerBuilder,m.DefaultTextLayerFactory=s.DefaultTextLayerFactory,m.AnnotationLayerBuilder=r.AnnotationLayerBuilder,m.DefaultAnnotationLayerFactory=r.DefaultAnnotationLayerFactory,m.PDFHistory=c.PDFHistory,m.PDFFindController=u.PDFFindController,m.EventBus=o.EventBus,m.DownloadManager=l.DownloadManager,m.ProgressBar=o.ProgressBar,m.GenericL10n=h.GenericL10n,m.NullL10n=o.NullL10n,e.PDFJS=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);function s(t,e){var n=document.createElement("a");if(n.click)n.href=t,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n);else{if(window.top===window&&t.split("#")[0]===window.location.href.split("#")[0]){var i=-1===t.indexOf("?")?"?":"&";t=t.replace(/#|$/,i+"$&")}window.open(t,"_parent")}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"downloadUrl",value:function(t,e){(0,r.createValidAbsoluteUrl)(t,"http://example.com")&&s(t+"#pdfjs.action=download",e)}},{key:"downloadData",value:function(t,e,n){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([t],{type:n}),e);s((0,r.createObjectURL)(t,n,r.PDFJS.disableCreateObjectURL),e)}},{key:"download",value:function(t,e,n){navigator.msSaveBlob?navigator.msSaveBlob(t,n)||this.downloadUrl(e,n):r.PDFJS.disableCreateObjectURL?this.downloadUrl(e,n):s(URL.createObjectURL(t),n)}}]),t}();e.DownloadManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(12);var r=document.webL10n,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._lang=e,this._ready=new Promise((function(t,n){r.setLanguage(e,(function(){t(r)}))}))}return i(t,[{key:"getDirection",value:function(){return this._ready.then((function(t){return t.getDirection()}))}},{key:"get",value:function(t,e,n){return this._ready.then((function(i){return i.get(t,e,n)}))}},{key:"translate",value:function(t){return this._ready.then((function(e){return e.translate(t)}))}}]),t}();e.GenericL10n=s},function(t,e,n){"use strict";document.webL10n=function(t,e,n){var i={},r="",s="textContent",o="",a={},l="loading";function h(t){var n=e.createEvent("Event");n.initEvent("localized",!0,!1),n.language=t,e.dispatchEvent(n)}function u(t,e,n){e=e||function(t){},n=n||function(){};var i=new XMLHttpRequest;i.open("GET",t,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0===i.status?e(i.responseText):n())},i.onerror=n,i.ontimeout=n;try{i.send(null)}catch(t){n()}}function c(t,e,n,o){var a=t.replace(/[^\/]*$/,"")||"./";function l(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}u(t,(function(t){r+=t,function(t,n){var i={},r=/^\s*|\s*$/,s=/^\s*#|^\s*$/,o=/^\s*\[(.*)\]\s*$/,h=/^\s*@import\s+url\((.*)\)\s*$/i,c=/^([^=\s]*)\s*=\s*(.+)$/;function d(t,n,u){var d=t.replace(r,"").split(/[\r\n]+/),p="*",g=e.split("-",1)[0],v=!1,m="";!function t(){for(;;){if(!d.length)return void u();var r=d.shift();if(!s.test(r)){if(n){if(m=o.exec(r)){p=m[1].toLowerCase(),v="*"!==p&&p!==e&&p!==g;continue}if(v)continue;if(m=h.exec(r))return void f(a+m[1],t)}var _=r.match(c);_&&3==_.length&&(i[_[1]]=l(_[2]))}}}()}function f(t,e){u(t,(function(t){d(t,!1,e)}),(function(){console.warn(t+" not found."),e()}))}d(t,!0,(function(){n(i)}))}(t,(function(t){for(var e in t){var r,o,a=e.lastIndexOf(".");a>0?(r=e.substring(0,a),o=e.substr(a+1)):(r=e,o=s),i[r]||(i[r]={}),i[r][o]=t[e]}n&&n()}))}),o)}function d(t,n){t&&(t=t.toLowerCase()),n=n||function(){},i={},r="",o="",o=t;var s,a=e.querySelectorAll('link[type="application/l10n"]'),u=a.length;if(0===u){var d=(s=e.querySelector('script[type="application/l10n"]'))?JSON.parse(s.innerHTML):null;if(d&&d.locales&&d.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(i=d.locales[t])){var f=d.default_locale.toLowerCase();for(var p in d.locales){if((p=p.toLowerCase())===t){i=d.locales[t];break}p===f&&(i=d.locales[f])}}n()}else console.log("no resource to load, early way out");return h(t),void(l="complete")}var g,v=0;function m(t){var e=t.href;this.load=function(t,n){c(e,t,n,(function(){console.warn(e+" not found."),console.warn('"'+t+'" resource not found'),o="",n()}))}}g=function(){++v>=u&&(n(),h(t),l="complete")};for(var _=0;_<u;_++)new m(a[_]).load(t,g)}function f(t,e,n){var r=i[t];if(!r){if(console.warn("#"+t+" is undefined."),!n)return null;r=n}var s={};for(var o in r){var a=r[o];a=g(a=p(a,e,t,o),e,t),s[o]=a}return s}function p(t,e,n,r){var s=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!s||!s.length)return t;var o,l=s[1],h=s[2];return e&&h in e?o=e[h]:h in i&&(o=i[h]),l in a&&(t=(0,a[l])(t,o,n,r)),t}function g(t,e,n){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,r){return e&&r in e?e[r]:r in i?i[r]:(console.log("argument {{"+r+"}} for #"+n+" is undefined."),t)}))}function v(t){var n=function(t){if(!t)return{};var e=t.getAttribute("data-l10n-id"),n=t.getAttribute("data-l10n-args"),i={};if(n)try{i=JSON.parse(n)}catch(t){console.warn("could not parse arguments for #"+e)}return{id:e,args:i}}(t);if(n.id){var i=f(n.id,n.args);if(i){if(i[s]){if(0===function(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var e=0,n=0;n<t.childNodes.length;n++)e+=1===t.nodeType?1:0;return e}(t))t[s]=i[s];else{for(var r=t.childNodes,o=!1,a=0,l=r.length;a<l;a++)3===r[a].nodeType&&/\S/.test(r[a].nodeValue)&&(o?r[a].nodeValue="":(r[a].nodeValue=i[s],o=!0));if(!o){var h=e.createTextNode(i[s]);t.insertBefore(h,t.firstChild)}}delete i[s]}for(var u in i)t[u]=i[u]}else console.warn("#"+n.id+" is undefined.")}}return a.plural=function(t,e,n,r){var l=parseFloat(e);if(isNaN(l))return t;if(r!=s)return t;a._pluralRules||(a._pluralRules=function(t){function e(t,e){return-1!==e.indexOf(t)}function n(t,e,n){return e<=t&&t<=n}var i={0:function(t){return"other"},1:function(t){return n(t%100,3,10)?"few":0===t?"zero":n(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function(t){return 1==t?"one":"other"},4:function(t){return n(t,0,1)?"one":"other"},5:function(t){return n(t,0,2)&&2!=t?"one":"other"},6:function(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function(t){return 2==t?"two":1==t?"one":"other"},8:function(t){return n(t,3,6)?"few":n(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function(t){return 0===t||1!=t&&n(t%100,1,19)?"few":1==t?"one":"other"},10:function(t){return n(t%10,2,9)&&!n(t%100,11,19)?"few":t%10!=1||n(t%100,11,19)?"other":"one"},11:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":t%10==0||n(t%10,5,9)||n(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function(t){return n(t,2,4)?"few":1==t?"one":"other"},13:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":1!=t&&n(t%10,0,1)||n(t%10,5,9)||n(t%100,12,14)?"many":1==t?"one":"other"},14:function(t){return n(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function(t){return 0===t||n(t%100,2,10)?"few":n(t%100,11,19)?"many":1==t?"one":"other"},16:function(t){return t%10==1&&11!=t?"one":"other"},17:function(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function(t){return 0===t?"zero":n(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function(t){return n(t,2,10)?"few":n(t,0,1)?"one":"other"},20:function(t){return!n(t%10,3,4)&&t%10!=9||n(t%100,10,19)||n(t%100,70,79)||n(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||e(t%100,[12,72,92])?t%10!=1||e(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1==t?"one":"other"},22:function(t){return n(t,0,1)||n(t,11,99)?"one":"other"},23:function(t){return n(t%10,1,2)||t%20==0?"one":"other"},24:function(t){return n(t,3,10)||n(t,13,19)?"few":e(t,[2,12])?"two":e(t,[1,11])?"one":"other"}},r={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return r in i?i[r]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(o));var h="["+a._pluralRules(l)+"]";return 0===l&&n+"[zero]"in i?t=i[n+"[zero]"][r]:1==l&&n+"[one]"in i?t=i[n+"[one]"][r]:2==l&&n+"[two]"in i?t=i[n+"[two]"][r]:n+h in i?t=i[n+h][r]:n+"[other]"in i&&(t=i[n+"[other]"][r]),t},{get:function(t,e,n){var i,r=t.lastIndexOf("."),o=s;r>0&&(o=t.substr(r+1),t=t.substring(0,r)),n&&((i={})[o]=n);var a=f(t,e,i);return a&&o in a?a[o]:"{{"+t+"}}"},getData:function(){return i},getText:function(){return r},getLanguage:function(){return o},setLanguage:function(t,e){d(t,(function(){e&&e()}))},getDirection:function(){var t=o.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function(t){for(var n=function(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||e.documentElement),i=n.length,r=0;r<i;r++)v(n[r]);v(t)},getReadyState:function(){return l},ready:function(n){n&&("complete"==l||"interactive"==l?t.setTimeout((function(){n()})):e.addEventListener&&e.addEventListener("localized",(function t(){e.removeEventListener("localized",t),n()})))}}}(window,document)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=n(1),o={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},a={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},l=function(){function t(e){var n=e.pdfViewer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=n,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();var i=Object.keys(a).join("");this.normalizationRegex=new RegExp("["+i+"]","g")}return i(t,[{key:"reset",value:function(){var t=this;this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this._firstPagePromise=new Promise((function(e){t.resolveFirstPage=e}))}},{key:"normalize",value:function(t){return t.replace(this.normalizationRegex,(function(t){return a[t]}))}},{key:"_prepareMatches",value:function(t,e,n){function i(t,e){var n=t[e],i=t[e+1];if(e<t.length-1&&n.match===i.match)return n.skipped=!0,!0;for(var r=e-1;r>=0;r--){var s=t[r];if(!s.skipped){if(s.match+s.matchLength<n.match)break;if(s.match+s.matchLength>=n.match+n.matchLength)return n.skipped=!0,!0}}return!1}t.sort((function(t,e){return t.match===e.match?t.matchLength-e.matchLength:t.match-e.match}));for(var r=0,s=t.length;r<s;r++)i(t,r)||(e.push(t[r].match),n.push(t[r].matchLength))}},{key:"calcFindPhraseMatch",value:function(t,e,n){for(var i=[],r=t.length,s=-r;-1!==(s=n.indexOf(t,s+r));)i.push(s);this.pageMatches[e]=i}},{key:"calcFindWordMatch",value:function(t,e,n){for(var i=[],r=t.match(/\S+/g),s=0,o=r.length;s<o;s++)for(var a=r[s],l=a.length,h=-l;-1!==(h=n.indexOf(a,h+l));)i.push({match:h,matchLength:l,skipped:!1});this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[e]=[],this.pageMatches[e]=[],this._prepareMatches(i,this.pageMatches[e],this.pageMatchesLength[e])}},{key:"calcFindMatch",value:function(t){var e=this.normalize(this.pageContents[t]),n=this.normalize(this.state.query),i=this.state.caseSensitive,r=this.state.phraseSearch;0!==n.length&&(i||(e=e.toLowerCase(),n=n.toLowerCase()),r?this.calcFindPhraseMatch(n,t,e):this.calcFindWordMatch(n,t,e),this.updatePage(t),this.resumePageIdx===t&&(this.resumePageIdx=null,this.nextPageMatch()),this.pageMatches[t].length>0&&(this.matchCount+=this.pageMatches[t].length,this.updateUIResultsCount()))}},{key:"extractText",value:function(){var t=this;if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents.length=0;for(var e=Promise.resolve(),n=function(n,i){var s=(0,r.createPromiseCapability)();t.extractTextPromises[n]=s.promise,e=e.then((function(){return t.pdfViewer.getPageTextContent(n).then((function(e){for(var i=e.items,r=[],o=0,a=i.length;o<a;o++)r.push(i[o].str);t.pageContents[n]=r.join(""),s.resolve(n)}),(function(e){console.error("Unable to get page "+(n+1)+" text content",e),t.pageContents[n]="",s.resolve(n)}))}))},i=0,s=this.pdfViewer.pagesCount;i<s;i++)n(i)}}},{key:"executeCommand",value:function(t,e){var n=this;null!==this.state&&"findagain"===t||(this.dirtyMatch=!0),this.state=e,this.updateUIState(o.PENDING),this._firstPagePromise.then((function(){n.extractText(),clearTimeout(n.findTimeout),"find"===t?n.findTimeout=setTimeout(n.nextMatch.bind(n),250):n.nextMatch()}))}},{key:"updatePage",value:function(t){this.selected.pageIdx===t&&(this.pdfViewer.currentPageNumber=t+1);var e=this.pdfViewer.getPageView(t);e.textLayer&&e.textLayer.updateMatches()}},{key:"nextMatch",value:function(){var t=this,e=this.state.findPrevious,n=this.pdfViewer.currentPageNumber-1,i=this.pdfViewer.pagesCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=n,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var r=0;r<i;r++)this.updatePage(r),r in this.pendingFindMatches||(this.pendingFindMatches[r]=!0,this.extractTextPromises[r].then((function(e){delete t.pendingFindMatches[e],t.calcFindMatch(e)})))}if(""!==this.state.query){if(!this.resumePageIdx){var s=this.offset;if(this.pagesToSearch=i,null!==s.matchIdx){var a=this.pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<a||e&&s.matchIdx>0)return this.hadMatch=!0,s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(e)}this.nextPageMatch()}}else this.updateUIState(o.FOUND)}},{key:"matchesReady",value:function(t){var e=this.offset,n=t.length,i=this.state.findPrevious;return n?(this.hadMatch=!0,e.matchIdx=i?n-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(i),!!(e.wrapped&&(e.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))}},{key:"updateMatchPosition",value:function(t,e,n,i){if(this.selected.matchIdx===e&&this.selected.pageIdx===t){var r={top:-50,left:-400};(0,s.scrollIntoView)(n[i],r,!0)}}},{key:"nextPageMatch",value:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var e=this.offset.pageIdx;if(!(t=this.pageMatches[e])){this.resumePageIdx=e;break}}while(!this.matchesReady(t))}},{key:"advanceOffsetPage",value:function(t){var e=this.offset,n=this.extractTextPromises.length;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this.pagesToSearch--,(e.pageIdx>=n||e.pageIdx<0)&&(e.pageIdx=t?n-1:0,e.wrapped=!0)}},{key:"updateMatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=o.NOT_FOUND,n=this.offset.wrapped;if(this.offset.wrapped=!1,t){var i=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,e=n?o.WRAPPED:o.FOUND,-1!==i&&i!==this.selected.pageIdx&&this.updatePage(i)}this.updateUIState(e,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)}},{key:"updateUIResultsCount",value:function(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)}},{key:"updateUIState",value:function(t,e){this.onUpdateState&&this.onUpdateState(t,e,this.matchCount)}}]),t}();e.FindState=o,e.PDFFindController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDestArraysEqual=e.isDestHashesEqual=e.PDFHistory=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),o=n(2);function a(){return document.location.hash}function l(t){var e=unescape(a()).substring(1),n=0|(0,s.parseQueryString)(e).page;return Number.isInteger(n)&&n>0&&n<=t.pagesCount||(n=null),{hash:e,page:n,rotation:t.rotation}}var h=function(){function t(e){var n=this,i=e.linkService,r=e.eventBus;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.linkService=i,this.eventBus=r||(0,o.getGlobalEventBus)(),this.initialized=!1,this.initialBookmark=null,this.initialRotation=null,this._boundEvents=Object.create(null),this._isViewerInPresentationMode=!1,this._isPagesLoaded=!1,this.eventBus.on("presentationmodechanged",(function(t){n._isViewerInPresentationMode=t.active||t.switchInProgress})),this.eventBus.on("pagesloaded",(function(t){n._isPagesLoaded=!!t.pagesCount}))}return r(t,[{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&"string"==typeof t){var n=this.initialized&&this.fingerprint!==t;this.fingerprint=t,this.initialized||this._bindEvents();var i=window.history.state;if(this.initialized=!0,this.initialBookmark=null,this.initialRotation=null,this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=a(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(i)||e){var r=l(this.linkService),s=r.hash,o=r.page,h=r.rotation;return!s||n||e?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:s,page:o,rotation:h},!0)}var u=i.destination;this._updateInternalState(u,i.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==u.rotation&&(this.initialRotation=u.rotation),u.dest?(this.initialBookmark=JSON.stringify(u.dest),this._destination.page=null):u.hash?this.initialBookmark=u.hash:u.page&&(this.initialBookmark="page="+u.page)}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"push",value:function(t){var e=this,n=t.namedDest,i=t.explicitDest,r=t.pageNumber;if(this.initialized)if((!n||"string"==typeof n)&&i instanceof Array&&Number.isInteger(r)&&r>0&&r<=this.linkService.pagesCount){var s=n||JSON.stringify(i);if(s){var o=!1;if(this._destination&&(u(this._destination.hash,s)||c(this._destination.dest,i))){if(this._destination.page)return;o=!0}this._popStateInProgress&&!o||(this._pushOrReplaceState({dest:i,hash:s,page:r,rotation:this.linkService.rotation},o),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){e._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: Invalid parameters.")}},{key:"pushCurrentPosition",value:function(){this.initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function(){if(this.initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this.initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"_pushOrReplaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||!this._destination,i={fingerprint:this.fingerprint,uid:n?this._uid:this._uid+1,destination:t};this._updateInternalState(t,i.uid),n?window.history.replaceState(i,""):(this._maxUid=this._uid,window.history.pushState(i,""))}},{key:"_tryPushCurrentPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var e=this._position;if(t&&((e=(0,s.cloneObj)(this._position)).temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(e,!0);else if(this._destination.hash!==e.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var n=!1;if(this._destination.page===e.first||this._destination.page===e.page){if(this._destination.dest||!this._destination.first)return;n=!0}this._pushOrReplaceState(e,n)}}else this._pushOrReplaceState(e)}}},{key:"_isValidState",value:function(t){return!!t&&t.fingerprint===this.fingerprint&&!(!Number.isInteger(t.uid)||t.uid<0)&&null!==t.destination&&"object"===i(t.destination)}},{key:"_updateInternalState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._numPositionUpdates=0}},{key:"_updateViewarea",value:function(t){var e=this,n=t.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page="+n.pageNumber:n.pdfOpenParams.substring(1),page:this.linkService.page,first:n.pageNumber,rotation:n.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((function(){e._popStateInProgress||e._tryPushCurrentPosition(!0),e._updateViewareaTimeout=null}),1e3))}},{key:"_popState",value:function(t){var e=this,n=t.state,i=a(),r=this._currentHash!==i;if(this._currentHash=i,n){if(this._isValidState(n)){this._popStateInProgress=!0,r&&(this._blockHashChange++,(0,s.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){e._blockHashChange--})));var o=n.destination;this._updateInternalState(o,n.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,s.isValidRotation)(o.rotation)&&(this.linkService.rotation=o.rotation),o.dest?this.linkService.navigateTo(o.dest):o.hash?this.linkService.setHash(o.hash):o.page&&(this.linkService.page=o.page),Promise.resolve().then((function(){e._popStateInProgress=!1}))}}else{this._uid++;var h=l(this.linkService),u=h.hash,c=h.page,d=h.rotation;this._pushOrReplaceState({hash:u,page:c,rotation:d},!0)}}},{key:"_bindEvents",value:function(){var t=this,e=this._boundEvents,n=this.eventBus;e.updateViewarea=this._updateViewarea.bind(this),e.popState=this._popState.bind(this),e.pageHide=function(e){t._destination&&!t._destination.temporary||t._tryPushCurrentPosition()},n.on("updateviewarea",e.updateViewarea),window.addEventListener("popstate",e.popState),window.addEventListener("pagehide",e.pageHide)}},{key:"popStateInProgress",get:function(){return this.initialized&&(this._popStateInProgress||this._blockHashChange>0)}}]),t}();function u(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||(0,s.parseQueryString)(t).nameddest===e)}function c(t,e){function n(t,e){if((void 0===t?"undefined":i(t))!==(void 0===e?"undefined":i(e)))return!1;if(t instanceof Array||e instanceof Array)return!1;if(null!==t&&"object"===(void 0===t?"undefined":i(t))&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!n(t[r],e[r]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!(t instanceof Array&&e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var r=0,s=t.length;r<s;r++)if(!n(t[r],e[r]))return!1;return!0}e.PDFHistory=h,e.isDestHashesEqual=u,e.isDestArraysEqual=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFSinglePageViewer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},s=n(8),o=n(1),a=n(0),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.eventBus.on("pagesinit",(function(t){n._ensurePageViewVisible()})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"_resetView",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetView",this).call(this),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment()}},{key:"_ensurePageViewVisible",value:function(){var t=this._pages[this._currentPageNumber-1],e=this._pages[this._previousPageNumber-1],n=this.viewer.childNodes;switch(n.length){case 0:this.viewer.appendChild(t.div);break;case 1:if(n[0]!==e.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(t===e)break;this._shadowViewer.appendChild(e.div),this.viewer.appendChild(t.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}},{key:"_scrollUpdate",value:function(){this._updateScrollDown&&this._updateScrollDown(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_scrollUpdate",this).call(this)}},{key:"_scrollIntoView",value:function(t){var e=this,n=t.pageDiv,i=t.pageSpot,r=void 0===i?null:i,s=t.pageNumber,a=void 0===s?null:s;a&&this._setCurrentPageNumber(a);var l=this._currentPageNumber>=this._previousPageNumber,h=this._location;this._ensurePageViewVisible(),(0,o.scrollIntoView)(n,r),this._updateScrollDown=function(){e.scroll.down=l,delete e._updateScrollDown},setTimeout((function(){e._location===h&&(e._updateScrollDown&&e._updateScrollDown(),e.update())}),0)}},{key:"_getVisiblePages",value:function(){if(!this.pagesCount)return{views:[]};var t=this._pages[this._currentPageNumber-1],e=t.div,n={id:t.id,x:e.offsetLeft+e.clientLeft,y:e.offsetTop+e.clientTop,view:t};return{first:n,last:n,views:[n]}}},{key:"update",value:function(){var t=this._getVisiblePages(),e=t.views.length;0!==e&&(this._resizeBuffer(e),this.renderingQueue.renderHighestPriority(t),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location}))}},{key:"_setDocumentViewerElement",get:function(){return(0,a.shadow)(this,"_setDocumentViewerElement",this._shadowViewer)}}]),e}(s.BaseViewer);e.PDFSinglePageViewer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),s=n(8),o=n(0);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=function(t){function e(){return a(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"_scrollIntoView",value:function(t){var e=t.pageDiv,n=t.pageSpot,i=void 0===n?null:n;(0,r.scrollIntoView)(e,i)}},{key:"_getVisiblePages",value:function(){if(!this.isInPresentationMode)return(0,r.getVisibleElements)(this.container,this._pages,!0);var t=this._pages[this._currentPageNumber-1];return{first:t,last:t,views:[{id:t.id,view:t}]}}},{key:"update",value:function(){var t=this._getVisiblePages(),e=t.views,n=e.length;if(0!==n){this._resizeBuffer(n),this.renderingQueue.renderHighestPriority(t);for(var i=this._currentPageNumber,r=!1,s=0;s<n;++s){var o=e[s];if(o.percent<100)break;if(o.id===i){r=!0;break}}r||(i=e[0].id),this.isInPresentationMode||this._setCurrentPageNumber(i),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"_setDocumentViewerElement",get:function(){return(0,o.shadow)(this,"_setDocumentViewerElement",this.viewer)}}]),e}(s.BaseViewer);e.PDFViewer=h}])},t.exports=i()},"../../../../home/node/node_modules/svg.js/dist/svg.js":function(t,e,n){var i,r;
/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/r="undefined"!=typeof window?window:this,void 0===(i=function(){return function(t,e){var n=(void 0!==this?this:t).SVG=function(t){if(n.supported)return t=new n.Doc(t),n.parser.draw||n.prepare(),t};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(t){return"Svgjs"+u(t)+n.did++},n.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},n.extend=function(){var t,e,i,r;for(e=(t=[].slice.call(arguments)).pop(),r=t.length-1;r>=0;r--)if(t[r])for(i in e)t[r].prototype[i]=e[i];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,n.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&n.extend(e,t.extend),t.construct&&n.extend(t.parent||n.Container,t.construct),e},n.adopt=function(e){return e?e.instance?e.instance:((i="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:"linearGradient"==e.nodeName?new n.Gradient("linear"):"radialGradient"==e.nodeName?new n.Gradient("radial"):n[u(e.nodeName)]?new(n[u(e.nodeName)]):new n.Element(e)).type=e.nodeName,i.node=e,e.instance=i,i instanceof n.Doc&&i.namespace().defs(),i.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),i):null;var i},n.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new n.Doc(t):n.adopt(e.documentElement).nested()).size(2,0);n.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:i.polyline().node,path:i.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",(function(){n.parser.draw||n.prepare()}),!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,(function(e){return e instanceof t.SVGElement}))}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(t){var e,i;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?n.regex.isRgb.test(t)?(e=n.regex.rgb.exec(t.replace(n.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):n.regex.isHex.test(t)&&(e=n.regex.hex.exec(4==(i=t).length?["#",i.substring(1,2),i.substring(1,2),i.substring(2,3),i.substring(2,3),i.substring(3,4),i.substring(3,4)].join(""):i),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+c(this.r)+c(this.g)+c(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new n.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new n.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),n.Color.test=function(t){return t+="",n.regex.isHex.test(t)||n.regex.isRgb.test(t)},n.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},n.Color.isColor=function(t){return n.Color.isRgb(t)||n.Color.test(t)},n.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},n.extend(n.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new n.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){for(var n=e.slice(0),i=n.length;i--;)Array.isArray(n[i])&&(n[i]=t(n[i]));return n}(this.value),t}}),n.PointArray=function(t,e){n.Array.call(this,t,e||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new n.PointArray(r)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map((function(t){return t.slice()}));if(null!=t[0].x)return t.map((function(t){return[t.x,t.y]}))}else t=t.trim().split(n.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var i=0,r=t.length;i<r;i+=2)e.push([t[i],t[i+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var i={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},r="mlhvqtcsaz".split(""),s=0,o=r.length;s<o;++s)i[r[s]]=function(t){return function(e,n,r){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var s=0,o=e.length;s<o;++s)e[s]=e[s]+(s%2?n.y:n.x);return i[t](e,n,r)}}(r[s].toUpperCase());n.PathArray=function(t,e){n.Array.call(this,t,e||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)"M"==(i=this.value[r][0])||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(i=this.value[n][0])||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,i,r;for(t=new n.PathArray(t),r=this.value.length===t.value.length,e=0,i=this.value.length;r&&e<i;e++)r=this.value[e][0]===t.value[e][0];return r},morph:function(t){return t=new n.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,i,r,s,o=this.value,a=this.destination.value,l=[],h=new n.PathArray;for(e=0,i=o.length;e<i;e++){for(l[e]=[o[e][0]],r=1,s=o[e].length;r<s;r++)l[e][r]=o[e][r]+(a[e][r]-o[e][r])*t;"A"===l[e][0]&&(l[e][4]=+(0!=l[e][4]),l[e][5]=+(0!=l[e][5]))}return h.value=l,h},parse:function(t){if(t instanceof n.PathArray)return t.valueOf();var e,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(n.regex.numbersWithDots,l).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var s=[],o=new n.Point,a=new n.Point,h=0,u=t.length;do{n.regex.isPathLetter.test(t[h])?(e=t[h],++h):"M"==e?e="L":"m"==e&&(e="l"),s.push(i[e].call(null,t.slice(h,h+=r[e.toUpperCase()]).map(parseFloat),o,a))}while(u>h);return s},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(n.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof n.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new n.Number(t),new n.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new n.Number(t),new n.Number(this-t,this.unit||t.unit)},times:function(t){return t=new n.Number(t),new n.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new n.Number(t),new n.Number(this/t,this.unit||t.unit)},to:function(t){var e=new n.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new n.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new n.Number(this.destination).minus(this).times(t).plus(this):this}}}),n.Element=n.invent({create:function(t){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=d(this,t,e);return this.width(new n.Number(i.width)).height(new n.Number(i.height))},clone:function(t){this.writeDataToDom();var e=v(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(n.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return n.get(this.attr(t))},parent:function(e){var i=this;if(!i.node.parentNode)return null;if(i=n.adopt(i.node.parentNode),!e)return i;for(;i&&i.node instanceof t.SVGElement;){if("string"==typeof e?i.matches(e):i instanceof e)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName||"#document-fragment"==i.node.parentNode.nodeName)return null;i=n.adopt(i.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof n.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,s=i.firstChild.childNodes.length;r<s;r++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),n.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},n.morph=function(t){return function(e,i){return new n.MorphObj(e,i).at(t)}},n.Situation=n.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(t.duration).valueOf(),this.delay=new n.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,i){"object"==typeof t&&(e=t.ease,i=t.delay,t=t.duration);var r=new n.Situation({duration:t||1e3,delay:i||0,ease:n.easing[e||"-"]||e});return this.queue(r),this},delay:function(t){var e=new n.Situation({duration:t,delay:0,ease:n.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof n.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof n.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,i,r=this.situation;if(r.init)return this;for(t in r.animations)for(i=this.target()[t](),Array.isArray(i)||(i=[i]),Array.isArray(r.animations[t])||(r.animations[t]=[r.animations[t]]),e=i.length;e--;)r.animations[t][e]instanceof n.Number&&(i[e]=new n.Number(i[e])),r.animations[t][e]=i[e].morph(r.animations[t][e]);for(t in r.attrs)r.attrs[t]=new n.MorphObj(this.target().attr(t),r.attrs[t]);for(t in r.styles)r.styles[t]=new n.MorphObj(this.target().style(t),r.styles[t]);return r.initialTransformation=this.target().matrixify(),r.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",(function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))})),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,n.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after((function(){this.off("during.fx",i)})),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,n.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll((function(){this.off("during.fx",e)})),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=r&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,i,r=this,s=this.target(),o=this.situation;for(t in o.animations)i=[].concat(o.animations[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s[t].apply(s,i);for(t in o.attrs)i=[t].concat(o.attrs[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s.attr.apply(s,i);for(t in o.styles)i=[t].concat(o.styles[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s.style.apply(s,i);if(o.transforms.length){for(i=o.initialTransformation,t=0,e=o.transforms.length;t<e;t++){var a=o.transforms[t];a instanceof n.Matrix?i=a.relative?i.multiply((new n.Matrix).morph(a).at(o.ease(this.pos))):i.morph(a).at(o.ease(this.pos)):(a.relative||a.undo(i.extract()),i=i.multiply(a.at(o.ease(this.pos))))}s.matrix(i)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new n.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new n.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),n.MorphObj=n.invent({create:function(t,e){return n.Color.isColor(e)?new n.Color(t).morph(e):n.regex.delimiter.test(t)?n.regex.pathLetters.test(t)?new n.PathArray(t).morph(e):new n.Array(t).morph(e):n.regex.numberAndUnit.test(e)?new n.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(t,e,n){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof n.G)return this.transform({x:t},e),this;var i=new n.Number(t);return i.relative=e,this.add("x",i)},y:function(t,e){if(this.target()instanceof n.G)return this.transform({y:t},e),this;var i=new n.Number(t);return i.relative=e,this.add("y",i)},cx:function(t){return this.add("cx",new n.Number(t))},cy:function(t){return this.add("cy",new n.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var i;return this.target()instanceof n.Text?this.attr("font-size",t):(t&&e||(i=this.target().bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.add("width",new n.Number(t)).add("height",new n.Number(e))),this},width:function(t){return this.add("width",new n.Number(t))},height:function(t){return this.add("height",new n.Number(t))},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new n.Number(t)):this},viewbox:function(t,e,i,r){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(t,e,i,r)),this},update:function(t){if(this.target()instanceof n.Stop){if("number"==typeof t||t instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),n.Box=n.invent({create:function(t,e,i,r){if(!("object"!=typeof t||t instanceof n.Element))return n.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=i,this.height=r),m(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,m(e)},transform:function(t){var e,i=1/0,r=-1/0,s=1/0,o=-1/0;return[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)].forEach((function(e){e=e.transform(t),i=Math.min(i,e.x),r=Math.max(r,e.x),s=Math.min(s,e.y),o=Math.max(o,e.y)})),(e=new this.constructor).x=i,e.width=r-i,e.y=s,e.height=o-s,m(e),e}}}),n.BBox=n.invent({create:function(t){if(n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element){var i;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=e)throw new Exception("Element not in the dom")}i=t.node.getBBox()}catch(e){if(t instanceof n.Shape){var s=t.clone(n.parser.draw.instance).show();i=s.node.getBBox(),s.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}n.Box.call(this,i)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(t){n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element&&n.Box.call(this,t.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new n.RBox(this).transform(t.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(t){var e,i=p([1,0,0,1,0,0]);for(t=t instanceof n.Element?t.matrixify():"string"==typeof t?p(t.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"==typeof t?t:i,e=y.length-1;e>=0;--e)this[y[e]]=null!=t[y[e]]?t[y[e]]:i[y[e]]},extend:{extract:function(){var t=f(this,0,1),e=f(this,1,0),i=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(i*Math.PI/180)+this.f*Math.sin(i*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(i*Math.PI/180)+this.e*Math.sin(-i*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-i,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(t){return this.destination=new n.Matrix(t),this},at:function(t){return this.destination?new n.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new n.Matrix(this.native().multiply(function(t){return t instanceof n.Matrix||(t=new n.Matrix(t)),t}(t).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(t,e){return new n.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,i,r){return 1==arguments.length?e=t:3==arguments.length&&(r=i,i=e,e=t),this.around(i,r,new n.Matrix(t,0,0,e,0,0))},rotate:function(t,e,i){return t=n.utils.radians(t),this.around(e,i,new n.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,i,r){return 1==arguments.length?e=t:3==arguments.length&&(r=i,i=e,e=t),t=n.utils.radians(t),e=n.utils.radians(e),this.around(i,r,new n.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,i){return this.multiply(new n.Matrix(1,0,0,1,t||0,e||0)).multiply(i).multiply(new n.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=n.parser.native.createSVGMatrix(),e=y.length-1;e>=0;e--)t[y[e]]=this[y[e]];return t},toString:function(){return"matrix("+_(this.a)+","+_(this.b)+","+_(this.c)+","+_(this.d)+","+_(this.e)+","+_(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new n.Matrix(e)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(t,e){var n;n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(t,e){return this.destination=new n.Point(t,e),this},at:function(t){return this.destination?new n.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=n.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new n.Point(this.native().matrixTransform(t.native()))}}}),n.extend(n.Element,{point:function(t,e){return new n.Point(t,e).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(t,e,i){if(null==t){for(t={},i=(e=this.node.attributes).length-1;i>=0;i--)t[e[i].nodeName]=n.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?n.defaults.attrs[t]:n.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(n.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof n.Image&&(e=this.doc().defs().pattern(0,0,(function(){this.add(e)})))),"number"==typeof e?e=new n.Number(e):n.Color.isColor(e)?e=new n.Color(e):Array.isArray(e)&&(e=new n.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),n.extend(n.Element,{transform:function(t,e){var i,r;if("object"!=typeof t)return i=new n.Matrix(this).extract(),"string"==typeof t?i[t]:i;if(i=new n.Matrix(this),e=!!e||!!t.relative,null!=t.a)i=e?i.multiply(new n.Matrix(t)):new n.Matrix(t);else if(null!=t.rotation)g(t,this),i=e?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(g(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var s=i.extract();t.scaleX=1*t.scaleX/s.scaleX,t.scaleY=1*t.scaleY/s.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else null!=t.skew||null!=t.skewX||null!=t.skewY?(g(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,e||(s=i.extract(),i=i.multiply((new n.Matrix).skew(s.skewX,s.skewY,t.cx,t.cy).inverse())),i=i.skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=this.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),n.extend(n.FX,{transform:function(t,e){var i,r,s=this.target();return"object"!=typeof t?(i=new n.Matrix(s).extract(),"string"==typeof t?i[t]:i):(e=!!e||!!t.relative,null!=t.a?i=new n.Matrix(t):null!=t.rotation?(g(t,s),i=new n.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(g(t,s),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new n.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(g(t,s),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new n.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?s.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=s.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(i=new n.Translate(t.x,t.y)),i?(i.relative=e,this.last().transforms.push(i),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(n.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])}),new n.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],i=0,r=this.arguments.length;i<r;++i)e.push(this[this.arguments[i]]);var s=this._undo||new n.Matrix;return s=(new n.Matrix).morph(n.Matrix.prototype[this.method].apply(s,e)).at(t),this.inversed?s.inverse():s},undo:function(t){for(var e=0,i=this.arguments.length;e<i;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(n[u(this.method)])(t,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new n.Matrix).rotate((new n.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!n.regex.isCss.test(t))return this.node.style[h(t)];for(t=t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));e=t.pop();)this.style(e[0],e[1])}else this.node.style[h(t)]=null===e||n.regex.isBlank.test(e)?"":e;return this}}),n.Parent=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),(function(t){return n.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return n.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var i,r,s=this.children();for(i=0,r=s.length;i<r;i++)s[i]instanceof n.Element&&t.apply(s[i],[i,s]),e&&s[i]instanceof n.Container&&s[i].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(t,e){return 0===e||this instanceof n.Defs||this.node==n.parser.draw||(t=t||(this instanceof n.Doc?this:this.parent(n.Parent)),e=e||1/0,this.each((function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),n.Container=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(t){var e,i,r,s,o,a,l,h=[0,0,0,0],u=1,c=1,d=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof n.Element){for(a=t,l=t,o=(t.attr("viewBox")||"").match(d),t.bbox,r=new n.Number(t.width()),s=new n.Number(t.height());"%"==r.unit;)u*=r.value,r=new n.Number(a instanceof n.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==s.unit;)c*=s.value,s=new n.Number(l instanceof n.Doc?l.parent().offsetHeight:l.parent().height()),l=l.parent();this.x=0,this.y=0,this.width=r*u,this.height=s*c,this.zoom=1,o&&(e=parseFloat(o[0]),i=parseFloat(o[1]),r=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>r/s?this.height/s:this.width/r,this.x=e,this.y=i,this.width=r,this.height=s)}else t="string"==typeof t?t.match(d).map((function(t){return parseFloat(t)})):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):h,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,i,r){return this.destination=new n.ViewBox(t,e,i,r),this},at:function(t){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:n.Container,construct:{viewbox:function(t,e,i,r){return 0==arguments.length?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(t,e,i,r))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){n.Element.prototype[t]=function(e){return null==e?n.off(this,t):n.on(this,t,e),this}})),n.listenerId=0,n.on=function(t,e,i,r,s){var o=i.bind(r||t),a=t instanceof n.Element?t.node:t;a.instance=a.instance||{_events:{}};var l=a.instance._events;i._svgjsListenerId||(i._svgjsListenerId=++n.listenerId),e.split(n.regex.delimiter).forEach((function(t){var e=t.split(".")[0],n=t.split(".")[1]||"*";l[e]=l[e]||{},l[e][n]=l[e][n]||{},l[e][n][i._svgjsListenerId]=o,a.addEventListener(e,o,s||!1)}))},n.off=function(t,e,i,r){var s=t instanceof n.Element?t.node:t;if(s.instance&&("function"!=typeof i||(i=i._svgjsListenerId))){var o=s.instance._events;(e||"").split(n.regex.delimiter).forEach((function(t){var e,a,l=t&&t.split(".")[0],h=t&&t.split(".")[1];if(i)o[l]&&o[l][h||"*"]&&(s.removeEventListener(l,o[l][h||"*"][i],r||!1),delete o[l][h||"*"][i]);else if(l&&h){if(o[l]&&o[l][h]){for(a in o[l][h])n.off(s,[l,h].join("."),a);delete o[l][h]}}else if(h)for(t in o)for(e in o[t])h===e&&n.off(s,[t,h].join("."));else if(l){if(o[l]){for(e in o[l])n.off(s,[l,e].join("."));delete o[l]}}else{for(t in o)n.off(s,t);s.instance._events={}}}))}},n.extend(n.Element,{on:function(t,e,i,r){return n.on(this,t,e,i,r),this},off:function(t,e){return n.off(this.node,t,e),this},fire:function(e,i){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new n.CustomEvent(e,{detail:i,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,n.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(t):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=v(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof n.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof n.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(t){return this.masker=t instanceof n.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(t){return this.clipper=t instanceof n.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(t){this.constructor.call(this,n.create(t+"Gradient")),this.type=t},inherit:n.Container,extend:{at:function(t,e,i){return this.put(new n.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),n.extend(n.Gradient,n.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(t),fy:new n.Number(e)}):this.attr({x1:new n.Number(t),y1:new n.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(t),cy:new n.Number(e)}):this.attr({x2:new n.Number(t),y2:new n.Number(e)})}}),n.extend(n.Defs,{gradient:function(t,e){return this.put(new n.Gradient(t)).update(e)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(t){return("number"==typeof t||t instanceof n.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new n.Number(t.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),n.extend(n.Defs,{pattern:function(t,e,i){return this.put(new n.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element}),n.Bare=n.invent({create:function(t,e){if(this.constructor.call(this,n.create(t)),e)for(var i in e.prototype)"function"==typeof e.prototype[i]&&(this[i]=e.prototype[i])},inherit:n.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),n.extend(n.Parent,{element:function(t,e){return this.put(new n.Bare(t,e))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,n.xlink)}},construct:{use:function(t,e){return this.put(new n.Use).element(t,e)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(t,e){return this.put(new n.Rect).size(t,e)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(t){return this.put(new n.Circle).rx(new n.Number(t).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(t,e){return this.put(new n.Ellipse).size(t,e).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),n.extend(n.Circle,n.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new n.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new n.Number(t).divide(2))},size:function(t,e){var i=d(this,t,e);return this.rx(new n.Number(i.width).divide(2)).ry(new n.Number(i.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:r}:new n.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=d(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,i,r){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=t?[t,e,i,r]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(t){return this.put(new n.Polyline).plot(t||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(t){return this.put(new n.Polygon).plot(t||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new n.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=d(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new n.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=d(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new n.Path).plot(t||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(e){if(!e)return this;var i=this,r=new t.Image;return n.on(r,"load",(function(){n.off(r);var t=i.parent(n.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(r.width,r.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:r.width,height:r.height,ratio:r.width/r.height,url:e}))})),n.on(r,"error",(function(t){n.off(r),"function"==typeof i._error&&i._error.call(i,t)})),this.attr("href",r.src=this.src=e,n.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new n.Image).load(t).size(e||0,i||e||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t.valueOf()?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,r=e.length;i<r;++i)0!=i&&3!=e[i].nodeType&&1==n.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{i=0;for(var s=(t=t.split("\n")).length;i<s;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new n.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=n.utils.map(n.utils.filterSVGElements(t.childNodes),(function(t){return n.adopt(t)}));return new n.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,r=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=r:(this.attr("dy",r+i),i=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new n.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new n.Text).text(t)},plain:function(t){return this.put(new n.Text).plain(t)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(n.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new n.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(t){for(var e=new n.TextPath,i=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+i,n.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(t){return this.attr("href",t,n.xlink)},show:function(t){return this.attr("show",t,n.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new n.A).to(t)}}}),n.extend(n.Element,{linkTo:function(t){var e=new n.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),n.extend(n.Defs,{marker:function(t,e,i){return this.put(new n.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(t,e,i,r){var s=["marker"];return"all"!=t&&s.push(t),s=s.join("-"),t=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(e,i,r),this.attr(s,t)}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function l(t,e,i,r){return i+r.replace(n.regex.dots," .")}function h(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function d(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function f(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function g(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function v(e){for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]instanceof t.SVGElement&&v(e.childNodes[i]);return n.adopt(e).id(n.eid(e.nodeName))}function m(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function _(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e,i={};i[t]=function(i){if(void 0===i)return this;if("string"==typeof i||n.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(t,i);else for(e=a[t].length-1;e>=0;e--)null!=i[a[t][e]]&&this.attr(a.prefix(t,a[t][e]),i[a[t][e]]);return this},n.extend(n.Element,n.FX,i)})),n.extend(n.Element,n.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new n.Number(t).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(t){return this.y(new n.Number(t).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(t,e){var i=(this._target||this).type;return"radial"==i||"circle"==i?this.attr("r",new n.Number(t)):this.rx(t).ry(null==e?t:e)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),n.Set=n.invent({create:function(t){t instanceof n.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new n.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each((function(){t=t.merge(this.rbox(this.doc()))})),t}},construct:{set:function(t){return new n.Set(t)}}}),n.FX.Set=n.invent({create:function(t){this.set=t}}),n.Set.inherit=function(){var t=[];for(var e in n.Shape.prototype)"function"==typeof n.Shape.prototype[e]&&"function"!=typeof n.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){n.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new n.FX.Set(this)):this}})),t=[],n.FX.prototype)"function"==typeof n.FX.prototype[e]&&"function"!=typeof n.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){n.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},n.extend(n.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),n.extend(n.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(t){var i=e.getElementById(function(t){var e=(t||"").toString().match(n.regex.reference);if(e)return e[1]}(t)||t);return n.adopt(i)},n.select=function(t,i){return new n.Set(n.utils.map((i||e).querySelectorAll(t),(function(t){return n.adopt(t)})))},n.extend(n.Parent,{select:function(t){return n.select(t,this.node)}});var y="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};b.prototype=t.Event.prototype,n.CustomEvent=b}else n.CustomEvent=t.CustomEvent;return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout((function(){t(i+r)}),r);return n=i+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),n}(r,r.document)}.call(e,n,e,t))||(t.exports=i)}}]);